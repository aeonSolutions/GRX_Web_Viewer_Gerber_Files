{"version":3,"sources":["config/config.js","components/functional/QualitySlider.jsx","components/functional/LayerListItem.jsx","components/functional/UnloadedLayerListItem.jsx","components/functional/BlendMode.jsx","components/functional/UploadGerber.jsx","components/functional/UploadModal.jsx","components/functional/CreateJob.jsx","components/functional/RulerKit.jsx","components/functional/SelectKit.jsx","components/SideBar.jsx","components/functional/OrbitControls.js","components/functional/InfoCoords.jsx","components/Renderer.jsx","App.jsx","index.js"],"names":["require","config","module","exports","backendurl","process","REACT_APP_GRX_API","port","REACT_APP_GRX_APIPORT","QualitySlider","renderScale","rendercontainer","useContext","DrawBoardContext","getComputedStyle","getPropertyValue","useState","quality","setQuality","style","margin","flex","padding","FormatPainterOutlined","min","max","onChange","value","setProperty","handleChange","LayerListItem","props","layer","visible","setVisible","color","setColor","useEffect","svgElement","document","getElementById","name","waitForElement","setTimeout","width","wrap","content","event","rgb","r","g","b","hex","handleColorChange","title","BgColorsOutlined","placement","trigger","whiteSpace","checked","console","log","target","add","remove","fetchLayer","a","data","blend","setBlend","size","handleBlendMode","Dragger","Upload","UploadGerber","job","fileList","setFileList","reloading","setReloading","getExistingFiles","fetch","json","response","items","map","filename","uid","status","handleRemove","file","method","Promise","resolve","reject","err","error","text","uploadprops","action","info","newfileList","url","onRemove","multiple","UploadOutlined","fontSize","textAlign","loading","type","icon","ReloadOutlined","onClick","UploadModal","replaceArtwork","onOk","e","onCancel","destroyOnClose","keyboard","CreateJob","update","setJob","waitInput","setWaitInput","handleOk","message","warning","errjson","JSON","parse","okButtonProps","disabled","placeholder","onPressEnter","Text","Typography","RulerKit","drawing","drawContainer","drawBoardSize","drawBoardScale","handleMouseLocation","mouseCoordinates","pixel","x","y","inch","mm","draw","offsetX","offsetY","reCreateDrawBoard","innerHTML","drawingBoard","SVG","id","svgChildElement","childNodes","top","left","position","transformOrigin","transform","cursor","filter","handleRulerKit","ruler","addEventListener","once","key","removeEventListener","coordinates","startPosition","line","stroke","linecap","click","font","fill","family","lineDrawing","attr","x2","y2","move","toFixed","Math","sqrt","pow","doc_keyDown","altKey","code","SelectKit","svgContainer","objectSelectionKit","oldDrawContainerNodes","removeChild","initColor","querySelector","defs","querySelectorAll","svgElements","units","getAttribute","slice","svgChildElementClone","cloneNode","defList","forEach","node","push","nodeName","attributes","onmouseover","lineWidth","d","pad","find","def","substring","shapeid","shape","infoBar","oldInfo","createElement","toUpperCase","nodeMap","array","string","i","length","deriveNodeAttributes","replaceChild","onmouseleave","appendChild","parentNode","Option","Select","TabPane","Tabs","Search","Input","SideBar","fetchData","urlext","setState","percent","state","layerdata","useoutline","Array","frontload","finisheddata","getLayerList","side","svg","changeDOMSVG","removeDOMSVG","addDOMSVG","getJobList","search","jobList","Jobs","Name","handleJobDelete","handleFrontLoad","handleUseOutline","hideSidebar","sidebarhidden","sidebar","showSidebar","layers","rendered","objectSelection","coordinatesActive","height","className","hidden","this","defaultSize","enable","right","bottom","topRight","bottomRight","bottomLeft","topLeft","maxWidth","minWidth","backgroundColor","backdropFilter","transition","pointerEvents","bodyStyle","indicator","LoadingOutlined","spin","animated","inkBar","tabPane","defaultActiveKey","centered","tab","onSearch","overflowX","overflowY","header","span","dataSource","renderItem","jobname","Item","onConfirm","okText","cancelText","CloseCircleOutlined","item","UnloadedLayerListItem","setSVGinDIV","removeSVGinDIV","forceRender","plain","VideoCameraOutlined","defaultValue","cameraSelector","BlendMode","newState","Component","_changeEvent","_startEvent","_endEvent","OrbitControls","object","domElement","undefined","warn","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","clientWidth","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","preventDefault","focus","window","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","handleMouseWheel","needsUpdate","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","passive","EventDispatcher","InfoCoords","setCoordinates","infobar","setInfoCoordinates","React","createContext","Renderer","CSS3DObjects","addInitSVGFromDom","frontPCBObject","CSS3DObject","z","context","cssScene","backPCBObject","initDrawBoard","test","navigator","userAgent","cssText","zIndex","setAttribute","layerartwork","finishedartwork","removeAllLayers","addLayer","children","divLayer","floor","random","addElementToThree","viewBoxString","unit","viewBox","split","originx","Number","originy","dataset","widthtext","heighttext","removeLayer","removeCSS3DObject","newCSS3DObject","removeAllCSS3DObjects","boardLayers","updateCSSObjects","child","camera","THREE","innerWidth","innerHeight","controls","cssRenderer","cameraType","offsetWidth","offsetHeight","setupScene","CSS3DRenderer","setSize","clock","stats","Stats","onWindowResize","aspect","animationHandler","render","requestAnimationFrame","Provider","clear","ref","textShadow","ResizeObserver","observe","App","windowheight","version","rel","href","ReactDOM"],"mappings":"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","file":"static/js/main.0737f324.chunk.js","sourcesContent":["const dotenv = require('dotenv')\ndotenv.config()\n\nmodule.exports = {\n  backendurl: process.env.REACT_APP_GRX_API || 'https://grx.creery.org',\n  port: process.env.REACT_APP_GRX_APIPORT || '/api',\n}\n","import React, { useState, useContext } from 'react'\nimport { DrawBoardContext } from '../Renderer'\n\nimport { Slider, Col, Row } from 'antd'\nimport { FormatPainterOutlined } from '@ant-design/icons'\n\nconst QualitySlider = () => {\n  const { rendercontainer } = useContext(DrawBoardContext)\n  let renderScale\n  if (rendercontainer) {\n    renderScale = getComputedStyle(rendercontainer).getPropertyValue('--svg-scale')\n  }\n  const [quality, setQuality] = useState(renderScale)\n\n  const handleChange = (value) => {\n    rendercontainer.style.setProperty('--svg-scale', value)\n    setQuality(value)\n  }\n\n  return (\n    <Row style={{ margin: '5px ' }}>\n      <Col flex='30px' style={{ padding: '5px' }}>\n        <FormatPainterOutlined />\n      </Col>\n      <Col flex='auto'>\n        <Slider min={1} max={10} onChange={(value) => handleChange(value)} value={quality} />\n      </Col>\n    </Row>\n  )\n}\n\nexport default QualitySlider\n","import React, { useState, useEffect } from 'react'\n\nimport { Checkbox, Popover, Badge, Tooltip, Row, Col } from 'antd'\nimport { BgColorsOutlined } from '@ant-design/icons'\nimport { SliderPicker } from 'react-color'\n\nconst LayerListItem = (props) => {\n  const [visible, setVisible] = useState(props.layer.visible)\n  const [color, setColor] = useState('#FFFFFF')\n  const handleChange = (value) => {\n    console.log(value)\n    props.layer.visible = value\n    setVisible(value)\n  }\n\n  const handleColorChange = (color, event) => {\n    var layerObject = document.getElementById(props.layer.name)\n    layerObject.style.color = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, 0.7)`\n    setColor(color.hex)\n  }\n\n  useEffect(() => {\n    let svgElement = document.getElementById(props.layer.name)\n    let waitForElement = () => {\n      if (svgElement !== null) {\n        setColor(getComputedStyle(svgElement).getPropertyValue('color'))\n      } else {\n        svgElement = document.getElementById(props.layer.name)\n        setTimeout(waitForElement, 250)\n      }\n    }\n    waitForElement()\n  }, [props.layer.name])\n\n  return (\n    <div style={{ width: '100%' }}>\n      <Row wrap={false}>\n        <Col flex=\"10px\">\n          <Popover\n            content={<SliderPicker color={color} onChange={(color, event) => handleColorChange(color, event)} />}\n            title={\n              <div>\n                <BgColorsOutlined />\n            &nbsp; ColorPicker\n          </div>\n            }\n            placement='right'\n            trigger='click'\n          >\n            <Badge color={color} />\n          </Popover>\n        </Col>\n        <Col flex=\"auto\">\n          <Checkbox style={{ whiteSpace: 'pre' }} checked={visible} onChange={(value) => handleChange(value.target.checked)}>\n            <Tooltip placement='right' title={props.layer.name}>\n              {props.layer.name}\n            </Tooltip>\n          </Checkbox>\n        </Col>\n      </Row>\n    </div>\n  )\n}\n\nexport default LayerListItem\n","import React, { useState, useEffect } from 'react'\n\nimport { Checkbox, Popover, Badge, Tooltip, Row, Col } from 'antd'\nimport { BgColorsOutlined } from '@ant-design/icons'\nimport { SliderPicker } from 'react-color'\n\nconst LayerListItem = (props) => {\n  let { layer, add, remove, fetchLayer } = props\n  const [visible, setVisible] = useState(props.layer.visible)\n  const [color, setColor] = useState('#FFFFFF')\n\n  const handleChange = async (value) => {\n    let svgElement = document.getElementById(layer.name)\n    console.log(svgElement)\n    console.log(layer)\n    if (value === true) {\n      var data = await fetchLayer(layer)\n      add(...data, svgElement)\n    } else if (value === false) {\n      remove(layer)\n    }\n    props.layer.visible = value\n    setVisible(value)\n  }\n\n  const handleColorChange = (color, event) => {\n    let svgElement = document.getElementById(layer.name)\n    svgElement.style.color = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, 0.7)`\n    setColor(color.hex)\n  }\n\n  useEffect(() => {\n    console.log('Effect')\n    console.log(layer.name)\n    let svgElement = document.getElementById(layer.name)\n    let waitForElement = () => {\n      if (svgElement !== null) {\n        setColor(getComputedStyle(svgElement).getPropertyValue('color'))\n      } else {\n        svgElement = document.getElementById(layer.name)\n        setTimeout(waitForElement, 250)\n      }\n    }\n    waitForElement()\n  }, [props.layer.name]) // props.layer.name is erroring isn eslint??\n  // React Hook useEffect has a missing dependency: 'layer.name'. Either include it or remove the dependency array.eslintreact-hooks/exhaustive-deps\n\n  return (\n    <div style={{ width: '100%' }}>\n      <Row wrap={false}>\n        <Col flex=\"10px\">\n          <Popover\n            content={<SliderPicker color={color} onChange={(color, event) => handleColorChange(color, event)} />}\n            title={\n              <div>\n                <BgColorsOutlined />\n                &nbsp; ColorPicker\n              </div>\n            }\n            placement='right'\n            trigger='click'\n          >\n            <Badge color={color} />\n          </Popover>\n        </Col>\n        <Col flex=\"auto\">\n          <Checkbox style={{ whiteSpace: 'pre' }} checked={visible} onChange={(value) => handleChange(value.target.checked)}>\n            <Tooltip placement='right' title={layer.name}>\n              {layer.name}\n            </Tooltip>\n          </Checkbox>\n        </Col>\n      </Row>\n    </div>\n  )\n}\n\nexport default LayerListItem\n","import React, { useState, useContext } from 'react'\nimport { DrawBoardContext } from '../Renderer'\nimport { Switch, Col, Row } from 'antd'\n\nconst QualitySlider = () => {\n  //root = document.documentElement\n  const { rendercontainer } = useContext(DrawBoardContext)\n\n  const [blend, setBlend] = useState(false)\n\n  const handleBlendMode = (checked) => {\n    //var variable = getComputedStyle(variableParent).getPropertyValue('--blend-mode')\n    if (checked) {\n      rendercontainer.style.setProperty('--blend-mode', 'color')\n    } else {\n      rendercontainer.style.setProperty('--blend-mode', 'normal')\n    }\n    setBlend(checked)\n  }\n\n  return (\n    <Row style={{ margin: '5px ' }}>\n      <Col flex='auto' style={{ padding: '5px' }}>\n        Color Blend\n      </Col>\n      <Col flex='30px' style={{ padding: '5px' }}>\n        <Switch size='small' checked={blend} onChange={(checked) => handleBlendMode(checked)} />\n      </Col>\n    </Row>\n  )\n}\n\nexport default QualitySlider\n","// REACT\nimport React, { useState, useEffect } from 'react'\n\n// ANT DESIGN\nimport { Upload, Button } from 'antd'\nimport { UploadOutlined, ReloadOutlined } from '@ant-design/icons'\nconst { Dragger } = Upload\n\n// CONFIG\nconst { backendurl, port } = require('../../config/config')\n\nconst UploadGerber = (props) => {\n  console.log(props.job)\n  var { job } = props\n  const [fileList, setFileList] = useState([])\n  const [reloading, setReloading] = useState(false)\n\n  useEffect(() => {\n    // Mount and Update\n    getExistingFiles()\n    return () => {\n      // Unmount\n    }\n  }, [])\n  // ^^ React Hook useEffect has a missing dependency: 'getExistingFiles'. \n  // Either include it or remove the dependency array.eslintreact - hooks / exhaustive - deps\n\n  const getExistingFiles = async () => {\n    setReloading(true)\n    var data = await fetch(`${backendurl}${port}/uploaded?job=${job}`)\n    var response = await data.json()\n    var items = response.map((filename) => ({\n      uid: filename,\n      name: filename,\n      status: 'done',\n    }))\n    setFileList(items)\n    setReloading(false)\n    return items\n  }\n\n  // fileList object example\n  // {\n  //   uid: '-1',\n  //   name: 'xxx.png',\n  //   status: 'done',\n  // },\n\n  const handleChange = (info) => {\n    console.log(info)\n    let newfileList = [...info.fileList]\n\n    // 1. Limit the number of uploaded files\n    // Only to show two recent uploaded files, and old ones will be replaced by the new\n    // fileList = fileList.slice(-2);\n\n    // 2. Read from response and show file link\n    newfileList = newfileList.map((file) => {\n      if (file.response) {\n        // Component will show file.url as link\n        console.log(file.url)\n        file.url = file.response.url\n      }\n      return file\n    })\n    setFileList(newfileList)\n  }\n\n  const handleRemove = async (file) => {\n    console.log(file)\n    try {\n      var response = await fetch(`${backendurl}${port}/file?job=${job}&filename=${file.name}`, {\n        method: 'DELETE',\n      })\n    } catch (err) {\n      throw err\n    }\n\n    return new Promise((resolve, reject) => {\n      try {\n        if (response.status !== 200) {\n          console.error(response)\n          var err = response.text()\n          throw err\n        }\n        //let data = response.json();\n        resolve(response)\n      } catch (err) {\n        reject(err)\n      }\n    })\n  }\n\n  const uploadprops = {\n    action: `${backendurl}${port}/upload?job=${job}`,\n    onChange: handleChange,\n    onRemove: handleRemove,\n    multiple: true,\n  }\n  return (\n    <div>\n      <Dragger {...uploadprops} fileList={fileList}>\n        <p>\n          <UploadOutlined style={{ fontSize: '32px' }} />\n        </p>\n        <p>Drag Gerber Files Here</p>\n        <p>(or click to open directory)</p>\n      </Dragger>\n      <div style={{ textAlign: 'right' }}>\n        <Button\n          loading={reloading}\n          type='text'\n          icon={<ReloadOutlined style={{ fontSize: '15px' }} />}\n          onClick={() => getExistingFiles()}\n        >\n          Reload\n        </Button>\n      </div>\n    </div>\n  )\n}\n\nexport default UploadGerber\n","// REACT\nimport React, { useState, useEffect } from 'react'\n\n// ANT DESIGN\nimport { Modal, Button } from 'antd'\n\n// CUSTOM\nimport UploadGerber from './UploadGerber'\n\n// CONFIG\n// const { backendurl, port } = require('../../config/config')\n\nconst UploadModal = (props) => {\n  var { replaceArtwork, job } = props\n\n  const [visible, setVisible] = useState(false)\n\n  useEffect(() => {\n    // Mount and Update\n    return () => {\n      // Unmount\n    }\n  }, [job])\n\n  const showModal = () => {\n    setVisible(true)\n  }\n\n  const handleOk = (e) => {\n    console.log(e)\n    setVisible(false)\n    replaceArtwork(job)\n  }\n\n  const handleCancel = (e) => {\n    console.log(e)\n    setVisible(false)\n  }\n\n  return (\n    <div>\n      <Button type='text' size='small' onClick={showModal}>\n        Upload\n      </Button>\n      <Modal\n        title={`Import Gerbers into Job: ${job}`}\n        visible={visible}\n        onOk={handleOk}\n        onCancel={handleCancel}\n        destroyOnClose\n        keyboard\n      >\n        <UploadGerber job={job} />\n      </Modal>\n    </div>\n  )\n}\n\nexport default UploadModal\n","// REACT\nimport React, { useState } from 'react'\n\n// ANT DESIGN\nimport { Modal, Button, Input, message } from 'antd'\n\n// CONFIG\nconst { backendurl, port } = require('../../config/config')\n\nconst CreateJob = (props) => {\n  const { replaceArtwork, update } = props\n  const [visible, setVisible] = useState(false)\n  const [job, setJob] = useState(null)\n  const [waitInput, setWaitInput] = useState(true)\n\n  const showModal = () => {\n    setVisible(true)\n  }\n\n  const handleOk = async (e) => {\n    if (job == null || job === '') {\n      message.warning('Must Assign your job a name')\n      return\n    }\n    try {\n      var response = await fetch(`${backendurl}${port}/job?job=${job}`, {\n        method: 'POST',\n      })\n      if (response.status !== 200) {\n        var err = await response.text()\n        console.log(err)\n        try {\n          let errjson = JSON.parse(err)\n          err = errjson['Message']\n        } catch (e) { }\n        throw err\n      }\n    } catch (err) {\n      console.error(err)\n      message.error(err)\n      return\n    }\n    setVisible(false)\n    update()\n    replaceArtwork(job)\n  }\n\n  const handleCancel = (e) => {\n    setVisible(false)\n  }\n\n  const handleInput = (e) => {\n    setJob(e.target.value)\n    setWaitInput(false)\n  }\n\n  return (\n    <div>\n      <Button type='text' size='small' onClick={showModal}>\n        Create\n      </Button>\n      <Modal\n        title={`Create New Job`}\n        visible={visible}\n        onOk={handleOk}\n        onCancel={handleCancel}\n        okButtonProps={{ disabled: waitInput }}\n        keyboard\n      >\n        <Input placeholder='enter job name' onChange={handleInput} onPressEnter={() => handleOk()} />\n      </Modal>\n    </div>\n  )\n}\n\nexport default CreateJob\n","import React, { useEffect, useContext } from 'react'\n\n// Ant Design\nimport { Button, Typography } from 'antd'\n\n// Context\nimport { DrawBoardContext } from '../Renderer'\n\n// SVGJS\nimport SVG from 'svg.js'\n\nconst { Text } = Typography\n\nconst RulerKit = (props) => {\n  const { drawContainer, drawBoardSize, drawBoardScale } = useContext(DrawBoardContext)\n  let drawing\n\n  const handleMouseLocation = (event, action) => {\n    let mouseCoordinates = { pixel: { x: 0, y: 0 }, inch: { x: 0, y: 0 }, mm: { x: 0, y: 0 }, draw: { x: 0, y: 0 } }\n    mouseCoordinates.pixel.x = (event.offsetX - drawBoardSize / 2) * drawBoardScale\n    mouseCoordinates.pixel.y = -((event.offsetY - drawBoardSize / 2) * drawBoardScale)\n    mouseCoordinates.inch.x = mouseCoordinates.pixel.x / 96\n    mouseCoordinates.inch.y = mouseCoordinates.pixel.y / 96\n    mouseCoordinates.mm.x = mouseCoordinates.inch.x * 24\n    mouseCoordinates.mm.y = mouseCoordinates.inch.y * 24\n    mouseCoordinates.draw.x = event.offsetX\n    mouseCoordinates.draw.y = event.offsetY\n    action(mouseCoordinates)\n  }\n\n  const reCreateDrawBoard = () => {\n    drawContainer.innerHTML = ''\n    let drawingBoard = SVG(drawContainer.id).size(drawBoardSize, drawBoardSize)\n    let svgChildElement = drawContainer.childNodes[0]\n    svgChildElement.style.top = `-${drawBoardSize / 2}px`\n    svgChildElement.style.left = `-${drawBoardSize / 2}px`\n    svgChildElement.style.position = `relative`\n    svgChildElement.style.transformOrigin = `center`\n    svgChildElement.style.transform = `scale(${drawBoardScale})`\n    svgChildElement.style.cursor = 'crosshair'\n    svgChildElement.style.filter = 'drop-shadow(2px 4px 6px black)'\n    return drawingBoard\n  }\n\n  const handleRulerKit = () => {\n    drawing = reCreateDrawBoard()\n    var action = (e) => handleMouseLocation(e, ruler)\n    drawContainer.addEventListener('click', action, { once: true })\n    let escape = (e) => {\n      if (e.key === 'Escape') {\n        console.log(e)\n        drawContainer.removeEventListener('click', action)\n        reCreateDrawBoard()\n      }\n    }\n    document.addEventListener('keydown', escape, { once: true })\n  }\n\n  const ruler = (coordinates) => {\n    let startPosition = coordinates\n    let line = drawing\n      .line(coordinates.draw.x, coordinates.draw.y, coordinates.draw.x, coordinates.draw.y)\n      .stroke({ color: 'white', width: 3, linecap: 'round' })\n    var text = drawing.text(`DX:0 DY:0 D:0`).click((e) => console.log(e))\n    text.font({ fill: 'white', family: 'Inconsolata', size: 50 })\n    let lineDrawing = (e) => {\n      handleMouseLocation(e, (coordinates) => {\n        line.attr({ x2: coordinates.draw.x, y2: coordinates.draw.y })\n        text\n          .move(coordinates.draw.x, coordinates.draw.y)\n          .text(\n            `DX:${(coordinates.inch.x - startPosition.inch.x).toFixed(5)}\" DY:${(\n              coordinates.inch.y - startPosition.inch.y\n            ).toFixed(5)}\" D:${Math.sqrt(\n              Math.pow(coordinates.inch.x - startPosition.inch.x, 2) +\n              Math.pow(coordinates.inch.y - startPosition.inch.y, 2)\n            ).toFixed(5)}\"`\n          )\n      })\n    }\n    drawContainer.addEventListener('mousemove', lineDrawing)\n    drawContainer.addEventListener('click', (e) => {\n      drawContainer.removeEventListener('mousemove', lineDrawing)\n    })\n  }\n\n  let doc_keyDown = (e) => {\n    console.log(e)\n    if (e.altKey && e.code === 'KeyR') {\n      handleRulerKit()\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', doc_keyDown, false)\n    return function cleanup() {\n      document.removeEventListener('keydown', doc_keyDown, false)\n    }\n  })\n\n  return (\n    <div>\n      <Button type='text' style={{ width: '100%' }} onClick={() => handleRulerKit()}>\n        Ruler&#160;<Text type='secondary'>(alt+r)</Text>\n      </Button>\n    </div>\n  )\n}\n\nexport default RulerKit\n","import React, { useEffect, useContext } from 'react'\n\n// Ant Design\nimport { Button, Typography } from 'antd'\n\n// Context\nimport { DrawBoardContext } from '../Renderer'\n\nconst { Text } = Typography\n\nconst SelectKit = (props) => {\n  const { drawContainer, svgContainer } = useContext(DrawBoardContext)\n\n  const deriveNodeAttributes = (nodeMap, units) => {\n    let array = [...nodeMap]\n    let string = ''\n    for (var i = 0; i < array.length; i++) {\n      if (array[i].nodeName !== 'id') {\n        string += ` ${array[i].nodeName.toUpperCase()}: ${(array[i].value / 1000).toFixed(5)}${units}`\n      }\n    }\n    return string\n  }\n\n  const objectSelectionKit = () => {\n    let oldDrawContainerNodes = drawContainer.childNodes[0]\n    drawContainer.removeChild(oldDrawContainerNodes)\n    //let svgContainer = document.getElementById('svg-container')\n    //let divLayer = a // divLayer.id = layer.name\n    //var svgChildElement = divLayer.childNodes[0]\n    var svgChildElement = svgContainer.querySelector('div > svg') // Literally gets first SVG... Need way to select or tell what layer ...\n    let defs = svgChildElement.querySelectorAll('defs > *')\n    let svgElements = svgChildElement.querySelectorAll('g > *')\n    var widthattr = svgChildElement.getAttribute('width')\n    var units = widthattr.slice(-2)\n\n    // let old_element = svgChildElement\n    let svgChildElementClone = svgChildElement.cloneNode(true)\n\n    // Get Defs or Features in SVG\n    let defList = []\n    defs.forEach((node) => {\n      defList.push({ id: node.id, type: node.nodeName, attributes: node.attributes })\n    })\n    console.log(defList)\n\n    let initColor\n    svgElements.forEach((node) => {\n      initColor = node.style.color\n      let g\n      node.onmouseover = (e) => {\n        //console.log(e)\n        e.target.style.color = '#08979c'\n\n        if (e.target.nodeName === 'path') {\n          g = {\n            type: e.target.nodeName,\n            g: 'path',\n            lineWidth: e.target.attributes['stroke-width'] ? e.target.attributes['stroke-width'].value : 0,\n            code: e.target.attributes.d.value,\n            attr: e.target.attributes,\n          }\n        } else if (e.target.nodeName === 'use') {\n          let pad = defList.find((def) => def.id === e.target.attributes['xlink:href'].value.substring(1))\n          //console.log(pad)\n          g = {\n            type: e.target.nodeName,\n            g: 'pad',\n            x: e.target.attributes.x.value,\n            y: e.target.attributes.y.value,\n            shapeid: e.target.attributes['xlink:href'].value,\n            shape: pad,\n            attr: e.target.attributes,\n          }\n        }\n        let infoBar = document.getElementById('bottom-info-bar')\n        let oldInfo = infoBar.childNodes[0]\n        let info = document.createElement('h4')\n        //console.log(e.target.nodeName)\n        //let attributes = deriveNodeAttributes(g.shape.attributes)\n        info.innerHTML = g\n          ? g.g === 'path'\n            ? g.lineWidth === '0'\n              ? `SURFACE`\n              : `LINE | Width: ${g.lineWidth / 1000}${units}`\n            : `PAD | Shape: ${g.shape.type === 'g'\n              ? `SPECIAL | X: ${(g.x / 1000).toFixed(5)}${units} Y: ${(g.y / 1000).toFixed(5)}${units}`\n              : `${g.shape.type.toUpperCase()}  | X: ${(g.x / 1000).toFixed(5)}${units} Y: ${(g.y / 1000).toFixed(\n                5\n              )}${units} | ${deriveNodeAttributes(g.shape.attributes, units)}`\n            }`\n          : 'NA'\n        if (g) infoBar.replaceChild(info, oldInfo)\n      }\n\n      node.onmouseleave = (e) => {\n        e.target.style.color = initColor\n      }\n    })\n\n    let escape = (e) => {\n      if (e.key === 'Escape') {\n        drawContainer.appendChild(oldDrawContainerNodes)\n        svgChildElement.parentNode.replaceChild(svgChildElementClone, svgChildElement)\n      }\n    }\n    document.addEventListener('keydown', escape, { once: true })\n    // svgContainer.onclick = (e) => {\n    //   if (drawContainer.innerHTML != '') {\n    //     return\n    //   }\n    //   e.target.style.color = '#08979c'\n    //   var old_element = svgChildElement\n    //   var new_element = old_element.cloneNode(true)\n    //   old_element.parentNode.replaceChild(new_element, old_element)\n    // }\n  }\n\n  let doc_keyDown = (e) => {\n    if (e.altKey && e.code === 'KeyS') {\n      objectSelectionKit()\n    }\n  }\n\n  // const setUpKeyboardEvents = () => { }\n\n  useEffect(() => {\n    document.addEventListener('keydown', doc_keyDown, false)\n    return function cleanup() {\n      document.removeEventListener('keydown', doc_keyDown, false)\n    }\n  })\n\n  return (\n    <div>\n      <Button type='text' style={{ width: '100%' }} onClick={() => objectSelectionKit()}>\n        Select&#160;<Text type='secondary'>(alt+s)</Text>\n      </Button>\n    </div>\n  )\n}\n\nexport default SelectKit\n","// REACT\nimport React, { Component } from 'react'\n\n// ANT DESIGN UI\nimport {\n  Spin,\n  Switch,\n  Button,\n  Card,\n  Select,\n  Tabs,\n  Row,\n  Col,\n  List,\n  Input,\n  message,\n  Popconfirm,\n  Divider,\n} from 'antd'\nimport { LoadingOutlined, VideoCameraOutlined, CloseCircleOutlined } from '@ant-design/icons'\n\n// NPM PACKAGES\nimport { Resizable } from \"re-resizable\";\n\n// CUSTOM\n//import FetchArtwork from './functional/FetchArtwork'\nimport QualitySlider from './functional/QualitySlider'\nimport LayerListItem from './functional/LayerListItem'\nimport UnloadedLayerListItem from './functional/UnloadedLayerListItem'\nimport BlendMode from './functional/BlendMode'\nimport UploadModal from './functional/UploadModal'\nimport CreateJob from './functional/CreateJob'\nimport RulerKit from './functional/RulerKit'\nimport SelectKit from './functional/SelectKit'\n\n// ANT DESIGN CONSTANTS\nconst { Option } = Select\nconst { TabPane } = Tabs\nconst { Search } = Input\n\n// CONFIG\nconst { backendurl, port } = require('../config/config')\n\nclass SideBar extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      job: null,\n      layers: [],\n      rendered: null,\n      loading: false,\n      percent: 0,\n      jobList: [],\n      sidebarhidden: false,\n      sidebar: 'sidebar',\n      frontload: false,\n      useoutline: true,\n      objectSelection: null,\n      coordinatesActive: false,\n    }\n  }\n\n  fetchData = async (urlext, method) => {\n    this.setState({ loading: true, percent: 0 })\n    try {\n      let response = await fetch(backendurl + port + urlext, { method: method || 'GET' })\n      if (response.status !== 200) {\n        console.error(response)\n        //var err = 'Status: ' + response.status + ' => Message: ' + (await response.text()) // ADVANCED\n        var err = await response.text()\n        throw err\n      }\n      let data = await response.json()\n      this.setState({ loading: false, percent: 100 })\n      return data\n    } catch (err) {\n      this.setState({ loading: false })\n      message.error('Error => ' + err)\n      throw err\n    }\n  }\n\n  fetchLayer = async (layer) => {\n    var layerdata\n    if (layer.name !== 'front' && layer.name !== 'back') {\n      layerdata = await this.fetchData(`/gbr2svg/getLayerArtwork?job=${this.state.job}&layer=${layer.name}`)\n    } else {\n      layerdata = await this.fetchData(\n        `/gbr2svg/getFinishedArtwork?job=${this.state.job}&outline=${this.state.useoutline}`\n      )\n      layerdata = Array(layerdata.find((data) => data.name === layer.name))\n    }\n    return layerdata\n  }\n\n  replaceArtwork = async (job) => {\n    //this.props.clear()\n    console.log('Getting Finished Artowrk for', job)\n    var layerdata\n    if (this.state.frontload === true) {\n      layerdata = await this.fetchData(`/gbr2svg/getLayerArtwork?job=${job}`)\n      var finisheddata = await this.fetchData(`/gbr2svg/getFinishedArtwork?job=${job}&outline=${this.state.useoutline}`)\n      this.props.setJob(job, layerdata, finisheddata)\n    } else if (this.state.frontload === false) {\n      layerdata = await this.getLayerList(job)\n      finisheddata = [\n        {\n          name: 'front',\n          type: 'finished',\n          side: 'top',\n          svg: '',\n        },\n        {\n          name: 'back',\n          type: 'finished',\n          side: 'bottom',\n          svg: '',\n        },\n      ]\n      this.props.setJob(job, layerdata, finisheddata)\n    }\n    return\n  }\n\n  changeDOMSVG = (side, data) => {\n    this.removeDOMSVG(side)\n    var object = document.getElementById(side)\n    object.innerHTML = data\n    return\n  }\n\n  addDOMSVG = (side, data) => {\n    var object = document.getElementById(side)\n    object.innerHTML = data\n  }\n\n  removeDOMSVG = (side) => {\n    var object = document.getElementById(side)\n    object.innerHTML = ''\n  }\n\n  getJobList = async (search) => {\n    let data = await this.fetchData(`/joblist?search=${search}`)\n    var jobList = data.Jobs.map((job) => job.Name)\n    this.setState({ jobList: jobList })\n    return jobList\n  }\n\n  getLayerList = async (job) => {\n    let data = await this.fetchData(`/gbr2svg/getLayerList?job=${job}`)\n    return data\n  }\n\n  handleJobDelete = async (job) => {\n    console.log(job)\n    let data = await this.fetchData(`/job?job=${job}`, 'DELETE')\n    this.getJobList('')\n    console.log(data)\n    return data\n  }\n\n  handleFrontLoad = (value) => {\n    if (value === true) {\n      this.replaceArtwork(this.state.job)\n    }\n    this.setState({ frontload: value })\n  }\n\n  handleUseOutline = (value) => {\n    this.setState({ useoutline: value })\n  }\n\n  hideSidebar = () => {\n    this.setState({ sidebarhidden: true, sidebar: 'sidebar-hidden' })\n  }\n\n  showSidebar = () => {\n    this.setState({ sidebarhidden: false, sidebar: 'sidebar' })\n  }\n\n  render() {\n    return (\n      <div style={{ padding: '10px', width: '200px', height: '100%' }}>\n        <Button\n          type='text'\n          className='togglesidebar'\n          hidden={this.state.sidebarhidden}\n          onClick={() => this.hideSidebar()}\n        >\n          HIDE\n        </Button>\n        <Button\n          type='text'\n          className='togglesidebar'\n          hidden={!this.state.sidebarhidden}\n          onClick={() => this.showSidebar()}\n        >\n          SHOW\n        </Button>\n        <Resizable\n          style={{ padding: 0 }}\n          defaultSize={{ height: '100%', width: '200px', }}\n          enable={{ top: false, right: true, bottom: false, left: false, topRight: false, bottomRight: false, bottomLeft: false, topLeft: false }}\n          maxWidth='400px'\n          minWidth='200px'\n        >\n\n          <Card\n            style={{\n              backgroundColor: 'rgba(30, 30, 30, 0.85)',\n              backdropFilter: 'blur(25px)',\n              height: '100%',\n              width: '-webkit-fill-available',\n              transition: '0.5s ease',\n              pointerEvents: 'all'\n            }}\n            bodyStyle={{\n              height: 'calc(100% - 100px)',\n              padding: '0px'\n            }}\n            title={\n              this.state.loading ? <Spin indicator={<LoadingOutlined spin />} /> : this.state.job || 'GRX Gerber Renderer'\n            }\n            className={this.state.sidebar}\n          >\n            <Tabs animated={{ inkBar: true, tabPane: true }} size='small' defaultActiveKey='1' onChange={(key) => console.log(key)} centered>\n              <TabPane tab='Jobs' key='1' >\n                <Search placeholder='input search' onSearch={(value) => this.getJobList(value)} style={{ width: '-webkit-fill-available' }} />\n                <div style={{ height: '100%', position: 'relative', overflowX: 'hidden', overflowY: 'scroll' }}>\n                  <List\n                    size='small'\n                    header={\n                      <Row style={{ margin: '0px' }}>\n                        <Col span={15} style={{ padding: '0px 10px' }}>\n                          <div>Job List</div>\n                        </Col>\n                        <Col span={9} style={{ padding: '0px', textAlign: 'right' }}>\n                          <CreateJob\n                            replaceArtwork={(job) => this.replaceArtwork(job)}\n                            update={() => this.getJobList('')}\n                          />\n                        </Col>\n                      </Row>\n                    }\n                    //bordered\n                    dataSource={this.state.jobList}\n                    renderItem={(jobname) => (\n                      <List.Item style={{ padding: '5px 5px' }}>\n                        <Button\n                          type='link'\n                          style={{ width: '90%', height: '27px' }}\n                          onClick={() => this.replaceArtwork(jobname)}\n                        >\n                          {jobname}\n                        </Button>\n                        <Popconfirm\n                          title='Are you sure delete this job?'\n                          onConfirm={() => this.handleJobDelete(jobname)}\n                          okText='Yes'\n                          cancelText='No'\n                        >\n                          <CloseCircleOutlined />\n                        </Popconfirm>\n                      </List.Item>\n                    )}\n                  />\n                </div>\n              </TabPane>\n              <TabPane tab='Layers' key='2' style={{ overflowX: 'hidden', overflowY: 'scroll', height: '100%' }}>\n                <List\n                  size='small'\n                  header={\n                    <Row style={{ margin: '0px' }}>\n                      <Col span={15} style={{ padding: '0px 10px' }}>\n                        <div>Layers</div>\n                      </Col>\n                      <Col span={9} style={{ padding: '0px', textAlign: 'right' }}>\n                        <UploadModal replaceArtwork={(job) => this.replaceArtwork(job)} job={this.state.job} />\n                      </Col>\n                    </Row>\n                  }\n                  //bordered\n                  dataSource={this.state.layers}\n                  renderItem={(item) => (\n                    <List.Item style={{ padding: '8px 8px' }}>\n                      {this.state.frontload ? (\n                        <LayerListItem key={item} layer={item} />\n                      ) : (\n                        <UnloadedLayerListItem\n                          key={item}\n                          layer={item}\n                          add={(...props) => this.props.setSVGinDIV(...props)}\n                          remove={(...props) => this.props.removeSVGinDIV(...props)}\n                          fetchLayer={(...props) => this.fetchLayer(...props)}\n                        />\n                      )}\n                    </List.Item>\n                  )}\n                />\n                {/* <List\n                size='small'\n                header={<div>Steps</div>}\n                //bordered\n                dataSource={this.state.layerList}\n                renderItem={(item) => <List.Item>{item}</List.Item>}\n              /> */}\n              </TabPane>\n              <TabPane tab='Tools' key='3' forceRender style={{ overflowX: 'hidden', overflowY: 'scroll', height: '100%' }}>\n                <Divider plain>Kit</Divider>\n                <SelectKit />\n                <RulerKit />\n                <Divider plain>Settings</Divider>\n                <Row style={{ margin: '5px ' }}>\n                  <Col flex='30px' style={{ padding: '5px' }}>\n                    <VideoCameraOutlined />\n                  </Col>\n                  <Col flex='auto'>\n                    <Select\n                      defaultValue='orthographic'\n                      onChange={(value) => this.props.cameraSelector(value)}\n                      style={{ width: '100%' }}\n                    >\n                      <Option value='perspective'>Perspective</Option>\n                      <Option value='orthographic'>Orthographic</Option>\n                    </Select>\n                  </Col>\n                </Row>\n                <QualitySlider />\n                <BlendMode />\n                <Row style={{ margin: '5px ' }}>\n                  <Col flex='auto' style={{ padding: '5px' }}>\n                    Front Load\n                  </Col>\n                  <Col flex='30px' style={{ padding: '5px' }}>\n                    <Switch\n                      size='small'\n                      checked={this.state.frontload}\n                      onChange={(checked) => this.handleFrontLoad(checked)}\n                    />\n                  </Col>\n                </Row>\n                <Row style={{ margin: '5px ' }}>\n                  <Col flex='auto' style={{ padding: '5px' }}>\n                    Use Outline\n                  </Col>\n                  <Col flex='30px' style={{ padding: '5px' }}>\n                    <Switch\n                      size='small'\n                      checked={this.state.useoutline}\n                      onChange={(checked) => this.handleUseOutline(checked)}\n                    />\n                  </Col>\n                </Row>\n              </TabPane>\n            </Tabs>\n          </Card>\n        </Resizable>\n      </div>\n    )\n  }\n\n  componentDidMount() {\n    this.getJobList('')\n  }\n\n  componentDidUpdate() {\n    console.log('updated')\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    var newState = {}\n    console.log(state, props)\n    if (props.job !== state.job || props.layers !== state.layers) {\n      newState.job = props.job\n      newState.layers = props.layers\n      return newState\n    } else {\n      return null\n    }\n  }\n}\n\nexport default SideBar\n\n// DEPRECIATED METHODS\n","import {\n  EventDispatcher,\n  MOUSE,\n  Quaternion,\n  Spherical,\n  TOUCH,\n  Vector2,\n  Vector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends EventDispatcher {\n\n  constructor(object, domElement) {\n\n    super();\n\n    if (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n    if (domElement === document) console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n\n    this.object = object;\n    this.domElement = domElement;\n\n    // Set to false to disable this control\n    this.enabled = true;\n\n    // \"target\" sets the location of focus, where the object orbits around\n    this.target = new Vector3();\n\n    // How far you can dolly in and out ( PerspectiveCamera only )\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    // How far you can zoom in and out ( OrthographicCamera only )\n    this.minZoom = 0;\n    this.maxZoom = Infinity;\n\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    this.minPolarAngle = 0; // radians\n    this.maxPolarAngle = Math.PI; // radians\n\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n    this.minAzimuthAngle = - Infinity; // radians\n    this.maxAzimuthAngle = Infinity; // radians\n\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    this.enableDamping = false;\n    this.dampingFactor = 0.05;\n\n    // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n    // Set to false to disable zooming\n    this.enableZoom = true;\n    this.zoomSpeed = 1.0;\n\n    // Set to false to disable rotating\n    this.enableRotate = true;\n    this.rotateSpeed = 1.0;\n\n    // Set to false to disable panning\n    this.enablePan = true;\n    this.panSpeed = 1.0;\n    this.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n    this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n    // The four arrow keys\n    this.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n    // Mouse buttons\n    this.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n    // Touch fingers\n    this.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n    // for reset\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom;\n\n    // the target DOM element for key events\n    this._domElementKeyEvents = null;\n\n    //\n    // public methods\n    //\n\n    this.getPolarAngle = function () {\n\n      return spherical.phi;\n\n    };\n\n    this.getAzimuthalAngle = function () {\n\n      return spherical.theta;\n\n    };\n\n    this.listenToKeyEvents = function (domElement) {\n\n      domElement.addEventListener('keydown', onKeyDown);\n      this._domElementKeyEvents = domElement;\n\n    };\n\n    this.saveState = function () {\n\n      scope.target0.copy(scope.target);\n      scope.position0.copy(scope.object.position);\n      scope.zoom0 = scope.object.zoom;\n\n    };\n\n    this.reset = function () {\n\n      scope.target.copy(scope.target0);\n      scope.object.position.copy(scope.position0);\n      scope.object.zoom = scope.zoom0;\n\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(_changeEvent);\n\n      scope.update();\n\n      state = STATE.NONE;\n\n    };\n\n    // this method is exposed, but perhaps it would be better if we can make it private...\n    this.update = function () {\n\n      const offset = new Vector3();\n\n      // so camera.up is the orbit axis\n      const quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n      const quatInverse = quat.clone().invert();\n\n      const lastPosition = new Vector3();\n      const lastQuaternion = new Quaternion();\n\n      const twoPI = 2 * Math.PI;\n\n      return function update() {\n\n        const position = scope.object.position;\n\n        offset.copy(position).sub(scope.target);\n\n        // rotate offset to \"y-axis-is-up\" space\n        offset.applyQuaternion(quat);\n\n        // angle from z-axis around y-axis\n        spherical.setFromVector3(offset);\n\n        if (scope.autoRotate && state === STATE.NONE) {\n\n          rotateLeft(getAutoRotationAngle());\n\n        }\n\n        if (scope.enableDamping) {\n\n          spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n          spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n        } else {\n\n          spherical.theta += sphericalDelta.theta;\n          spherical.phi += sphericalDelta.phi;\n\n        }\n\n        // restrict theta to be between desired limits\n\n        let min = scope.minAzimuthAngle;\n        let max = scope.maxAzimuthAngle;\n\n        if (isFinite(min) && isFinite(max)) {\n\n          if (min < - Math.PI) min += twoPI; else if (min > Math.PI) min -= twoPI;\n\n          if (max < - Math.PI) max += twoPI; else if (max > Math.PI) max -= twoPI;\n\n          if (min <= max) {\n\n            spherical.theta = Math.max(min, Math.min(max, spherical.theta));\n\n          } else {\n\n            spherical.theta = (spherical.theta > (min + max) / 2) ?\n              Math.max(min, spherical.theta) :\n              Math.min(max, spherical.theta);\n\n          }\n\n        }\n\n        // restrict phi to be between desired limits\n        spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n        spherical.makeSafe();\n\n\n        spherical.radius *= scale;\n\n        // restrict radius to be between desired limits\n        spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n        // move target to panned location\n\n        if (scope.enableDamping === true) {\n\n          scope.target.addScaledVector(panOffset, scope.dampingFactor);\n\n        } else {\n\n          scope.target.add(panOffset);\n\n        }\n\n        offset.setFromSpherical(spherical);\n\n        // rotate offset back to \"camera-up-vector-is-up\" space\n        offset.applyQuaternion(quatInverse);\n\n        position.copy(scope.target).add(offset);\n\n        scope.object.lookAt(scope.target);\n\n        if (scope.enableDamping === true) {\n\n          sphericalDelta.theta *= (1 - scope.dampingFactor);\n          sphericalDelta.phi *= (1 - scope.dampingFactor);\n\n          panOffset.multiplyScalar(1 - scope.dampingFactor);\n\n        } else {\n\n          sphericalDelta.set(0, 0, 0);\n\n          panOffset.set(0, 0, 0);\n\n        }\n\n        scale = 1;\n\n        // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (zoomChanged ||\n          lastPosition.distanceToSquared(scope.object.position) > EPS ||\n          8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n          scope.dispatchEvent(_changeEvent);\n\n          lastPosition.copy(scope.object.position);\n          lastQuaternion.copy(scope.object.quaternion);\n          zoomChanged = false;\n\n          return true;\n\n        }\n\n        return false;\n\n      };\n\n    }();\n\n    this.dispose = function () {\n\n      scope.domElement.removeEventListener('contextmenu', onContextMenu);\n\n      scope.domElement.removeEventListener('pointerdown', onPointerDown);\n      scope.domElement.removeEventListener('wheel', onMouseWheel);\n\n      scope.domElement.removeEventListener('touchstart', onTouchStart);\n      scope.domElement.removeEventListener('touchend', onTouchEnd);\n      scope.domElement.removeEventListener('touchmove', onTouchMove);\n\n      scope.domElement.ownerDocument.removeEventListener('pointermove', onPointerMove);\n      scope.domElement.ownerDocument.removeEventListener('pointerup', onPointerUp);\n\n\n      if (scope._domElementKeyEvents !== null) {\n\n        scope._domElementKeyEvents.removeEventListener('keydown', onKeyDown);\n\n      }\n\n      //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n    };\n\n    //\n    // internals\n    //\n\n    const scope = this;\n\n    const STATE = {\n      NONE: - 1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_PAN: 4,\n      TOUCH_DOLLY_PAN: 5,\n      TOUCH_DOLLY_ROTATE: 6\n    };\n\n    let state = STATE.NONE;\n\n    const EPS = 0.000001;\n\n    // current position in spherical coordinates\n    const spherical = new Spherical();\n    const sphericalDelta = new Spherical();\n\n    let scale = 1;\n    const panOffset = new Vector3();\n    let zoomChanged = false;\n\n    const rotateStart = new Vector2();\n    const rotateEnd = new Vector2();\n    const rotateDelta = new Vector2();\n\n    const panStart = new Vector2();\n    const panEnd = new Vector2();\n    const panDelta = new Vector2();\n\n    const dollyStart = new Vector2();\n    const dollyEnd = new Vector2();\n    const dollyDelta = new Vector2();\n\n    function getAutoRotationAngle() {\n\n      return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n    }\n\n    function getZoomScale() {\n\n      return Math.pow(0.95, scope.zoomSpeed);\n\n    }\n\n    function rotateLeft(angle) {\n\n      sphericalDelta.theta -= angle;\n\n    }\n\n    function rotateUp(angle) {\n\n      sphericalDelta.phi -= angle;\n\n    }\n\n    const panLeft = function () {\n\n      const v = new Vector3();\n\n      return function panLeft(distance, objectMatrix) {\n\n        v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n        v.multiplyScalar(- distance);\n\n        panOffset.add(v);\n\n      };\n\n    }();\n\n    const panUp = function () {\n\n      const v = new Vector3();\n\n      return function panUp(distance, objectMatrix) {\n\n        if (scope.screenSpacePanning === true) {\n\n          v.setFromMatrixColumn(objectMatrix, 1);\n\n        } else {\n\n          v.setFromMatrixColumn(objectMatrix, 0);\n          v.crossVectors(scope.object.up, v);\n\n        }\n\n        v.multiplyScalar(distance);\n\n        panOffset.add(v);\n\n      };\n\n    }();\n\n    // deltaX and deltaY are in pixels; right and down are positive\n    const pan = function () {\n\n      const offset = new Vector3();\n\n      return function pan(deltaX, deltaY) {\n\n        const element = scope.domElement;\n\n        if (scope.object.isPerspectiveCamera) {\n\n          // perspective\n          const position = scope.object.position;\n          offset.copy(position).sub(scope.target);\n          let targetDistance = offset.length();\n\n          // half of the fov is center to top of screen\n          targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\n\n          // we use only clientHeight here so aspect ratio does not distort speed\n          panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n          panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\n        } else if (scope.object.isOrthographicCamera) {\n\n          // orthographic\n          panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n          panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\n        } else {\n\n          // camera neither orthographic nor perspective\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n          scope.enablePan = false;\n\n        }\n\n      };\n\n    }();\n\n    function dollyOut(dollyScale) {\n\n      if (scope.object.isPerspectiveCamera) {\n\n        scale /= dollyScale;\n\n      } else if (scope.object.isOrthographicCamera) {\n\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n\n      } else {\n\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n        scope.enableZoom = false;\n\n      }\n\n    }\n\n    function dollyIn(dollyScale) {\n\n      if (scope.object.isPerspectiveCamera) {\n\n        scale *= dollyScale;\n\n      } else if (scope.object.isOrthographicCamera) {\n\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n\n      } else {\n\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n        scope.enableZoom = false;\n\n      }\n\n    }\n\n    //\n    // event callbacks - update the object state\n    //\n\n    function handleMouseDownRotate(event) {\n\n      rotateStart.set(event.clientX, event.clientY);\n\n    }\n\n    function handleMouseDownDolly(event) {\n\n      dollyStart.set(event.clientX, event.clientY);\n\n    }\n\n    function handleMouseDownPan(event) {\n\n      panStart.set(event.clientX, event.clientY);\n\n    }\n\n    function handleMouseMoveRotate(event) {\n\n      rotateEnd.set(event.clientX, event.clientY);\n\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n\n      const element = scope.domElement;\n\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n\n      rotateStart.copy(rotateEnd);\n\n      scope.update();\n\n    }\n\n    function handleMouseMoveDolly(event) {\n\n      dollyEnd.set(event.clientX, event.clientY);\n\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0) {\n\n        dollyOut(getZoomScale());\n\n      } else if (dollyDelta.y < 0) {\n\n        dollyIn(getZoomScale());\n\n      }\n\n      dollyStart.copy(dollyEnd);\n\n      scope.update();\n\n    }\n\n    function handleMouseMovePan(event) {\n\n      console.log('pannin', event.clientX, event.clientY)\n\n      panEnd.set(event.clientX, event.clientY);\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n      pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n\n      scope.update();\n\n    }\n\n    function handleMouseUp( /*event*/) {\n\n      // no-op\n\n    }\n\n    function handleMouseWheel(event) {\n\n      console.log('zoomin', event)\n\n      // zoom to mouse position\n\n      const element = scope.domElement;\n      panStart.set(event.clientX, event.clientY);\n      panEnd.set(element.clientWidth / 2, element.clientHeight / 2);\n\n      // dolly\n\n      if (event.deltaY < 0) {\n\n        panDelta.subVectors(panEnd, panStart).multiplyScalar(0.05); // scope.panSpeed\n        pan(panDelta.x, panDelta.y);\n\n        dollyIn(getZoomScale());\n\n      } else if (event.deltaY > 0) {\n\n        // swap start/end pan vectors\n        panDelta.subVectors(panStart, panEnd).multiplyScalar(0.05); // scope.panSpeed\n        pan(panDelta.x, panDelta.y);\n\n        dollyOut(getZoomScale());\n\n      }\n\n      scope.update();\n\n    }\n\n    function handleKeyDown(event) {\n\n      let needsUpdate = false;\n\n      switch (event.code) {\n\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.BOTTOM:\n          pan(0, - scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.RIGHT:\n          pan(- scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n\n      }\n\n      if (needsUpdate) {\n\n        // prevent the browser from scrolling on cursor keys\n        event.preventDefault();\n\n        scope.update();\n\n      }\n\n\n    }\n\n    function handleTouchStartRotate(event) {\n\n      if (event.touches.length == 1) {\n\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n      } else {\n\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n        rotateStart.set(x, y);\n\n      }\n\n    }\n\n    function handleTouchStartPan(event) {\n\n      if (event.touches.length == 1) {\n\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n      } else {\n\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n        panStart.set(x, y);\n\n      }\n\n    }\n\n    function handleTouchStartDolly(event) {\n\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      const distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyStart.set(0, distance);\n\n    }\n\n    function handleTouchStartDollyPan(event) {\n\n      if (scope.enableZoom) handleTouchStartDolly(event);\n\n      if (scope.enablePan) handleTouchStartPan(event);\n\n    }\n\n    function handleTouchStartDollyRotate(event) {\n\n      if (scope.enableZoom) handleTouchStartDolly(event);\n\n      if (scope.enableRotate) handleTouchStartRotate(event);\n\n    }\n\n    function handleTouchMoveRotate(event) {\n\n      if (event.touches.length == 1) {\n\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n      } else {\n\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n        rotateEnd.set(x, y);\n\n      }\n\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n\n      const element = scope.domElement;\n\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n\n      rotateStart.copy(rotateEnd);\n\n    }\n\n    function handleTouchMovePan(event) {\n\n      if (event.touches.length == 1) {\n\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n      } else {\n\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n        panEnd.set(x, y);\n\n      }\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n      pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n\n    }\n\n    function handleTouchMoveDolly(event) {\n\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      const distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyEnd.set(0, distance);\n\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n      dollyOut(dollyDelta.y);\n\n      dollyStart.copy(dollyEnd);\n\n    }\n\n    function handleTouchMoveDollyPan(event) {\n\n      if (scope.enableZoom) handleTouchMoveDolly(event);\n\n      if (scope.enablePan) handleTouchMovePan(event);\n\n    }\n\n    function handleTouchMoveDollyRotate(event) {\n\n      if (scope.enableZoom) handleTouchMoveDolly(event);\n\n      if (scope.enableRotate) handleTouchMoveRotate(event);\n\n    }\n\n    function handleTouchEnd( /*event*/) {\n\n      // no-op\n\n    }\n\n    //\n    // event handlers - FSM: listen for events and reset state\n    //\n\n    function onPointerDown(event) {\n\n      if (scope.enabled === false) return;\n\n      switch (event.pointerType) {\n\n        case 'mouse':\n        case 'pen':\n          onMouseDown(event);\n          break;\n\n        // TODO touch\n\n      }\n\n    }\n\n    function onPointerMove(event) {\n\n      if (scope.enabled === false) return;\n\n      switch (event.pointerType) {\n\n        case 'mouse':\n        case 'pen':\n          onMouseMove(event);\n          break;\n\n        // TODO touch\n\n      }\n\n    }\n\n    function onPointerUp(event) {\n\n      switch (event.pointerType) {\n\n        case 'mouse':\n        case 'pen':\n          onMouseUp(event);\n          break;\n\n        // TODO touch\n\n      }\n\n    }\n\n    function onMouseDown(event) {\n\n      // Prevent the browser from scrolling.\n      event.preventDefault();\n\n      // Manually set the focus since calling preventDefault above\n      // prevents the browser from setting it automatically.\n\n      scope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n      let mouseAction;\n\n      switch (event.button) {\n\n        case 0:\n\n          mouseAction = scope.mouseButtons.LEFT;\n          break;\n\n        case 1:\n\n          mouseAction = scope.mouseButtons.MIDDLE;\n          break;\n\n        case 2:\n\n          mouseAction = scope.mouseButtons.RIGHT;\n          break;\n\n        default:\n\n          mouseAction = - 1;\n\n      }\n\n      switch (mouseAction) {\n\n        case MOUSE.DOLLY:\n\n          if (scope.enableZoom === false) return;\n\n          handleMouseDownDolly(event);\n\n          state = STATE.DOLLY;\n\n          break;\n\n        case MOUSE.ROTATE:\n\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n\n            if (scope.enablePan === false) return;\n\n            handleMouseDownPan(event);\n\n            state = STATE.PAN;\n\n          } else {\n\n            if (scope.enableRotate === false) return;\n\n            handleMouseDownRotate(event);\n\n            state = STATE.ROTATE;\n\n          }\n\n          break;\n\n        case MOUSE.PAN:\n\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n\n            if (scope.enableRotate === false) return;\n\n            handleMouseDownRotate(event);\n\n            state = STATE.ROTATE;\n\n          } else {\n\n            if (scope.enablePan === false) return;\n\n            handleMouseDownPan(event);\n\n            state = STATE.PAN;\n\n          }\n\n          break;\n\n        default:\n\n          state = STATE.NONE;\n\n      }\n\n      if (state !== STATE.NONE) {\n\n        scope.domElement.ownerDocument.addEventListener('pointermove', onPointerMove);\n        scope.domElement.ownerDocument.addEventListener('pointerup', onPointerUp);\n\n        scope.dispatchEvent(_startEvent);\n\n      }\n\n    }\n\n    function onMouseMove(event) {\n\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n      switch (state) {\n\n        case STATE.ROTATE:\n\n          if (scope.enableRotate === false) return;\n\n          handleMouseMoveRotate(event);\n\n          break;\n\n        case STATE.DOLLY:\n\n          if (scope.enableZoom === false) return;\n\n          handleMouseMoveDolly(event);\n\n          break;\n\n        case STATE.PAN:\n\n          if (scope.enablePan === false) return;\n\n          handleMouseMovePan(event);\n\n          break;\n\n      }\n\n    }\n\n    function onMouseUp(event) {\n\n      scope.domElement.ownerDocument.removeEventListener('pointermove', onPointerMove);\n      scope.domElement.ownerDocument.removeEventListener('pointerup', onPointerUp);\n\n      if (scope.enabled === false) return;\n\n      handleMouseUp(event);\n\n      scope.dispatchEvent(_endEvent);\n\n      state = STATE.NONE;\n\n    }\n\n    function onMouseWheel(event) {\n\n      if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\n\n      event.preventDefault();\n\n      scope.dispatchEvent(_startEvent);\n\n      handleMouseWheel(event);\n\n      scope.dispatchEvent(_endEvent);\n\n    }\n\n    function onKeyDown(event) {\n\n      if (scope.enabled === false || scope.enablePan === false) return;\n\n      handleKeyDown(event);\n\n    }\n\n    function onTouchStart(event) {\n\n      if (scope.enabled === false) return;\n\n      event.preventDefault(); // prevent scrolling\n\n      switch (event.touches.length) {\n\n        case 1:\n\n          switch (scope.touches.ONE) {\n\n            case TOUCH.ROTATE:\n\n              if (scope.enableRotate === false) return;\n\n              handleTouchStartRotate(event);\n\n              state = STATE.TOUCH_ROTATE;\n\n              break;\n\n            case TOUCH.PAN:\n\n              if (scope.enablePan === false) return;\n\n              handleTouchStartPan(event);\n\n              state = STATE.TOUCH_PAN;\n\n              break;\n\n            default:\n\n              state = STATE.NONE;\n\n          }\n\n          break;\n\n        case 2:\n\n          switch (scope.touches.TWO) {\n\n            case TOUCH.DOLLY_PAN:\n\n              if (scope.enableZoom === false && scope.enablePan === false) return;\n\n              handleTouchStartDollyPan(event);\n\n              state = STATE.TOUCH_DOLLY_PAN;\n\n              break;\n\n            case TOUCH.DOLLY_ROTATE:\n\n              if (scope.enableZoom === false && scope.enableRotate === false) return;\n\n              handleTouchStartDollyRotate(event);\n\n              state = STATE.TOUCH_DOLLY_ROTATE;\n\n              break;\n\n            default:\n\n              state = STATE.NONE;\n\n          }\n\n          break;\n\n        default:\n\n          state = STATE.NONE;\n\n      }\n\n      if (state !== STATE.NONE) {\n\n        scope.dispatchEvent(_startEvent);\n\n      }\n\n    }\n\n    function onTouchMove(event) {\n\n      if (scope.enabled === false) return;\n\n      event.preventDefault(); // prevent scrolling\n\n      switch (state) {\n\n        case STATE.TOUCH_ROTATE:\n\n          if (scope.enableRotate === false) return;\n\n          handleTouchMoveRotate(event);\n\n          scope.update();\n\n          break;\n\n        case STATE.TOUCH_PAN:\n\n          if (scope.enablePan === false) return;\n\n          handleTouchMovePan(event);\n\n          scope.update();\n\n          break;\n\n        case STATE.TOUCH_DOLLY_PAN:\n\n          if (scope.enableZoom === false && scope.enablePan === false) return;\n\n          handleTouchMoveDollyPan(event);\n\n          scope.update();\n\n          break;\n\n        case STATE.TOUCH_DOLLY_ROTATE:\n\n          if (scope.enableZoom === false && scope.enableRotate === false) return;\n\n          handleTouchMoveDollyRotate(event);\n\n          scope.update();\n\n          break;\n\n        default:\n\n          state = STATE.NONE;\n\n      }\n\n    }\n\n    function onTouchEnd(event) {\n\n      if (scope.enabled === false) return;\n\n      handleTouchEnd(event);\n\n      scope.dispatchEvent(_endEvent);\n\n      state = STATE.NONE;\n\n    }\n\n    function onContextMenu(event) {\n\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n    }\n\n    //\n\n    scope.domElement.addEventListener('contextmenu', onContextMenu);\n\n    scope.domElement.addEventListener('pointerdown', onPointerDown);\n    scope.domElement.addEventListener('wheel', onMouseWheel, { passive: false });\n\n    scope.domElement.addEventListener('touchstart', onTouchStart, { passive: false });\n    scope.domElement.addEventListener('touchend', onTouchEnd);\n    scope.domElement.addEventListener('touchmove', onTouchMove, { passive: false });\n\n    // force an update at start\n\n    this.update();\n\n  }\n\n}\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n\n  constructor(object, domElement) {\n\n    super(object, domElement);\n\n    this.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n    this.mouseButtons.LEFT = MOUSE.PAN;\n    this.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n    this.touches.ONE = TOUCH.PAN;\n    this.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n  }\n\n}\n\nexport { OrbitControls, MapControls };\n","import React, { useState, useEffect, useContext } from 'react'\n\nimport { DrawBoardContext } from '../Renderer'\n\nconst InfoCoords = (props) => {\n  const [coordinates, setCoordinates] = useState({\n    pixel: { x: 0, y: 0 },\n    inch: { x: 0, y: 0 },\n    mm: { x: 0, y: 0 },\n    draw: { x: 0, y: 0 },\n  })\n  const { drawContainer, drawBoardSize, drawBoardScale, infobar } = useContext(DrawBoardContext)\n\n  const setInfoCoordinates = (event) => {\n    // let infoBar = document.getElementById('bottom-info-bar')\n    let oldInfo = infobar.childNodes[0]\n    let mouseCoordinates = {\n      pixel: { x: 0, y: 0 },\n      inch: { x: 0, y: 0 },\n      mm: { x: 0, y: 0 },\n      draw: { x: 0, y: 0 },\n    }\n    mouseCoordinates.pixel.x = (event.offsetX - drawBoardSize / 2) * drawBoardScale\n    mouseCoordinates.pixel.y = -(event.offsetY - drawBoardSize / 2) * drawBoardScale\n    mouseCoordinates.inch.x = mouseCoordinates.pixel.x / 96\n    mouseCoordinates.inch.y = mouseCoordinates.pixel.y / 96\n    mouseCoordinates.mm.x = mouseCoordinates.inch.x * 24\n    mouseCoordinates.mm.y = mouseCoordinates.inch.y * 24\n    mouseCoordinates.draw.x = event.offsetX\n    mouseCoordinates.draw.y = -event.offsetY\n    let info = document.createElement('h4')\n    info.innerHTML = `( ${coordinates.inch.x.toFixed(5)}in, ${coordinates.inch.y.toFixed(5)}in )`\n    infobar.replaceChild(info, oldInfo)\n    setCoordinates(mouseCoordinates)\n  }\n\n  useEffect(() => {\n    // Mount and Update\n    // drawContainer ? drawContainer.addEventListener('mousemove', setInfoCoordinates) : null\n    return () => {\n      // Unmount\n      drawContainer?.removeEventListener('mousemove', setInfoCoordinates)\n    }\n  })\n\n  return <div></div>\n}\n\nexport default InfoCoords\n","// REACT\nimport React, { Component } from 'react'\nimport SideBar from './SideBar'\n\n// THREE\nimport * as THREE from 'three'\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { OrbitControls } from \"./functional/OrbitControls\";\nimport { CSS3DRenderer, CSS3DObject } from 'three/examples/jsm/renderers/CSS3DRenderer.js'\nimport Stats from 'three/examples/jsm/libs/stats.module.js'\n\n// FUNCTIONAL\nimport InfoCoords from './functional/InfoCoords'\n\n// // TRACESPACE\n// const pcbStackup = require('pcb-stackup')\n\n// SVGJS\nimport SVG from 'svg.js'\n\n// STYLE\nimport '../App-simple.css'\n\nconst DrawBoardContext = React.createContext()\n\nclass Renderer extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      rendered: null,\n      job: null,\n      CSS3DObjects: [],\n      cameraType: 'orthographic',\n      mouseCoordinates: { pixel: { x: 0, y: 0 }, inch: { x: 0, y: 0 }, mm: { x: 0, y: 0 }, draw: { x: 0, y: 0 } },\n    }\n    this.drawBoardSize = 100000\n    this.drawBoardScale = 0.1\n    this.svgContainer = null\n    this.drawContainer = null\n  }\n\n  CSS3DObjects = []\n\n  // Three.js\n  addInitSVGFromDom = () => {\n    // FRONT\n    var element\n    element = document.getElementById('front')\n    this.frontPCBObject = new CSS3DObject(element)\n    this.frontPCBObject.name = 'front'\n    this.frontPCBObject.position.x = 0\n    this.frontPCBObject.position.y = 25\n    this.frontPCBObject.position.z = 1\n    this.frontPCBObject.context = element.getAttribute('data-context')\n    this.cssScene.add(this.frontPCBObject)\n\n    // BACK\n    element = document.getElementById('back')\n    this.backPCBObject = new CSS3DObject(element)\n    this.backPCBObject.name = 'back'\n    this.backPCBObject.position.x = 0\n    this.backPCBObject.position.y = 25\n    this.backPCBObject.position.z = 0.5\n    this.backPCBObject.context = element.getAttribute('data-context')\n    this.cssScene.add(this.backPCBObject)\n\n    this.setState({ CSS3DObjects: [this.frontPCBObject, this.backPCBObject] })\n  }\n\n  initDrawBoard = () => {\n    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {\n      return\n    }\n    this.drawContainer = document.createElement('div')\n    this.drawContainer.id = 'draw-board'\n    this.drawContainer.style.cssText = 'position: absolute; width: 0px; height: 0px;'\n    this.drawContainer.style.zIndex = '1000'\n    this.drawContainer.setAttribute('data-context', 'drawing')\n    // this.drawContainer.style.zIndex = 1000\n    this.drawContainer.style.transform =\n      'matrix3d(1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1) scale(var(--svg-scale))'\n    this.svgContainer.appendChild(this.drawContainer)\n    // console.log(document.getElementById('draw-board'))\n    this.drawing = SVG(this.drawContainer.id).size(this.drawBoardSize, this.drawBoardSize)\n    let svgChildElement = this.drawContainer.childNodes[0]\n    svgChildElement.style.top = `-${this.drawBoardSize / 2}px`\n    svgChildElement.style.left = `-${this.drawBoardSize / 2}px`\n    svgChildElement.style.position = `relative`\n    svgChildElement.style.transformOrigin = `center`\n    svgChildElement.style.transform = `scale(${this.drawBoardScale})`\n    svgChildElement.style.cursor = 'crosshair'\n  }\n\n  // Higher Level Abstraction Functions\n  setJob = (job, layerartwork, finishedartwork) => {\n    this.removeAllLayers()\n    layerartwork.forEach((layer) => {\n      this.addLayer(layer, false)\n    })\n    finishedartwork.forEach((layer) => {\n      this.addLayer(layer, false)\n    })\n    this.setState({ CSS3DObjects: this.cssScene.children, job: job })\n  }\n\n  // High Level Absraction Functions\n  addLayer = (layer, visible) => {\n    var divLayer = document.createElement('div')\n    divLayer.id = layer.name\n    //divLayer.style.visibility = visible\n    divLayer.setAttribute('data-type', layer.type)\n    divLayer.setAttribute('data-side', layer.side)\n    divLayer.setAttribute('data-context', 'board')\n    divLayer.style.width = '0px'\n    divLayer.style.height = '0px'\n    divLayer.style.position = 'relative'\n    divLayer.style.color = `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(\n      Math.random() * 256\n    )}, 0.7)`\n    if (layer.svg) {\n      divLayer = this.setSVGinDIV(layer, divLayer)\n    }\n    this.addElementToThree(divLayer, visible)\n  }\n\n  setSVGinDIV = (layer, divLayer) => {\n    divLayer.innerHTML = layer.svg\n    var svgChildElement = divLayer.childNodes[0]\n    var viewBoxString = svgChildElement.getAttribute('viewBox')\n    var widthattr = svgChildElement.getAttribute('width')\n    var unit = widthattr.slice(-2)\n    var viewBox = viewBoxString.split(' ')\n    var originx = Number(viewBox[0]) / 1000\n    var originy = Number(viewBox[1]) / 1000\n    var width = Number(viewBox[2]) / 1000\n    var height = Number(viewBox[3]) / 1000\n    //console.log(originx, originy, width, height)\n    divLayer.dataset.width = width\n    divLayer.dataset.height = height\n    svgChildElement.style.position = 'relative'\n    svgChildElement.style.transformOrigin = '0 0'\n    if (divLayer.id === 'back') {\n      svgChildElement.style.bottom = `calc(${height + originy}${unit} * var(--svg-scale))`\n      svgChildElement.style.left = `calc(${originx + width}${unit} * var(--svg-scale))`\n    } else if (divLayer.id === 'front') {\n      var widthtext = document.createElement('h4')\n      widthtext.className = 'width-measurement'\n      widthtext.innerHTML = `WIDTH: ${width}${unit}`\n      widthtext.style.bottom = `calc(${originy}${unit} * var(--svg-scale))`\n      widthtext.style.left = `calc(${originx + width}${unit} * var(--svg-scale))`\n      divLayer.appendChild(widthtext)\n      var heighttext = document.createElement('h4')\n      heighttext.className = 'height-measurement'\n      heighttext.innerHTML = `HEIGHT: ${height}${unit}`\n      heighttext.style.bottom = `calc(${height + originy}${unit} * var(--svg-scale))`\n      heighttext.style.left = `calc(${originx}${unit} * var(--svg-scale))`\n      divLayer.appendChild(heighttext)\n      svgChildElement.style.bottom = `calc(${height + originy}${unit} * var(--svg-scale))`\n      svgChildElement.style.left = `calc(${originx}${unit} * var(--svg-scale))`\n    } else {\n      svgChildElement.style.bottom = `calc(${height + originy}${unit} * var(--svg-scale))`\n      svgChildElement.style.left = `calc(${originx}${unit} * var(--svg-scale))`\n    }\n    return divLayer\n  }\n\n  removeSVGinDIV = (layer) => {\n    var divLayer = document.getElementById(layer.name)\n    divLayer.innerHTML = ''\n  }\n\n  removeLayer = (layer) => {\n    this.removeCSS3DObject(layer.name)\n  }\n\n  // Low Level Abstraction Functions\n  addElementToThree = (divLayer, visible) => {\n    var newCSS3DObject = new CSS3DObject(divLayer)\n    newCSS3DObject.name = divLayer.id\n    newCSS3DObject.visible = visible\n    newCSS3DObject.context = divLayer.getAttribute('data-context')\n    newCSS3DObject.position.x = 0\n    newCSS3DObject.position.y = 0\n    //newCSS3DObject.translate(0, 0, 0)\n    if (newCSS3DObject.name === 'back') {\n      newCSS3DObject.position.z = -0.5\n    } else if (newCSS3DObject.name === 'front') {\n      newCSS3DObject.position.z = 0.5\n    }\n    this.cssScene.add(newCSS3DObject)\n  }\n\n  removeCSS3DObject = (name) => {\n    this.cssScene.remove(this.state.CSS3DObjects.find((x) => x.name === name))\n    this.setState({ CSS3DObjects: this.cssScene.children })\n  }\n\n  removeAllCSS3DObjects = () => {\n    for (var i = this.state.CSS3DObjects.length - 1; i >= 0; i--) {\n      this.cssScene.remove(this.state.CSS3DObjects[i])\n    }\n    this.setState({ CSS3DObjects: this.cssScene.children })\n  }\n\n  removeAllLayers = () => {\n    let boardLayers = this.state.CSS3DObjects.filter((layer) => layer.context === 'board')\n    for (var i = boardLayers.length - 1; i >= 0; i--) {\n      this.cssScene.remove(boardLayers[i])\n    }\n    this.setState({ CSS3DObjects: this.cssScene.children })\n  }\n\n  updateCSSObjects = () => {\n    var children = this.cssScene.children\n    children.forEach((child) => {\n      this.cssScene.remove(child)\n    })\n    this.state.CSS3DObjects.forEach((object) => {\n      this.cssScene.add(object)\n    })\n  }\n\n  // Camera type switcher\n  cameraSelector = (type) => {\n    if (type === 'perspective') {\n      this.camera = new THREE.PerspectiveCamera(75, this.rendercontainer.innerWidth / this.rendercontainer.innerHeight, 0.01, 1000)\n      this.camera.position.z = 700\n      this.controls = new OrbitControls(this.camera, this.cssRenderer.domElement)\n      this.controls.enableRotate = true\n      this.controls.zoomSpeed = 1\n      //this.controls.enableZoom = true\n      this.setState({ cameraType: type })\n    } else if (type === 'orthographic') {\n      this.camera = new THREE.OrthographicCamera(\n        this.rendercontainer.offsetWidth / -2,\n        this.rendercontainer.offsetWidth / 2,\n        this.rendercontainer.offsetHeight / 2,\n        this.rendercontainer.offsetHeight / -2,\n        1,\n        1000\n      )\n      this.camera.position.z = 900\n      this.controls = new OrbitControls(this.camera, this.cssRenderer.domElement)\n      this.controls.enableRotate = false\n      this.controls.zoomSpeed = 1\n      //this.controls.enableZoom = false\n      this.setState({ cameraType: type })\n    } else {\n      console.log('unkown camera type:', type)\n    }\n  }\n\n  setupScene = () => {\n\n    // Experimental\n    let width = this.rendercontainer.clientWidth\n    let height = this.rendercontainer.clientHeight\n\n    // Create Scene\n    this.cssScene = new THREE.Scene()\n    this.rendercontainer.style.setProperty('--svg-scale', '1')\n\n    // Create Renderer\n    this.cssRenderer = new CSS3DRenderer()\n    this.cssRenderer.setSize(width, height)\n    this.cameraSelector('orthographic')\n    this.rendercontainer.appendChild(this.cssRenderer.domElement)\n    this.cssRenderer.domElement.id = 'css-renderer'\n    this.svgContainer = this.cssRenderer.domElement.childNodes[0]\n    this.svgContainer.id = 'svg-container'\n\n    // Outer Method to add objects to dom\n    // this.addInitSVGFromDom()\n    // rendercontainer.onwheel = (event) => this.customZoom(event.wheelDelta) // Depreciated => zooming is vert slow | planning to replace with quality slider\n\n    // Other Three objects\n    this.clock = new THREE.Clock()\n    this.stats = new Stats()\n    this.stats.domElement.style.right = '10px'\n    this.stats.domElement.style.left = 'auto'\n    this.stats.domElement.style.position = 'absolute'\n    this.stats.domElement.style.zIndex = '1002'\n    this.stats.domElement.style.top = '10px'\n    // this.stats.domElement.classList.add('stats')\n    this.rendercontainer.appendChild(this.stats.domElement)\n    this.setState({ rendered: true })\n  }\n\n  onWindowResize = () => {\n    if (this.rendercontainer) {\n      this.camera.aspect = this.rendercontainer.offsetWidth / this.rendercontainer.offsetHeight\n      this.camera.updateProjectionMatrix()\n      this.cssRenderer.setSize(this.rendercontainer.offsetWidth, this.rendercontainer.offsetHeight)\n    }\n\n  }\n\n  animationHandler = () => {\n    this.cssRenderer.render(this.cssScene, this.camera)\n    this.stats.update()\n    this.controls.update()\n    requestAnimationFrame(this.animationHandler)\n  }\n\n  render() {\n    console.log('Rendering Renderer', this.units)\n    let layers = this.state.CSS3DObjects.filter((layer) => layer.context === 'board')\n    //console.log(layers)\n    return (\n      <div id='main' style={{ position: 'relative', height: '100%', zIndex: 1000 }}>\n        <DrawBoardContext.Provider\n          value={{\n            infobar: this.infobar,\n            rendercontainer: this.rendercontainer,\n            svgContainer: this.svgContainer,\n            drawContainer: this.drawContainer,\n            drawBoardSize: this.drawBoardSize,\n            drawBoardScale: this.drawBoardScale,\n          }}\n        >\n\n          <SideBar\n            style={{ zIndex: '10' }}\n            job={this.state.job}\n            layers={layers}\n            svgContainer={this.svgContainer}\n            drawContainer={this.drawContainer}\n            drawBoardSize={this.drawBoardSize}\n            drawBoardScale={this.drawBoardScale}\n            cameraSelector={(...props) => this.cameraSelector(...props)}\n            setJob={(...props) => this.setJob(...props)}\n            setSVGinDIV={(layer, divLayer) => this.setSVGinDIV(layer, divLayer)}\n            removeSVGinDIV={(layer) => this.removeSVGinDIV(layer)}\n            clear={() => this.removeAllCSS3DObjects()}\n            update={() => this.updateCSSObjects()}\n          />\n          <div\n            id='three'\n            style={{ width: '-webkit-fill-available', height: '-webkit-fill-available', position: 'absolute', left: 0, top: 0, zIndex: '-1' }}\n            ref={(rendercontainer) => { this.rendercontainer = rendercontainer }}\n          />\n          <InfoCoords />\n        </DrawBoardContext.Provider>\n        <div\n          id='bottom-info-bar'\n          ref={(infobar) => { this.infobar = infobar }}\n          style={{\n            position: 'absolute',\n            width: '-webkit-fill-available',\n            textAlign: 'center',\n            bottom: '0px',\n            zIndex: '1000',\n            // filter: 'drop-shadow(2px 4px 6px black)',\n            textShadow: '-1px 0px 2px black, 0 1px 2px black, 1px 0 2px black, 0 -1px 2px black',\n          }}\n        >\n          <h4>0in, 0in</h4>\n        </div>\n      </div>\n    )\n  }\n\n  componentDidMount() {\n    this.setupScene()\n    this.animationHandler()\n    this.initDrawBoard()\n    new window.ResizeObserver(this.onWindowResize).observe(this.rendercontainer)\n    this.controls.update()\n  }\n}\n\nexport { Renderer as default, DrawBoardContext }\n","import React, { Component } from 'react'\nimport './Appcustom.css'\nimport Renderer from './components/Renderer'\nimport { version } from '../package.json'\n\nconst dotenv = require('dotenv')\ndotenv.config()\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { windowheight: window.innerHeight }\n  }\n\n  componentDidMount() {\n    console.log(process.env)\n  }\n\n  render() {\n    console.log('Rendering App', version)\n    return (\n      <div style={{ top: 0, left: 0, height: '100vh', width: '100vw', position: 'absolute' }}>\n        <div style={{ margin: 0, height: '-webkit-fill-available' }}>\n          <Renderer />\n        </div>\n\n        {/* <Card title='test' className='sidebar'>\n          <Button onClick={() => this.testFetch()}>Hello</Button>\n        </Card> */}\n        <div className='icon-attribute'>\n          <h6>!! DEVELOPMENT v{`${version}`} !!</h6>\n          <h6>\n            Software by{' '}\n            <a target='_blank' rel='noreferrer' href='https://github.com/hpcreery'>\n              Hunter Creery\n            </a>{' '}\n          </h6>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}