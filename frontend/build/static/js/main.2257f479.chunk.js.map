{"version":3,"sources":["config/config.js","components/functional/QualitySlider.jsx","components/functional/LayerListItem.jsx","components/functional/UnloadedLayerListItem.jsx","components/functional/BlendMode.jsx","components/functional/UploadGerber.jsx","components/functional/UploadModal.jsx","components/functional/CreateJob.jsx","components/functional/RulerKit.jsx","components/functional/SelectKit.jsx","components/SideBar.jsx","components/functional/OrbitControls.js","components/functional/InfoCoords.jsx","components/Renderer.jsx","App.jsx","index.js"],"names":["require","config","module","exports","backendurl","process","port","QualitySlider","renderScale","rendercontainer","useContext","DrawBoardContext","getComputedStyle","getPropertyValue","useState","quality","setQuality","style","margin","flex","padding","FormatPainterOutlined","min","max","onChange","value","setProperty","handleChange","LayerListItem","props","layer","visible","setVisible","color","setColor","useEffect","svgElement","document","getElementById","name","waitForElement","setTimeout","width","wrap","content","event","rgb","r","g","b","hex","handleColorChange","title","BgColorsOutlined","placement","trigger","whiteSpace","checked","console","log","target","add","remove","fetchLayer","a","data","blend","setBlend","size","handleBlendMode","Dragger","Upload","UploadGerber","job","fileList","setFileList","reloading","setReloading","getExistingFiles","fetch","json","response","items","map","filename","uid","status","handleRemove","file","method","Promise","resolve","reject","err","error","text","uploadprops","action","info","newfileList","url","onRemove","multiple","UploadOutlined","fontSize","textAlign","loading","type","icon","ReloadOutlined","onClick","UploadModal","replaceArtwork","onOk","e","onCancel","destroyOnClose","keyboard","CreateJob","update","setJob","waitInput","setWaitInput","handleOk","message","warning","errjson","JSON","parse","okButtonProps","disabled","placeholder","onPressEnter","Text","Typography","RulerKit","drawing","drawContainer","drawBoardSize","drawBoardScale","handleMouseLocation","mouseCoordinates","pixel","x","y","inch","mm","draw","offsetX","offsetY","reCreateDrawBoard","innerHTML","drawingBoard","SVG","id","svgChildElement","childNodes","top","left","position","transformOrigin","transform","cursor","filter","handleRulerKit","ruler","addEventListener","once","key","removeEventListener","coordinates","startPosition","line","stroke","linecap","click","font","fill","family","lineDrawing","attr","x2","y2","move","toFixed","Math","sqrt","pow","doc_keyDown","altKey","code","SelectKit","svgContainer","objectSelectionKit","oldDrawContainerNodes","removeChild","initColor","querySelector","defs","querySelectorAll","svgElements","units","getAttribute","slice","svgChildElementClone","cloneNode","defList","forEach","node","push","nodeName","attributes","onmouseover","lineWidth","d","pad","find","def","substring","shapeid","shape","infoBar","oldInfo","createElement","toUpperCase","nodeMap","array","string","i","length","deriveNodeAttributes","replaceChild","onmouseleave","appendChild","parentNode","Option","Select","TabPane","Tabs","Search","Input","SideBar","fetchData","urlext","setState","percent","state","layerdata","useoutline","Array","frontload","finisheddata","getLayerList","side","svg","changeDOMSVG","removeDOMSVG","addDOMSVG","getJobList","search","jobList","Jobs","Name","handleJobDelete","handleFrontLoad","handleUseOutline","hideSidebar","sidebarhidden","sidebar","showSidebar","layers","rendered","objectSelection","coordinatesActive","height","className","hidden","this","defaultSize","enable","right","bottom","topRight","bottomRight","bottomLeft","topLeft","maxWidth","minWidth","backgroundColor","backdropFilter","transition","pointerEvents","bodyStyle","indicator","LoadingOutlined","spin","animated","inkBar","tabPane","defaultActiveKey","centered","tab","onSearch","overflowX","overflowY","header","span","dataSource","renderItem","jobname","Item","onConfirm","okText","cancelText","CloseCircleOutlined","item","UnloadedLayerListItem","setSVGinDIV","removeSVGinDIV","forceRender","plain","VideoCameraOutlined","defaultValue","cameraSelector","BlendMode","newState","Component","_changeEvent","_startEvent","_endEvent","OrbitControls","object","domElement","undefined","warn","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","clientWidth","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","preventDefault","focus","window","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","handleMouseWheel","needsUpdate","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","passive","EventDispatcher","InfoCoords","setCoordinates","infobar","setInfoCoordinates","React","createContext","Renderer","CSS3DObjects","addInitSVGFromDom","frontPCBObject","CSS3DObject","z","context","cssScene","backPCBObject","initDrawBoard","test","navigator","userAgent","cssText","zIndex","setAttribute","layerartwork","finishedartwork","removeAllLayers","addLayer","children","divLayer","floor","random","addElementToThree","viewBoxString","unit","viewBox","split","originx","Number","originy","dataset","widthtext","heighttext","removeLayer","removeCSS3DObject","newCSS3DObject","removeAllCSS3DObjects","boardLayers","updateCSSObjects","child","camera","THREE","innerWidth","innerHeight","controls","cssRenderer","cameraType","offsetWidth","offsetHeight","setupScene","CSS3DRenderer","setSize","clock","stats","Stats","onWindowResize","aspect","animationHandler","render","requestAnimationFrame","Provider","clear","ref","textShadow","ResizeObserver","observe","App","windowheight","version","rel","href","ReactDOM"],"mappings":"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","file":"static/js/main.2257f479.chunk.js","sourcesContent":["const dotenv = require('dotenv')\r\ndotenv.config()\r\n\r\nmodule.exports = {\r\n  backendurl: process.env.REACT_APP_GRX_API || 'https://grx.creery.org',\r\n  port: process.env.REACT_APP_GRX_APIPORT || '/api',\r\n}\r\n","import React, { useState, useContext } from 'react'\r\nimport { DrawBoardContext } from '../Renderer'\r\n\r\nimport { Slider, Col, Row } from 'antd'\r\nimport { FormatPainterOutlined } from '@ant-design/icons'\r\n\r\nconst QualitySlider = () => {\r\n  const { rendercontainer } = useContext(DrawBoardContext)\r\n  let renderScale\r\n  if (rendercontainer) {\r\n    renderScale = getComputedStyle(rendercontainer).getPropertyValue('--svg-scale')\r\n  }\r\n  const [quality, setQuality] = useState(renderScale)\r\n\r\n  const handleChange = (value) => {\r\n    rendercontainer.style.setProperty('--svg-scale', value)\r\n    setQuality(value)\r\n  }\r\n\r\n  return (\r\n    <Row style={{ margin: '5px ' }}>\r\n      <Col flex='30px' style={{ padding: '5px' }}>\r\n        <FormatPainterOutlined />\r\n      </Col>\r\n      <Col flex='auto'>\r\n        <Slider min={1} max={10} onChange={(value) => handleChange(value)} value={quality} />\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default QualitySlider\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport { Checkbox, Popover, Badge, Tooltip, Row, Col } from 'antd'\r\nimport { BgColorsOutlined } from '@ant-design/icons'\r\nimport { SliderPicker } from 'react-color'\r\n\r\nconst LayerListItem = (props) => {\r\n  const [visible, setVisible] = useState(props.layer.visible)\r\n  const [color, setColor] = useState('#FFFFFF')\r\n  const handleChange = (value) => {\r\n    console.log(value)\r\n    props.layer.visible = value\r\n    setVisible(value)\r\n  }\r\n\r\n  const handleColorChange = (color, event) => {\r\n    var layerObject = document.getElementById(props.layer.name)\r\n    layerObject.style.color = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, 0.7)`\r\n    setColor(color.hex)\r\n  }\r\n\r\n  useEffect(() => {\r\n    let svgElement = document.getElementById(props.layer.name)\r\n    let waitForElement = () => {\r\n      if (svgElement !== null) {\r\n        setColor(getComputedStyle(svgElement).getPropertyValue('color'))\r\n      } else {\r\n        svgElement = document.getElementById(props.layer.name)\r\n        setTimeout(waitForElement, 250)\r\n      }\r\n    }\r\n    waitForElement()\r\n  }, [props.layer.name])\r\n\r\n  return (\r\n    <div style={{ width: '100%' }}>\r\n      <Row wrap={false}>\r\n        <Col flex=\"10px\">\r\n          <Popover\r\n            content={<SliderPicker color={color} onChange={(color, event) => handleColorChange(color, event)} />}\r\n            title={\r\n              <div>\r\n                <BgColorsOutlined />\r\n            &nbsp; ColorPicker\r\n          </div>\r\n            }\r\n            placement='right'\r\n            trigger='click'\r\n          >\r\n            <Badge color={color} />\r\n          </Popover>\r\n        </Col>\r\n        <Col flex=\"auto\">\r\n          <Checkbox style={{ whiteSpace: 'pre' }} checked={visible} onChange={(value) => handleChange(value.target.checked)}>\r\n            <Tooltip placement='right' title={props.layer.name}>\r\n              {props.layer.name}\r\n            </Tooltip>\r\n          </Checkbox>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LayerListItem\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport { Checkbox, Popover, Badge, Tooltip, Row, Col } from 'antd'\r\nimport { BgColorsOutlined } from '@ant-design/icons'\r\nimport { SliderPicker } from 'react-color'\r\n\r\nconst LayerListItem = (props) => {\r\n  let { layer, add, remove, fetchLayer } = props\r\n  const [visible, setVisible] = useState(props.layer.visible)\r\n  const [color, setColor] = useState('#FFFFFF')\r\n\r\n  const handleChange = async (value) => {\r\n    let svgElement = document.getElementById(layer.name)\r\n    console.log(svgElement)\r\n    console.log(layer)\r\n    if (value === true) {\r\n      var data = await fetchLayer(layer)\r\n      add(...data, svgElement)\r\n    } else if (value === false) {\r\n      remove(layer)\r\n    }\r\n    props.layer.visible = value\r\n    setVisible(value)\r\n  }\r\n\r\n  const handleColorChange = (color, event) => {\r\n    let svgElement = document.getElementById(layer.name)\r\n    svgElement.style.color = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, 0.7)`\r\n    setColor(color.hex)\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log('Effect')\r\n    console.log(layer.name)\r\n    let svgElement = document.getElementById(layer.name)\r\n    let waitForElement = () => {\r\n      if (svgElement !== null) {\r\n        setColor(getComputedStyle(svgElement).getPropertyValue('color'))\r\n      } else {\r\n        svgElement = document.getElementById(layer.name)\r\n        setTimeout(waitForElement, 250)\r\n      }\r\n    }\r\n    waitForElement()\r\n  }, [props.layer.name]) // props.layer.name is erroring isn eslint??\r\n  // React Hook useEffect has a missing dependency: 'layer.name'. Either include it or remove the dependency array.eslintreact-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <div style={{ width: '100%' }}>\r\n      <Row wrap={false}>\r\n        <Col flex=\"10px\">\r\n          <Popover\r\n            content={<SliderPicker color={color} onChange={(color, event) => handleColorChange(color, event)} />}\r\n            title={\r\n              <div>\r\n                <BgColorsOutlined />\r\n                &nbsp; ColorPicker\r\n              </div>\r\n            }\r\n            placement='right'\r\n            trigger='click'\r\n          >\r\n            <Badge color={color} />\r\n          </Popover>\r\n        </Col>\r\n        <Col flex=\"auto\">\r\n          <Checkbox style={{ whiteSpace: 'pre' }} checked={visible} onChange={(value) => handleChange(value.target.checked)}>\r\n            <Tooltip placement='right' title={layer.name}>\r\n              {layer.name}\r\n            </Tooltip>\r\n          </Checkbox>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LayerListItem\r\n","import React, { useState, useContext } from 'react'\r\nimport { DrawBoardContext } from '../Renderer'\r\nimport { Switch, Col, Row } from 'antd'\r\n\r\nconst QualitySlider = () => {\r\n  //root = document.documentElement\r\n  const { rendercontainer } = useContext(DrawBoardContext)\r\n\r\n  const [blend, setBlend] = useState(false)\r\n\r\n  const handleBlendMode = (checked) => {\r\n    //var variable = getComputedStyle(variableParent).getPropertyValue('--blend-mode')\r\n    if (checked) {\r\n      rendercontainer.style.setProperty('--blend-mode', 'color')\r\n    } else {\r\n      rendercontainer.style.setProperty('--blend-mode', 'normal')\r\n    }\r\n    setBlend(checked)\r\n  }\r\n\r\n  return (\r\n    <Row style={{ margin: '5px ' }}>\r\n      <Col flex='auto' style={{ padding: '5px' }}>\r\n        Color Blend\r\n      </Col>\r\n      <Col flex='30px' style={{ padding: '5px' }}>\r\n        <Switch size='small' checked={blend} onChange={(checked) => handleBlendMode(checked)} />\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default QualitySlider\r\n","// REACT\r\nimport React, { useState, useEffect } from 'react'\r\n\r\n// ANT DESIGN\r\nimport { Upload, Button } from 'antd'\r\nimport { UploadOutlined, ReloadOutlined } from '@ant-design/icons'\r\nconst { Dragger } = Upload\r\n\r\n// CONFIG\r\nconst { backendurl, port } = require('../../config/config')\r\n\r\nconst UploadGerber = (props) => {\r\n  console.log(props.job)\r\n  var { job } = props\r\n  const [fileList, setFileList] = useState([])\r\n  const [reloading, setReloading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // Mount and Update\r\n    getExistingFiles()\r\n    return () => {\r\n      // Unmount\r\n    }\r\n  }, [])\r\n  // ^^ React Hook useEffect has a missing dependency: 'getExistingFiles'. \r\n  // Either include it or remove the dependency array.eslintreact - hooks / exhaustive - deps\r\n\r\n  const getExistingFiles = async () => {\r\n    setReloading(true)\r\n    var data = await fetch(`${backendurl}${port}/uploaded?job=${job}`)\r\n    var response = await data.json()\r\n    var items = response.map((filename) => ({\r\n      uid: filename,\r\n      name: filename,\r\n      status: 'done',\r\n    }))\r\n    setFileList(items)\r\n    setReloading(false)\r\n    return items\r\n  }\r\n\r\n  // fileList object example\r\n  // {\r\n  //   uid: '-1',\r\n  //   name: 'xxx.png',\r\n  //   status: 'done',\r\n  // },\r\n\r\n  const handleChange = (info) => {\r\n    console.log(info)\r\n    let newfileList = [...info.fileList]\r\n\r\n    // 1. Limit the number of uploaded files\r\n    // Only to show two recent uploaded files, and old ones will be replaced by the new\r\n    // fileList = fileList.slice(-2);\r\n\r\n    // 2. Read from response and show file link\r\n    newfileList = newfileList.map((file) => {\r\n      if (file.response) {\r\n        // Component will show file.url as link\r\n        console.log(file.url)\r\n        file.url = file.response.url\r\n      }\r\n      return file\r\n    })\r\n    setFileList(newfileList)\r\n  }\r\n\r\n  const handleRemove = async (file) => {\r\n    console.log(file)\r\n    try {\r\n      var response = await fetch(`${backendurl}${port}/file?job=${job}&filename=${file.name}`, {\r\n        method: 'DELETE',\r\n      })\r\n    } catch (err) {\r\n      throw err\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        if (response.status !== 200) {\r\n          console.error(response)\r\n          var err = response.text()\r\n          throw err\r\n        }\r\n        //let data = response.json();\r\n        resolve(response)\r\n      } catch (err) {\r\n        reject(err)\r\n      }\r\n    })\r\n  }\r\n\r\n  const uploadprops = {\r\n    action: `${backendurl}${port}/upload?job=${job}`,\r\n    onChange: handleChange,\r\n    onRemove: handleRemove,\r\n    multiple: true,\r\n  }\r\n  return (\r\n    <div>\r\n      <Dragger {...uploadprops} fileList={fileList}>\r\n        <p>\r\n          <UploadOutlined style={{ fontSize: '32px' }} />\r\n        </p>\r\n        <p>Drag Gerber Files Here</p>\r\n        <p>(or click to open directory)</p>\r\n      </Dragger>\r\n      <div style={{ textAlign: 'right' }}>\r\n        <Button\r\n          loading={reloading}\r\n          type='text'\r\n          icon={<ReloadOutlined style={{ fontSize: '15px' }} />}\r\n          onClick={() => getExistingFiles()}\r\n        >\r\n          Reload\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UploadGerber\r\n","// REACT\r\nimport React, { useState, useEffect } from 'react'\r\n\r\n// ANT DESIGN\r\nimport { Modal, Button } from 'antd'\r\n\r\n// CUSTOM\r\nimport UploadGerber from './UploadGerber'\r\n\r\n// CONFIG\r\n// const { backendurl, port } = require('../../config/config')\r\n\r\nconst UploadModal = (props) => {\r\n  var { replaceArtwork, job } = props\r\n\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // Mount and Update\r\n    return () => {\r\n      // Unmount\r\n    }\r\n  }, [job])\r\n\r\n  const showModal = () => {\r\n    setVisible(true)\r\n  }\r\n\r\n  const handleOk = (e) => {\r\n    console.log(e)\r\n    setVisible(false)\r\n    replaceArtwork(job)\r\n  }\r\n\r\n  const handleCancel = (e) => {\r\n    console.log(e)\r\n    setVisible(false)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Button type='text' size='small' onClick={showModal}>\r\n        Upload\r\n      </Button>\r\n      <Modal\r\n        title={`Import Gerbers into Job: ${job}`}\r\n        visible={visible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n        destroyOnClose\r\n        keyboard\r\n      >\r\n        <UploadGerber job={job} />\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UploadModal\r\n","// REACT\r\nimport React, { useState } from 'react'\r\n\r\n// ANT DESIGN\r\nimport { Modal, Button, Input, message } from 'antd'\r\n\r\n// CONFIG\r\nconst { backendurl, port } = require('../../config/config')\r\n\r\nconst CreateJob = (props) => {\r\n  const { replaceArtwork, update } = props\r\n  const [visible, setVisible] = useState(false)\r\n  const [job, setJob] = useState(null)\r\n  const [waitInput, setWaitInput] = useState(true)\r\n\r\n  const showModal = () => {\r\n    setVisible(true)\r\n  }\r\n\r\n  const handleOk = async (e) => {\r\n    if (job == null || job === '') {\r\n      message.warning('Must Assign your job a name')\r\n      return\r\n    }\r\n    try {\r\n      var response = await fetch(`${backendurl}${port}/job?job=${job}`, {\r\n        method: 'POST',\r\n      })\r\n      if (response.status !== 200) {\r\n        var err = await response.text()\r\n        console.log(err)\r\n        try {\r\n          let errjson = JSON.parse(err)\r\n          err = errjson['Message']\r\n        } catch (e) { }\r\n        throw err\r\n      }\r\n    } catch (err) {\r\n      console.error(err)\r\n      message.error(err)\r\n      return\r\n    }\r\n    setVisible(false)\r\n    update()\r\n    replaceArtwork(job)\r\n  }\r\n\r\n  const handleCancel = (e) => {\r\n    setVisible(false)\r\n  }\r\n\r\n  const handleInput = (e) => {\r\n    setJob(e.target.value)\r\n    setWaitInput(false)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Button type='text' size='small' onClick={showModal}>\r\n        Create\r\n      </Button>\r\n      <Modal\r\n        title={`Create New Job`}\r\n        visible={visible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n        okButtonProps={{ disabled: waitInput }}\r\n        keyboard\r\n      >\r\n        <Input placeholder='enter job name' onChange={handleInput} onPressEnter={() => handleOk()} />\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CreateJob\r\n","import React, { useEffect, useContext } from 'react'\r\n\r\n// Ant Design\r\nimport { Button, Typography } from 'antd'\r\n\r\n// Context\r\nimport { DrawBoardContext } from '../Renderer'\r\n\r\n// SVGJS\r\nimport SVG from 'svg.js'\r\n\r\nconst { Text } = Typography\r\n\r\nconst RulerKit = (props) => {\r\n  const { drawContainer, drawBoardSize, drawBoardScale } = useContext(DrawBoardContext)\r\n  let drawing\r\n\r\n  const handleMouseLocation = (event, action) => {\r\n    let mouseCoordinates = { pixel: { x: 0, y: 0 }, inch: { x: 0, y: 0 }, mm: { x: 0, y: 0 }, draw: { x: 0, y: 0 } }\r\n    mouseCoordinates.pixel.x = (event.offsetX - drawBoardSize / 2) * drawBoardScale\r\n    mouseCoordinates.pixel.y = -((event.offsetY - drawBoardSize / 2) * drawBoardScale)\r\n    mouseCoordinates.inch.x = mouseCoordinates.pixel.x / 96\r\n    mouseCoordinates.inch.y = mouseCoordinates.pixel.y / 96\r\n    mouseCoordinates.mm.x = mouseCoordinates.inch.x * 24\r\n    mouseCoordinates.mm.y = mouseCoordinates.inch.y * 24\r\n    mouseCoordinates.draw.x = event.offsetX\r\n    mouseCoordinates.draw.y = event.offsetY\r\n    action(mouseCoordinates)\r\n  }\r\n\r\n  const reCreateDrawBoard = () => {\r\n    drawContainer.innerHTML = ''\r\n    let drawingBoard = SVG(drawContainer.id).size(drawBoardSize, drawBoardSize)\r\n    let svgChildElement = drawContainer.childNodes[0]\r\n    svgChildElement.style.top = `-${drawBoardSize / 2}px`\r\n    svgChildElement.style.left = `-${drawBoardSize / 2}px`\r\n    svgChildElement.style.position = `relative`\r\n    svgChildElement.style.transformOrigin = `center`\r\n    svgChildElement.style.transform = `scale(${drawBoardScale})`\r\n    svgChildElement.style.cursor = 'crosshair'\r\n    svgChildElement.style.filter = 'drop-shadow(2px 4px 6px black)'\r\n    return drawingBoard\r\n  }\r\n\r\n  const handleRulerKit = () => {\r\n    drawing = reCreateDrawBoard()\r\n    var action = (e) => handleMouseLocation(e, ruler)\r\n    drawContainer.addEventListener('click', action, { once: true })\r\n    let escape = (e) => {\r\n      if (e.key === 'Escape') {\r\n        console.log(e)\r\n        drawContainer.removeEventListener('click', action)\r\n        reCreateDrawBoard()\r\n      }\r\n    }\r\n    document.addEventListener('keydown', escape, { once: true })\r\n  }\r\n\r\n  const ruler = (coordinates) => {\r\n    let startPosition = coordinates\r\n    let line = drawing\r\n      .line(coordinates.draw.x, coordinates.draw.y, coordinates.draw.x, coordinates.draw.y)\r\n      .stroke({ color: 'white', width: 3, linecap: 'round' })\r\n    var text = drawing.text(`DX:0 DY:0 D:0`).click((e) => console.log(e))\r\n    text.font({ fill: 'white', family: 'Inconsolata', size: 50 })\r\n    let lineDrawing = (e) => {\r\n      handleMouseLocation(e, (coordinates) => {\r\n        line.attr({ x2: coordinates.draw.x, y2: coordinates.draw.y })\r\n        text\r\n          .move(coordinates.draw.x, coordinates.draw.y)\r\n          .text(\r\n            `DX:${(coordinates.inch.x - startPosition.inch.x).toFixed(5)}\" DY:${(\r\n              coordinates.inch.y - startPosition.inch.y\r\n            ).toFixed(5)}\" D:${Math.sqrt(\r\n              Math.pow(coordinates.inch.x - startPosition.inch.x, 2) +\r\n              Math.pow(coordinates.inch.y - startPosition.inch.y, 2)\r\n            ).toFixed(5)}\"`\r\n          )\r\n      })\r\n    }\r\n    drawContainer.addEventListener('mousemove', lineDrawing)\r\n    drawContainer.addEventListener('click', (e) => {\r\n      drawContainer.removeEventListener('mousemove', lineDrawing)\r\n    })\r\n  }\r\n\r\n  let doc_keyDown = (e) => {\r\n    console.log(e)\r\n    if (e.altKey && e.code === 'KeyR') {\r\n      handleRulerKit()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', doc_keyDown, false)\r\n    return function cleanup() {\r\n      document.removeEventListener('keydown', doc_keyDown, false)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <Button type='text' style={{ width: '100%' }} onClick={() => handleRulerKit()}>\r\n        Ruler&#160;<Text type='secondary'>(alt+r)</Text>\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RulerKit\r\n","import React, { useEffect, useContext } from 'react'\r\n\r\n// Ant Design\r\nimport { Button, Typography } from 'antd'\r\n\r\n// Context\r\nimport { DrawBoardContext } from '../Renderer'\r\n\r\nconst { Text } = Typography\r\n\r\nconst SelectKit = (props) => {\r\n  const { drawContainer, svgContainer } = useContext(DrawBoardContext)\r\n\r\n  const deriveNodeAttributes = (nodeMap, units) => {\r\n    let array = [...nodeMap]\r\n    let string = ''\r\n    for (var i = 0; i < array.length; i++) {\r\n      if (array[i].nodeName !== 'id') {\r\n        string += ` ${array[i].nodeName.toUpperCase()}: ${(array[i].value / 1000).toFixed(5)}${units}`\r\n      }\r\n    }\r\n    return string\r\n  }\r\n\r\n  const objectSelectionKit = () => {\r\n    let oldDrawContainerNodes = drawContainer.childNodes[0]\r\n    drawContainer.removeChild(oldDrawContainerNodes)\r\n    //let svgContainer = document.getElementById('svg-container')\r\n    //let divLayer = a // divLayer.id = layer.name\r\n    //var svgChildElement = divLayer.childNodes[0]\r\n    var svgChildElement = svgContainer.querySelector('div > svg') // Literally gets first SVG... Need way to select or tell what layer ...\r\n    let defs = svgChildElement.querySelectorAll('defs > *')\r\n    let svgElements = svgChildElement.querySelectorAll('g > *')\r\n    var widthattr = svgChildElement.getAttribute('width')\r\n    var units = widthattr.slice(-2)\r\n\r\n    // let old_element = svgChildElement\r\n    let svgChildElementClone = svgChildElement.cloneNode(true)\r\n\r\n    // Get Defs or Features in SVG\r\n    let defList = []\r\n    defs.forEach((node) => {\r\n      defList.push({ id: node.id, type: node.nodeName, attributes: node.attributes })\r\n    })\r\n    console.log(defList)\r\n\r\n    let initColor\r\n    svgElements.forEach((node) => {\r\n      initColor = node.style.color\r\n      let g\r\n      node.onmouseover = (e) => {\r\n        //console.log(e)\r\n        e.target.style.color = '#08979c'\r\n\r\n        if (e.target.nodeName === 'path') {\r\n          g = {\r\n            type: e.target.nodeName,\r\n            g: 'path',\r\n            lineWidth: e.target.attributes['stroke-width'] ? e.target.attributes['stroke-width'].value : 0,\r\n            code: e.target.attributes.d.value,\r\n            attr: e.target.attributes,\r\n          }\r\n        } else if (e.target.nodeName === 'use') {\r\n          let pad = defList.find((def) => def.id === e.target.attributes['xlink:href'].value.substring(1))\r\n          //console.log(pad)\r\n          g = {\r\n            type: e.target.nodeName,\r\n            g: 'pad',\r\n            x: e.target.attributes.x.value,\r\n            y: e.target.attributes.y.value,\r\n            shapeid: e.target.attributes['xlink:href'].value,\r\n            shape: pad,\r\n            attr: e.target.attributes,\r\n          }\r\n        }\r\n        let infoBar = document.getElementById('bottom-info-bar')\r\n        let oldInfo = infoBar.childNodes[0]\r\n        let info = document.createElement('h4')\r\n        //console.log(e.target.nodeName)\r\n        //let attributes = deriveNodeAttributes(g.shape.attributes)\r\n        info.innerHTML = g\r\n          ? g.g === 'path'\r\n            ? g.lineWidth === '0'\r\n              ? `SURFACE`\r\n              : `LINE | Width: ${g.lineWidth / 1000}${units}`\r\n            : `PAD | Shape: ${g.shape.type === 'g'\r\n              ? `SPECIAL | X: ${(g.x / 1000).toFixed(5)}${units} Y: ${(g.y / 1000).toFixed(5)}${units}`\r\n              : `${g.shape.type.toUpperCase()}  | X: ${(g.x / 1000).toFixed(5)}${units} Y: ${(g.y / 1000).toFixed(\r\n                5\r\n              )}${units} | ${deriveNodeAttributes(g.shape.attributes, units)}`\r\n            }`\r\n          : 'NA'\r\n        if (g) infoBar.replaceChild(info, oldInfo)\r\n      }\r\n\r\n      node.onmouseleave = (e) => {\r\n        e.target.style.color = initColor\r\n      }\r\n    })\r\n\r\n    let escape = (e) => {\r\n      if (e.key === 'Escape') {\r\n        drawContainer.appendChild(oldDrawContainerNodes)\r\n        svgChildElement.parentNode.replaceChild(svgChildElementClone, svgChildElement)\r\n      }\r\n    }\r\n    document.addEventListener('keydown', escape, { once: true })\r\n    // svgContainer.onclick = (e) => {\r\n    //   if (drawContainer.innerHTML != '') {\r\n    //     return\r\n    //   }\r\n    //   e.target.style.color = '#08979c'\r\n    //   var old_element = svgChildElement\r\n    //   var new_element = old_element.cloneNode(true)\r\n    //   old_element.parentNode.replaceChild(new_element, old_element)\r\n    // }\r\n  }\r\n\r\n  let doc_keyDown = (e) => {\r\n    if (e.altKey && e.code === 'KeyS') {\r\n      objectSelectionKit()\r\n    }\r\n  }\r\n\r\n  // const setUpKeyboardEvents = () => { }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', doc_keyDown, false)\r\n    return function cleanup() {\r\n      document.removeEventListener('keydown', doc_keyDown, false)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <Button type='text' style={{ width: '100%' }} onClick={() => objectSelectionKit()}>\r\n        Select&#160;<Text type='secondary'>(alt+s)</Text>\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SelectKit\r\n","// REACT\r\nimport React, { Component } from 'react'\r\n\r\n// ANT DESIGN UI\r\nimport {\r\n  Spin,\r\n  Switch,\r\n  Button,\r\n  Card,\r\n  Select,\r\n  Tabs,\r\n  Row,\r\n  Col,\r\n  List,\r\n  Input,\r\n  message,\r\n  Popconfirm,\r\n  Divider,\r\n} from 'antd'\r\nimport { LoadingOutlined, VideoCameraOutlined, CloseCircleOutlined } from '@ant-design/icons'\r\n\r\n// NPM PACKAGES\r\nimport { Resizable } from \"re-resizable\";\r\n\r\n// CUSTOM\r\n//import FetchArtwork from './functional/FetchArtwork'\r\nimport QualitySlider from './functional/QualitySlider'\r\nimport LayerListItem from './functional/LayerListItem'\r\nimport UnloadedLayerListItem from './functional/UnloadedLayerListItem'\r\nimport BlendMode from './functional/BlendMode'\r\nimport UploadModal from './functional/UploadModal'\r\nimport CreateJob from './functional/CreateJob'\r\nimport RulerKit from './functional/RulerKit'\r\nimport SelectKit from './functional/SelectKit'\r\n\r\n// ANT DESIGN CONSTANTS\r\nconst { Option } = Select\r\nconst { TabPane } = Tabs\r\nconst { Search } = Input\r\n\r\n// CONFIG\r\nconst { backendurl, port } = require('../config/config')\r\n\r\nclass SideBar extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      job: null,\r\n      layers: [],\r\n      rendered: null,\r\n      loading: false,\r\n      percent: 0,\r\n      jobList: [],\r\n      sidebarhidden: false,\r\n      sidebar: 'sidebar',\r\n      frontload: false,\r\n      useoutline: true,\r\n      objectSelection: null,\r\n      coordinatesActive: false,\r\n    }\r\n  }\r\n\r\n  fetchData = async (urlext, method) => {\r\n    this.setState({ loading: true, percent: 0 })\r\n    try {\r\n      let response = await fetch(backendurl + port + urlext, { method: method || 'GET' })\r\n      if (response.status !== 200) {\r\n        console.error(response)\r\n        //var err = 'Status: ' + response.status + ' => Message: ' + (await response.text()) // ADVANCED\r\n        var err = await response.text()\r\n        throw err\r\n      }\r\n      let data = await response.json()\r\n      this.setState({ loading: false, percent: 100 })\r\n      return data\r\n    } catch (err) {\r\n      this.setState({ loading: false })\r\n      message.error('Error => ' + err)\r\n      throw err\r\n    }\r\n  }\r\n\r\n  fetchLayer = async (layer) => {\r\n    var layerdata\r\n    if (layer.name !== 'front' && layer.name !== 'back') {\r\n      layerdata = await this.fetchData(`/gbr2svg/getLayerArtwork?job=${this.state.job}&layer=${layer.name}`)\r\n    } else {\r\n      layerdata = await this.fetchData(\r\n        `/gbr2svg/getFinishedArtwork?job=${this.state.job}&outline=${this.state.useoutline}`\r\n      )\r\n      layerdata = Array(layerdata.find((data) => data.name === layer.name))\r\n    }\r\n    return layerdata\r\n  }\r\n\r\n  replaceArtwork = async (job) => {\r\n    //this.props.clear()\r\n    console.log('Getting Finished Artowrk for', job)\r\n    var layerdata\r\n    if (this.state.frontload === true) {\r\n      layerdata = await this.fetchData(`/gbr2svg/getLayerArtwork?job=${job}`)\r\n      var finisheddata = await this.fetchData(`/gbr2svg/getFinishedArtwork?job=${job}&outline=${this.state.useoutline}`)\r\n      this.props.setJob(job, layerdata, finisheddata)\r\n    } else if (this.state.frontload === false) {\r\n      layerdata = await this.getLayerList(job)\r\n      finisheddata = [\r\n        {\r\n          name: 'front',\r\n          type: 'finished',\r\n          side: 'top',\r\n          svg: '',\r\n        },\r\n        {\r\n          name: 'back',\r\n          type: 'finished',\r\n          side: 'bottom',\r\n          svg: '',\r\n        },\r\n      ]\r\n      this.props.setJob(job, layerdata, finisheddata)\r\n    }\r\n    return\r\n  }\r\n\r\n  changeDOMSVG = (side, data) => {\r\n    this.removeDOMSVG(side)\r\n    var object = document.getElementById(side)\r\n    object.innerHTML = data\r\n    return\r\n  }\r\n\r\n  addDOMSVG = (side, data) => {\r\n    var object = document.getElementById(side)\r\n    object.innerHTML = data\r\n  }\r\n\r\n  removeDOMSVG = (side) => {\r\n    var object = document.getElementById(side)\r\n    object.innerHTML = ''\r\n  }\r\n\r\n  getJobList = async (search) => {\r\n    let data = await this.fetchData(`/joblist?search=${search}`)\r\n    var jobList = data.Jobs.map((job) => job.Name)\r\n    this.setState({ jobList: jobList })\r\n    return jobList\r\n  }\r\n\r\n  getLayerList = async (job) => {\r\n    let data = await this.fetchData(`/gbr2svg/getLayerList?job=${job}`)\r\n    return data\r\n  }\r\n\r\n  handleJobDelete = async (job) => {\r\n    console.log(job)\r\n    let data = await this.fetchData(`/job?job=${job}`, 'DELETE')\r\n    this.getJobList('')\r\n    console.log(data)\r\n    return data\r\n  }\r\n\r\n  handleFrontLoad = (value) => {\r\n    if (value === true) {\r\n      this.replaceArtwork(this.state.job)\r\n    }\r\n    this.setState({ frontload: value })\r\n  }\r\n\r\n  handleUseOutline = (value) => {\r\n    this.setState({ useoutline: value })\r\n  }\r\n\r\n  hideSidebar = () => {\r\n    this.setState({ sidebarhidden: true, sidebar: 'sidebar-hidden' })\r\n  }\r\n\r\n  showSidebar = () => {\r\n    this.setState({ sidebarhidden: false, sidebar: 'sidebar' })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ padding: '10px', width: '200px', height: '100%' }}>\r\n        <Button\r\n          type='text'\r\n          className='togglesidebar'\r\n          hidden={this.state.sidebarhidden}\r\n          onClick={() => this.hideSidebar()}\r\n        >\r\n          HIDE\r\n        </Button>\r\n        <Button\r\n          type='text'\r\n          className='togglesidebar'\r\n          hidden={!this.state.sidebarhidden}\r\n          onClick={() => this.showSidebar()}\r\n        >\r\n          SHOW\r\n        </Button>\r\n        <Resizable\r\n          style={{ padding: 0 }}\r\n          defaultSize={{ height: '100%', width: '200px', }}\r\n          enable={{ top: false, right: true, bottom: false, left: false, topRight: false, bottomRight: false, bottomLeft: false, topLeft: false }}\r\n          maxWidth='400px'\r\n          minWidth='200px'\r\n        >\r\n\r\n          <Card\r\n            style={{\r\n              backgroundColor: 'rgba(30, 30, 30, 0.85)',\r\n              backdropFilter: 'blur(25px)',\r\n              height: '100%',\r\n              width: '-webkit-fill-available',\r\n              transition: '0.5s ease',\r\n              pointerEvents: 'all'\r\n            }}\r\n            bodyStyle={{\r\n              height: 'calc(100% - 100px)',\r\n              padding: '0px'\r\n            }}\r\n            title={\r\n              this.state.loading ? <Spin indicator={<LoadingOutlined spin />} /> : this.state.job || 'GRX Gerber Renderer'\r\n            }\r\n            className={this.state.sidebar}\r\n          >\r\n            <Tabs animated={{ inkBar: true, tabPane: true }} size='small' defaultActiveKey='1' onChange={(key) => console.log(key)} centered>\r\n              <TabPane tab='Jobs' key='1' >\r\n                <Search placeholder='input search' onSearch={(value) => this.getJobList(value)} style={{ width: '-webkit-fill-available' }} />\r\n                <div style={{ height: '100%', position: 'relative', overflowX: 'hidden', overflowY: 'scroll' }}>\r\n                  <List\r\n                    size='small'\r\n                    header={\r\n                      <Row style={{ margin: '0px' }}>\r\n                        <Col span={15} style={{ padding: '0px 10px' }}>\r\n                          <div>Job List</div>\r\n                        </Col>\r\n                        <Col span={9} style={{ padding: '0px', textAlign: 'right' }}>\r\n                          <CreateJob\r\n                            replaceArtwork={(job) => this.replaceArtwork(job)}\r\n                            update={() => this.getJobList('')}\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    }\r\n                    //bordered\r\n                    dataSource={this.state.jobList}\r\n                    renderItem={(jobname) => (\r\n                      <List.Item style={{ padding: '5px 5px' }}>\r\n                        <Button\r\n                          type='link'\r\n                          style={{ width: '90%', height: '27px' }}\r\n                          onClick={() => this.replaceArtwork(jobname)}\r\n                        >\r\n                          {jobname}\r\n                        </Button>\r\n                        <Popconfirm\r\n                          title='Are you sure delete this job?'\r\n                          onConfirm={() => this.handleJobDelete(jobname)}\r\n                          okText='Yes'\r\n                          cancelText='No'\r\n                        >\r\n                          <CloseCircleOutlined />\r\n                        </Popconfirm>\r\n                      </List.Item>\r\n                    )}\r\n                  />\r\n                </div>\r\n              </TabPane>\r\n              <TabPane tab='Layers' key='2' style={{ overflowX: 'hidden', overflowY: 'scroll', height: '100%' }}>\r\n                <List\r\n                  size='small'\r\n                  header={\r\n                    <Row style={{ margin: '0px' }}>\r\n                      <Col span={15} style={{ padding: '0px 10px' }}>\r\n                        <div>Layers</div>\r\n                      </Col>\r\n                      <Col span={9} style={{ padding: '0px', textAlign: 'right' }}>\r\n                        <UploadModal replaceArtwork={(job) => this.replaceArtwork(job)} job={this.state.job} />\r\n                      </Col>\r\n                    </Row>\r\n                  }\r\n                  //bordered\r\n                  dataSource={this.state.layers}\r\n                  renderItem={(item) => (\r\n                    <List.Item style={{ padding: '8px 8px' }}>\r\n                      {this.state.frontload ? (\r\n                        <LayerListItem key={item} layer={item} />\r\n                      ) : (\r\n                        <UnloadedLayerListItem\r\n                          key={item}\r\n                          layer={item}\r\n                          add={(...props) => this.props.setSVGinDIV(...props)}\r\n                          remove={(...props) => this.props.removeSVGinDIV(...props)}\r\n                          fetchLayer={(...props) => this.fetchLayer(...props)}\r\n                        />\r\n                      )}\r\n                    </List.Item>\r\n                  )}\r\n                />\r\n                {/* <List\r\n                size='small'\r\n                header={<div>Steps</div>}\r\n                //bordered\r\n                dataSource={this.state.layerList}\r\n                renderItem={(item) => <List.Item>{item}</List.Item>}\r\n              /> */}\r\n              </TabPane>\r\n              <TabPane tab='Tools' key='3' forceRender style={{ overflowX: 'hidden', overflowY: 'scroll', height: '100%' }}>\r\n                <Divider plain>Kit</Divider>\r\n                <SelectKit />\r\n                <RulerKit />\r\n                <Divider plain>Settings</Divider>\r\n                <Row style={{ margin: '5px ' }}>\r\n                  <Col flex='30px' style={{ padding: '5px' }}>\r\n                    <VideoCameraOutlined />\r\n                  </Col>\r\n                  <Col flex='auto'>\r\n                    <Select\r\n                      defaultValue='orthographic'\r\n                      onChange={(value) => this.props.cameraSelector(value)}\r\n                      style={{ width: '100%' }}\r\n                    >\r\n                      <Option value='perspective'>Perspective</Option>\r\n                      <Option value='orthographic'>Orthographic</Option>\r\n                    </Select>\r\n                  </Col>\r\n                </Row>\r\n                <QualitySlider />\r\n                <BlendMode />\r\n                <Row style={{ margin: '5px ' }}>\r\n                  <Col flex='auto' style={{ padding: '5px' }}>\r\n                    Front Load\r\n                  </Col>\r\n                  <Col flex='30px' style={{ padding: '5px' }}>\r\n                    <Switch\r\n                      size='small'\r\n                      checked={this.state.frontload}\r\n                      onChange={(checked) => this.handleFrontLoad(checked)}\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n                <Row style={{ margin: '5px ' }}>\r\n                  <Col flex='auto' style={{ padding: '5px' }}>\r\n                    Use Outline\r\n                  </Col>\r\n                  <Col flex='30px' style={{ padding: '5px' }}>\r\n                    <Switch\r\n                      size='small'\r\n                      checked={this.state.useoutline}\r\n                      onChange={(checked) => this.handleUseOutline(checked)}\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </TabPane>\r\n            </Tabs>\r\n          </Card>\r\n        </Resizable>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getJobList('')\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    console.log('updated')\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    var newState = {}\r\n    console.log(state, props)\r\n    if (props.job !== state.job || props.layers !== state.layers) {\r\n      newState.job = props.job\r\n      newState.layers = props.layers\r\n      return newState\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n}\r\n\r\nexport default SideBar\r\n\r\n// DEPRECIATED METHODS\r\n","import {\r\n  EventDispatcher,\r\n  MOUSE,\r\n  Quaternion,\r\n  Spherical,\r\n  TOUCH,\r\n  Vector2,\r\n  Vector3\r\n} from 'three';\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\nconst _changeEvent = { type: 'change' };\r\nconst _startEvent = { type: 'start' };\r\nconst _endEvent = { type: 'end' };\r\n\r\nclass OrbitControls extends EventDispatcher {\r\n\r\n  constructor(object, domElement) {\r\n\r\n    super();\r\n\r\n    if (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\r\n    if (domElement === document) console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\r\n\r\n    this.object = object;\r\n    this.domElement = domElement;\r\n\r\n    // Set to false to disable this control\r\n    this.enabled = true;\r\n\r\n    // \"target\" sets the location of focus, where the object orbits around\r\n    this.target = new Vector3();\r\n\r\n    // How far you can dolly in and out ( PerspectiveCamera only )\r\n    this.minDistance = 0;\r\n    this.maxDistance = Infinity;\r\n\r\n    // How far you can zoom in and out ( OrthographicCamera only )\r\n    this.minZoom = 0;\r\n    this.maxZoom = Infinity;\r\n\r\n    // How far you can orbit vertically, upper and lower limits.\r\n    // Range is 0 to Math.PI radians.\r\n    this.minPolarAngle = 0; // radians\r\n    this.maxPolarAngle = Math.PI; // radians\r\n\r\n    // How far you can orbit horizontally, upper and lower limits.\r\n    // If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\r\n    this.minAzimuthAngle = - Infinity; // radians\r\n    this.maxAzimuthAngle = Infinity; // radians\r\n\r\n    // Set to true to enable damping (inertia)\r\n    // If damping is enabled, you must call controls.update() in your animation loop\r\n    this.enableDamping = false;\r\n    this.dampingFactor = 0.05;\r\n\r\n    // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n    // Set to false to disable zooming\r\n    this.enableZoom = true;\r\n    this.zoomSpeed = 1.0;\r\n\r\n    // Set to false to disable rotating\r\n    this.enableRotate = true;\r\n    this.rotateSpeed = 1.0;\r\n\r\n    // Set to false to disable panning\r\n    this.enablePan = true;\r\n    this.panSpeed = 1.0;\r\n    this.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\r\n    this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n    // Set to true to automatically rotate around the target\r\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n    this.autoRotate = false;\r\n    this.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\r\n\r\n    // The four arrow keys\r\n    this.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\r\n\r\n    // Mouse buttons\r\n    this.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\r\n\r\n    // Touch fingers\r\n    this.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\r\n\r\n    // for reset\r\n    this.target0 = this.target.clone();\r\n    this.position0 = this.object.position.clone();\r\n    this.zoom0 = this.object.zoom;\r\n\r\n    // the target DOM element for key events\r\n    this._domElementKeyEvents = null;\r\n\r\n    //\r\n    // public methods\r\n    //\r\n\r\n    this.getPolarAngle = function () {\r\n\r\n      return spherical.phi;\r\n\r\n    };\r\n\r\n    this.getAzimuthalAngle = function () {\r\n\r\n      return spherical.theta;\r\n\r\n    };\r\n\r\n    this.listenToKeyEvents = function (domElement) {\r\n\r\n      domElement.addEventListener('keydown', onKeyDown);\r\n      this._domElementKeyEvents = domElement;\r\n\r\n    };\r\n\r\n    this.saveState = function () {\r\n\r\n      scope.target0.copy(scope.target);\r\n      scope.position0.copy(scope.object.position);\r\n      scope.zoom0 = scope.object.zoom;\r\n\r\n    };\r\n\r\n    this.reset = function () {\r\n\r\n      scope.target.copy(scope.target0);\r\n      scope.object.position.copy(scope.position0);\r\n      scope.object.zoom = scope.zoom0;\r\n\r\n      scope.object.updateProjectionMatrix();\r\n      scope.dispatchEvent(_changeEvent);\r\n\r\n      scope.update();\r\n\r\n      state = STATE.NONE;\r\n\r\n    };\r\n\r\n    // this method is exposed, but perhaps it would be better if we can make it private...\r\n    this.update = function () {\r\n\r\n      const offset = new Vector3();\r\n\r\n      // so camera.up is the orbit axis\r\n      const quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\r\n      const quatInverse = quat.clone().invert();\r\n\r\n      const lastPosition = new Vector3();\r\n      const lastQuaternion = new Quaternion();\r\n\r\n      const twoPI = 2 * Math.PI;\r\n\r\n      return function update() {\r\n\r\n        const position = scope.object.position;\r\n\r\n        offset.copy(position).sub(scope.target);\r\n\r\n        // rotate offset to \"y-axis-is-up\" space\r\n        offset.applyQuaternion(quat);\r\n\r\n        // angle from z-axis around y-axis\r\n        spherical.setFromVector3(offset);\r\n\r\n        if (scope.autoRotate && state === STATE.NONE) {\r\n\r\n          rotateLeft(getAutoRotationAngle());\r\n\r\n        }\r\n\r\n        if (scope.enableDamping) {\r\n\r\n          spherical.theta += sphericalDelta.theta * scope.dampingFactor;\r\n          spherical.phi += sphericalDelta.phi * scope.dampingFactor;\r\n\r\n        } else {\r\n\r\n          spherical.theta += sphericalDelta.theta;\r\n          spherical.phi += sphericalDelta.phi;\r\n\r\n        }\r\n\r\n        // restrict theta to be between desired limits\r\n\r\n        let min = scope.minAzimuthAngle;\r\n        let max = scope.maxAzimuthAngle;\r\n\r\n        if (isFinite(min) && isFinite(max)) {\r\n\r\n          if (min < - Math.PI) min += twoPI; else if (min > Math.PI) min -= twoPI;\r\n\r\n          if (max < - Math.PI) max += twoPI; else if (max > Math.PI) max -= twoPI;\r\n\r\n          if (min <= max) {\r\n\r\n            spherical.theta = Math.max(min, Math.min(max, spherical.theta));\r\n\r\n          } else {\r\n\r\n            spherical.theta = (spherical.theta > (min + max) / 2) ?\r\n              Math.max(min, spherical.theta) :\r\n              Math.min(max, spherical.theta);\r\n\r\n          }\r\n\r\n        }\r\n\r\n        // restrict phi to be between desired limits\r\n        spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\r\n\r\n        spherical.makeSafe();\r\n\r\n\r\n        spherical.radius *= scale;\r\n\r\n        // restrict radius to be between desired limits\r\n        spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\r\n\r\n        // move target to panned location\r\n\r\n        if (scope.enableDamping === true) {\r\n\r\n          scope.target.addScaledVector(panOffset, scope.dampingFactor);\r\n\r\n        } else {\r\n\r\n          scope.target.add(panOffset);\r\n\r\n        }\r\n\r\n        offset.setFromSpherical(spherical);\r\n\r\n        // rotate offset back to \"camera-up-vector-is-up\" space\r\n        offset.applyQuaternion(quatInverse);\r\n\r\n        position.copy(scope.target).add(offset);\r\n\r\n        scope.object.lookAt(scope.target);\r\n\r\n        if (scope.enableDamping === true) {\r\n\r\n          sphericalDelta.theta *= (1 - scope.dampingFactor);\r\n          sphericalDelta.phi *= (1 - scope.dampingFactor);\r\n\r\n          panOffset.multiplyScalar(1 - scope.dampingFactor);\r\n\r\n        } else {\r\n\r\n          sphericalDelta.set(0, 0, 0);\r\n\r\n          panOffset.set(0, 0, 0);\r\n\r\n        }\r\n\r\n        scale = 1;\r\n\r\n        // update condition is:\r\n        // min(camera displacement, camera rotation in radians)^2 > EPS\r\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n        if (zoomChanged ||\r\n          lastPosition.distanceToSquared(scope.object.position) > EPS ||\r\n          8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\r\n\r\n          scope.dispatchEvent(_changeEvent);\r\n\r\n          lastPosition.copy(scope.object.position);\r\n          lastQuaternion.copy(scope.object.quaternion);\r\n          zoomChanged = false;\r\n\r\n          return true;\r\n\r\n        }\r\n\r\n        return false;\r\n\r\n      };\r\n\r\n    }();\r\n\r\n    this.dispose = function () {\r\n\r\n      scope.domElement.removeEventListener('contextmenu', onContextMenu);\r\n\r\n      scope.domElement.removeEventListener('pointerdown', onPointerDown);\r\n      scope.domElement.removeEventListener('wheel', onMouseWheel);\r\n\r\n      scope.domElement.removeEventListener('touchstart', onTouchStart);\r\n      scope.domElement.removeEventListener('touchend', onTouchEnd);\r\n      scope.domElement.removeEventListener('touchmove', onTouchMove);\r\n\r\n      scope.domElement.ownerDocument.removeEventListener('pointermove', onPointerMove);\r\n      scope.domElement.ownerDocument.removeEventListener('pointerup', onPointerUp);\r\n\r\n\r\n      if (scope._domElementKeyEvents !== null) {\r\n\r\n        scope._domElementKeyEvents.removeEventListener('keydown', onKeyDown);\r\n\r\n      }\r\n\r\n      //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n    };\r\n\r\n    //\r\n    // internals\r\n    //\r\n\r\n    const scope = this;\r\n\r\n    const STATE = {\r\n      NONE: - 1,\r\n      ROTATE: 0,\r\n      DOLLY: 1,\r\n      PAN: 2,\r\n      TOUCH_ROTATE: 3,\r\n      TOUCH_PAN: 4,\r\n      TOUCH_DOLLY_PAN: 5,\r\n      TOUCH_DOLLY_ROTATE: 6\r\n    };\r\n\r\n    let state = STATE.NONE;\r\n\r\n    const EPS = 0.000001;\r\n\r\n    // current position in spherical coordinates\r\n    const spherical = new Spherical();\r\n    const sphericalDelta = new Spherical();\r\n\r\n    let scale = 1;\r\n    const panOffset = new Vector3();\r\n    let zoomChanged = false;\r\n\r\n    const rotateStart = new Vector2();\r\n    const rotateEnd = new Vector2();\r\n    const rotateDelta = new Vector2();\r\n\r\n    const panStart = new Vector2();\r\n    const panEnd = new Vector2();\r\n    const panDelta = new Vector2();\r\n\r\n    const dollyStart = new Vector2();\r\n    const dollyEnd = new Vector2();\r\n    const dollyDelta = new Vector2();\r\n\r\n    function getAutoRotationAngle() {\r\n\r\n      return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n    }\r\n\r\n    function getZoomScale() {\r\n\r\n      return Math.pow(0.95, scope.zoomSpeed);\r\n\r\n    }\r\n\r\n    function rotateLeft(angle) {\r\n\r\n      sphericalDelta.theta -= angle;\r\n\r\n    }\r\n\r\n    function rotateUp(angle) {\r\n\r\n      sphericalDelta.phi -= angle;\r\n\r\n    }\r\n\r\n    const panLeft = function () {\r\n\r\n      const v = new Vector3();\r\n\r\n      return function panLeft(distance, objectMatrix) {\r\n\r\n        v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\r\n        v.multiplyScalar(- distance);\r\n\r\n        panOffset.add(v);\r\n\r\n      };\r\n\r\n    }();\r\n\r\n    const panUp = function () {\r\n\r\n      const v = new Vector3();\r\n\r\n      return function panUp(distance, objectMatrix) {\r\n\r\n        if (scope.screenSpacePanning === true) {\r\n\r\n          v.setFromMatrixColumn(objectMatrix, 1);\r\n\r\n        } else {\r\n\r\n          v.setFromMatrixColumn(objectMatrix, 0);\r\n          v.crossVectors(scope.object.up, v);\r\n\r\n        }\r\n\r\n        v.multiplyScalar(distance);\r\n\r\n        panOffset.add(v);\r\n\r\n      };\r\n\r\n    }();\r\n\r\n    // deltaX and deltaY are in pixels; right and down are positive\r\n    const pan = function () {\r\n\r\n      const offset = new Vector3();\r\n\r\n      return function pan(deltaX, deltaY) {\r\n\r\n        const element = scope.domElement;\r\n\r\n        if (scope.object.isPerspectiveCamera) {\r\n\r\n          // perspective\r\n          const position = scope.object.position;\r\n          offset.copy(position).sub(scope.target);\r\n          let targetDistance = offset.length();\r\n\r\n          // half of the fov is center to top of screen\r\n          targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\r\n\r\n          // we use only clientHeight here so aspect ratio does not distort speed\r\n          panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\r\n          panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\r\n\r\n        } else if (scope.object.isOrthographicCamera) {\r\n\r\n          // orthographic\r\n          panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\r\n          panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\r\n\r\n        } else {\r\n\r\n          // camera neither orthographic nor perspective\r\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\r\n          scope.enablePan = false;\r\n\r\n        }\r\n\r\n      };\r\n\r\n    }();\r\n\r\n    function dollyOut(dollyScale) {\r\n\r\n      if (scope.object.isPerspectiveCamera) {\r\n\r\n        scale /= dollyScale;\r\n\r\n      } else if (scope.object.isOrthographicCamera) {\r\n\r\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\r\n        scope.object.updateProjectionMatrix();\r\n        zoomChanged = true;\r\n\r\n      } else {\r\n\r\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n        scope.enableZoom = false;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function dollyIn(dollyScale) {\r\n\r\n      if (scope.object.isPerspectiveCamera) {\r\n\r\n        scale *= dollyScale;\r\n\r\n      } else if (scope.object.isOrthographicCamera) {\r\n\r\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\r\n        scope.object.updateProjectionMatrix();\r\n        zoomChanged = true;\r\n\r\n      } else {\r\n\r\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n        scope.enableZoom = false;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    //\r\n    // event callbacks - update the object state\r\n    //\r\n\r\n    function handleMouseDownRotate(event) {\r\n\r\n      rotateStart.set(event.clientX, event.clientY);\r\n\r\n    }\r\n\r\n    function handleMouseDownDolly(event) {\r\n\r\n      dollyStart.set(event.clientX, event.clientY);\r\n\r\n    }\r\n\r\n    function handleMouseDownPan(event) {\r\n\r\n      panStart.set(event.clientX, event.clientY);\r\n\r\n    }\r\n\r\n    function handleMouseMoveRotate(event) {\r\n\r\n      rotateEnd.set(event.clientX, event.clientY);\r\n\r\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\r\n\r\n      const element = scope.domElement;\r\n\r\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\r\n\r\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\r\n\r\n      rotateStart.copy(rotateEnd);\r\n\r\n      scope.update();\r\n\r\n    }\r\n\r\n    function handleMouseMoveDolly(event) {\r\n\r\n      dollyEnd.set(event.clientX, event.clientY);\r\n\r\n      dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n      if (dollyDelta.y > 0) {\r\n\r\n        dollyOut(getZoomScale());\r\n\r\n      } else if (dollyDelta.y < 0) {\r\n\r\n        dollyIn(getZoomScale());\r\n\r\n      }\r\n\r\n      dollyStart.copy(dollyEnd);\r\n\r\n      scope.update();\r\n\r\n    }\r\n\r\n    function handleMouseMovePan(event) {\r\n\r\n      // console.log('pannin', event.clientX, event.clientY)\r\n\r\n      panEnd.set(event.clientX, event.clientY);\r\n\r\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\r\n\r\n      pan(panDelta.x, panDelta.y);\r\n\r\n      panStart.copy(panEnd);\r\n\r\n      scope.update();\r\n\r\n    }\r\n\r\n    function handleMouseUp( /*event*/) {\r\n\r\n      // no-op\r\n\r\n    }\r\n\r\n    function handleMouseWheel(event) {\r\n\r\n      // console.log('zoomin', event)\r\n\r\n      // zoom to mouse position\r\n\r\n      const element = scope.domElement;\r\n      panStart.set(event.clientX, event.clientY);\r\n      panEnd.set(element.clientWidth / 2, element.clientHeight / 2);\r\n\r\n      // dolly\r\n\r\n      if (event.deltaY < 0) {\r\n\r\n        panDelta.subVectors(panEnd, panStart).multiplyScalar(0.05); // scope.panSpeed\r\n        pan(panDelta.x, panDelta.y);\r\n\r\n        dollyIn(getZoomScale());\r\n\r\n      } else if (event.deltaY > 0) {\r\n\r\n        // swap start/end pan vectors\r\n        panDelta.subVectors(panStart, panEnd).multiplyScalar(0.05); // scope.panSpeed\r\n        pan(panDelta.x, panDelta.y);\r\n\r\n        dollyOut(getZoomScale());\r\n\r\n      }\r\n\r\n      scope.update();\r\n\r\n    }\r\n\r\n    function handleKeyDown(event) {\r\n\r\n      let needsUpdate = false;\r\n\r\n      switch (event.code) {\r\n\r\n        case scope.keys.UP:\r\n          pan(0, scope.keyPanSpeed);\r\n          needsUpdate = true;\r\n          break;\r\n\r\n        case scope.keys.BOTTOM:\r\n          pan(0, - scope.keyPanSpeed);\r\n          needsUpdate = true;\r\n          break;\r\n\r\n        case scope.keys.LEFT:\r\n          pan(scope.keyPanSpeed, 0);\r\n          needsUpdate = true;\r\n          break;\r\n\r\n        case scope.keys.RIGHT:\r\n          pan(- scope.keyPanSpeed, 0);\r\n          needsUpdate = true;\r\n          break;\r\n\r\n      }\r\n\r\n      if (needsUpdate) {\r\n\r\n        // prevent the browser from scrolling on cursor keys\r\n        event.preventDefault();\r\n\r\n        scope.update();\r\n\r\n      }\r\n\r\n\r\n    }\r\n\r\n    function handleTouchStartRotate(event) {\r\n\r\n      if (event.touches.length == 1) {\r\n\r\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n      } else {\r\n\r\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\r\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\r\n\r\n        rotateStart.set(x, y);\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function handleTouchStartPan(event) {\r\n\r\n      if (event.touches.length == 1) {\r\n\r\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n      } else {\r\n\r\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\r\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\r\n\r\n        panStart.set(x, y);\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function handleTouchStartDolly(event) {\r\n\r\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n\r\n      const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n      dollyStart.set(0, distance);\r\n\r\n    }\r\n\r\n    function handleTouchStartDollyPan(event) {\r\n\r\n      if (scope.enableZoom) handleTouchStartDolly(event);\r\n\r\n      if (scope.enablePan) handleTouchStartPan(event);\r\n\r\n    }\r\n\r\n    function handleTouchStartDollyRotate(event) {\r\n\r\n      if (scope.enableZoom) handleTouchStartDolly(event);\r\n\r\n      if (scope.enableRotate) handleTouchStartRotate(event);\r\n\r\n    }\r\n\r\n    function handleTouchMoveRotate(event) {\r\n\r\n      if (event.touches.length == 1) {\r\n\r\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n      } else {\r\n\r\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\r\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\r\n\r\n        rotateEnd.set(x, y);\r\n\r\n      }\r\n\r\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\r\n\r\n      const element = scope.domElement;\r\n\r\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\r\n\r\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\r\n\r\n      rotateStart.copy(rotateEnd);\r\n\r\n    }\r\n\r\n    function handleTouchMovePan(event) {\r\n\r\n      if (event.touches.length == 1) {\r\n\r\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n      } else {\r\n\r\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\r\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\r\n\r\n        panEnd.set(x, y);\r\n\r\n      }\r\n\r\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\r\n\r\n      pan(panDelta.x, panDelta.y);\r\n\r\n      panStart.copy(panEnd);\r\n\r\n    }\r\n\r\n    function handleTouchMoveDolly(event) {\r\n\r\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n\r\n      const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n      dollyEnd.set(0, distance);\r\n\r\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\r\n\r\n      dollyOut(dollyDelta.y);\r\n\r\n      dollyStart.copy(dollyEnd);\r\n\r\n    }\r\n\r\n    function handleTouchMoveDollyPan(event) {\r\n\r\n      if (scope.enableZoom) handleTouchMoveDolly(event);\r\n\r\n      if (scope.enablePan) handleTouchMovePan(event);\r\n\r\n    }\r\n\r\n    function handleTouchMoveDollyRotate(event) {\r\n\r\n      if (scope.enableZoom) handleTouchMoveDolly(event);\r\n\r\n      if (scope.enableRotate) handleTouchMoveRotate(event);\r\n\r\n    }\r\n\r\n    function handleTouchEnd( /*event*/) {\r\n\r\n      // no-op\r\n\r\n    }\r\n\r\n    //\r\n    // event handlers - FSM: listen for events and reset state\r\n    //\r\n\r\n    function onPointerDown(event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      switch (event.pointerType) {\r\n\r\n        case 'mouse':\r\n        case 'pen':\r\n          onMouseDown(event);\r\n          break;\r\n\r\n        // TODO touch\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function onPointerMove(event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      switch (event.pointerType) {\r\n\r\n        case 'mouse':\r\n        case 'pen':\r\n          onMouseMove(event);\r\n          break;\r\n\r\n        // TODO touch\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function onPointerUp(event) {\r\n\r\n      switch (event.pointerType) {\r\n\r\n        case 'mouse':\r\n        case 'pen':\r\n          onMouseUp(event);\r\n          break;\r\n\r\n        // TODO touch\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function onMouseDown(event) {\r\n\r\n      // Prevent the browser from scrolling.\r\n      event.preventDefault();\r\n\r\n      // Manually set the focus since calling preventDefault above\r\n      // prevents the browser from setting it automatically.\r\n\r\n      scope.domElement.focus ? scope.domElement.focus() : window.focus();\r\n\r\n      let mouseAction;\r\n\r\n      switch (event.button) {\r\n\r\n        case 0:\r\n\r\n          mouseAction = scope.mouseButtons.LEFT;\r\n          break;\r\n\r\n        case 1:\r\n\r\n          mouseAction = scope.mouseButtons.MIDDLE;\r\n          break;\r\n\r\n        case 2:\r\n\r\n          mouseAction = scope.mouseButtons.RIGHT;\r\n          break;\r\n\r\n        default:\r\n\r\n          mouseAction = - 1;\r\n\r\n      }\r\n\r\n      switch (mouseAction) {\r\n\r\n        case MOUSE.DOLLY:\r\n\r\n          if (scope.enableZoom === false) return;\r\n\r\n          handleMouseDownDolly(event);\r\n\r\n          state = STATE.DOLLY;\r\n\r\n          break;\r\n\r\n        case MOUSE.ROTATE:\r\n\r\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\r\n\r\n            if (scope.enablePan === false) return;\r\n\r\n            handleMouseDownPan(event);\r\n\r\n            state = STATE.PAN;\r\n\r\n          } else {\r\n\r\n            if (scope.enableRotate === false) return;\r\n\r\n            handleMouseDownRotate(event);\r\n\r\n            state = STATE.ROTATE;\r\n\r\n          }\r\n\r\n          break;\r\n\r\n        case MOUSE.PAN:\r\n\r\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\r\n\r\n            if (scope.enableRotate === false) return;\r\n\r\n            handleMouseDownRotate(event);\r\n\r\n            state = STATE.ROTATE;\r\n\r\n          } else {\r\n\r\n            if (scope.enablePan === false) return;\r\n\r\n            handleMouseDownPan(event);\r\n\r\n            state = STATE.PAN;\r\n\r\n          }\r\n\r\n          break;\r\n\r\n        default:\r\n\r\n          state = STATE.NONE;\r\n\r\n      }\r\n\r\n      if (state !== STATE.NONE) {\r\n\r\n        scope.domElement.ownerDocument.addEventListener('pointermove', onPointerMove);\r\n        scope.domElement.ownerDocument.addEventListener('pointerup', onPointerUp);\r\n\r\n        scope.dispatchEvent(_startEvent);\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function onMouseMove(event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault();\r\n\r\n      switch (state) {\r\n\r\n        case STATE.ROTATE:\r\n\r\n          if (scope.enableRotate === false) return;\r\n\r\n          handleMouseMoveRotate(event);\r\n\r\n          break;\r\n\r\n        case STATE.DOLLY:\r\n\r\n          if (scope.enableZoom === false) return;\r\n\r\n          handleMouseMoveDolly(event);\r\n\r\n          break;\r\n\r\n        case STATE.PAN:\r\n\r\n          if (scope.enablePan === false) return;\r\n\r\n          handleMouseMovePan(event);\r\n\r\n          break;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function onMouseUp(event) {\r\n\r\n      scope.domElement.ownerDocument.removeEventListener('pointermove', onPointerMove);\r\n      scope.domElement.ownerDocument.removeEventListener('pointerup', onPointerUp);\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      handleMouseUp(event);\r\n\r\n      scope.dispatchEvent(_endEvent);\r\n\r\n      state = STATE.NONE;\r\n\r\n    }\r\n\r\n    function onMouseWheel(event) {\r\n\r\n      if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\r\n\r\n      event.preventDefault();\r\n\r\n      scope.dispatchEvent(_startEvent);\r\n\r\n      handleMouseWheel(event);\r\n\r\n      scope.dispatchEvent(_endEvent);\r\n\r\n    }\r\n\r\n    function onKeyDown(event) {\r\n\r\n      if (scope.enabled === false || scope.enablePan === false) return;\r\n\r\n      handleKeyDown(event);\r\n\r\n    }\r\n\r\n    function onTouchStart(event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault(); // prevent scrolling\r\n\r\n      switch (event.touches.length) {\r\n\r\n        case 1:\r\n\r\n          switch (scope.touches.ONE) {\r\n\r\n            case TOUCH.ROTATE:\r\n\r\n              if (scope.enableRotate === false) return;\r\n\r\n              handleTouchStartRotate(event);\r\n\r\n              state = STATE.TOUCH_ROTATE;\r\n\r\n              break;\r\n\r\n            case TOUCH.PAN:\r\n\r\n              if (scope.enablePan === false) return;\r\n\r\n              handleTouchStartPan(event);\r\n\r\n              state = STATE.TOUCH_PAN;\r\n\r\n              break;\r\n\r\n            default:\r\n\r\n              state = STATE.NONE;\r\n\r\n          }\r\n\r\n          break;\r\n\r\n        case 2:\r\n\r\n          switch (scope.touches.TWO) {\r\n\r\n            case TOUCH.DOLLY_PAN:\r\n\r\n              if (scope.enableZoom === false && scope.enablePan === false) return;\r\n\r\n              handleTouchStartDollyPan(event);\r\n\r\n              state = STATE.TOUCH_DOLLY_PAN;\r\n\r\n              break;\r\n\r\n            case TOUCH.DOLLY_ROTATE:\r\n\r\n              if (scope.enableZoom === false && scope.enableRotate === false) return;\r\n\r\n              handleTouchStartDollyRotate(event);\r\n\r\n              state = STATE.TOUCH_DOLLY_ROTATE;\r\n\r\n              break;\r\n\r\n            default:\r\n\r\n              state = STATE.NONE;\r\n\r\n          }\r\n\r\n          break;\r\n\r\n        default:\r\n\r\n          state = STATE.NONE;\r\n\r\n      }\r\n\r\n      if (state !== STATE.NONE) {\r\n\r\n        scope.dispatchEvent(_startEvent);\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function onTouchMove(event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault(); // prevent scrolling\r\n\r\n      switch (state) {\r\n\r\n        case STATE.TOUCH_ROTATE:\r\n\r\n          if (scope.enableRotate === false) return;\r\n\r\n          handleTouchMoveRotate(event);\r\n\r\n          scope.update();\r\n\r\n          break;\r\n\r\n        case STATE.TOUCH_PAN:\r\n\r\n          if (scope.enablePan === false) return;\r\n\r\n          handleTouchMovePan(event);\r\n\r\n          scope.update();\r\n\r\n          break;\r\n\r\n        case STATE.TOUCH_DOLLY_PAN:\r\n\r\n          if (scope.enableZoom === false && scope.enablePan === false) return;\r\n\r\n          handleTouchMoveDollyPan(event);\r\n\r\n          scope.update();\r\n\r\n          break;\r\n\r\n        case STATE.TOUCH_DOLLY_ROTATE:\r\n\r\n          if (scope.enableZoom === false && scope.enableRotate === false) return;\r\n\r\n          handleTouchMoveDollyRotate(event);\r\n\r\n          scope.update();\r\n\r\n          break;\r\n\r\n        default:\r\n\r\n          state = STATE.NONE;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    function onTouchEnd(event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      handleTouchEnd(event);\r\n\r\n      scope.dispatchEvent(_endEvent);\r\n\r\n      state = STATE.NONE;\r\n\r\n    }\r\n\r\n    function onContextMenu(event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault();\r\n\r\n    }\r\n\r\n    //\r\n\r\n    scope.domElement.addEventListener('contextmenu', onContextMenu);\r\n\r\n    scope.domElement.addEventListener('pointerdown', onPointerDown);\r\n    scope.domElement.addEventListener('wheel', onMouseWheel, { passive: false });\r\n\r\n    scope.domElement.addEventListener('touchstart', onTouchStart, { passive: false });\r\n    scope.domElement.addEventListener('touchend', onTouchEnd);\r\n    scope.domElement.addEventListener('touchmove', onTouchMove, { passive: false });\r\n\r\n    // force an update at start\r\n\r\n    this.update();\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n// This is very similar to OrbitControls, another set of touch behavior\r\n//\r\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - left mouse, or arrow keys / touch: one-finger move\r\n\r\nclass MapControls extends OrbitControls {\r\n\r\n  constructor(object, domElement) {\r\n\r\n    super(object, domElement);\r\n\r\n    this.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\r\n\r\n    this.mouseButtons.LEFT = MOUSE.PAN;\r\n    this.mouseButtons.RIGHT = MOUSE.ROTATE;\r\n\r\n    this.touches.ONE = TOUCH.PAN;\r\n    this.touches.TWO = TOUCH.DOLLY_ROTATE;\r\n\r\n  }\r\n\r\n}\r\n\r\nexport { OrbitControls, MapControls };\r\n","import React, { useState, useEffect, useContext } from 'react'\r\n\r\nimport { DrawBoardContext } from '../Renderer'\r\n\r\nconst InfoCoords = (props) => {\r\n  const [coordinates, setCoordinates] = useState({\r\n    pixel: { x: 0, y: 0 },\r\n    inch: { x: 0, y: 0 },\r\n    mm: { x: 0, y: 0 },\r\n    draw: { x: 0, y: 0 },\r\n  })\r\n  const { drawContainer, drawBoardSize, drawBoardScale, infobar } = useContext(DrawBoardContext)\r\n\r\n  const setInfoCoordinates = (event) => {\r\n    // let infoBar = document.getElementById('bottom-info-bar')\r\n    let oldInfo = infobar.childNodes[0]\r\n    let mouseCoordinates = {\r\n      pixel: { x: 0, y: 0 },\r\n      inch: { x: 0, y: 0 },\r\n      mm: { x: 0, y: 0 },\r\n      draw: { x: 0, y: 0 },\r\n    }\r\n    mouseCoordinates.pixel.x = (event.offsetX - drawBoardSize / 2) * drawBoardScale\r\n    mouseCoordinates.pixel.y = -(event.offsetY - drawBoardSize / 2) * drawBoardScale\r\n    mouseCoordinates.inch.x = mouseCoordinates.pixel.x / 96\r\n    mouseCoordinates.inch.y = mouseCoordinates.pixel.y / 96\r\n    mouseCoordinates.mm.x = mouseCoordinates.inch.x * 24\r\n    mouseCoordinates.mm.y = mouseCoordinates.inch.y * 24\r\n    mouseCoordinates.draw.x = event.offsetX\r\n    mouseCoordinates.draw.y = -event.offsetY\r\n    let info = document.createElement('h4')\r\n    info.innerHTML = `( ${coordinates.inch.x.toFixed(5)}in, ${coordinates.inch.y.toFixed(5)}in )`\r\n    infobar.replaceChild(info, oldInfo)\r\n    setCoordinates(mouseCoordinates)\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Mount and Update\r\n    drawContainer?.addEventListener('mousemove', setInfoCoordinates)\r\n    return () => {\r\n      // Unmount\r\n      drawContainer?.removeEventListener('mousemove', setInfoCoordinates)\r\n    }\r\n  })\r\n\r\n  return <div></div>\r\n}\r\n\r\nexport default InfoCoords\r\n","// REACT\r\nimport React, { Component } from 'react'\r\nimport SideBar from './SideBar'\r\n\r\n// THREE\r\nimport * as THREE from 'three'\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { OrbitControls } from \"./functional/OrbitControls\";\r\nimport { CSS3DRenderer, CSS3DObject } from 'three/examples/jsm/renderers/CSS3DRenderer.js'\r\nimport Stats from 'three/examples/jsm/libs/stats.module.js'\r\n\r\n// FUNCTIONAL\r\nimport InfoCoords from './functional/InfoCoords'\r\n\r\n// // TRACESPACE\r\n// const pcbStackup = require('pcb-stackup')\r\n\r\n// SVGJS\r\nimport SVG from 'svg.js'\r\n\r\n// STYLE\r\nimport '../App-simple.css'\r\n\r\nconst DrawBoardContext = React.createContext()\r\n\r\nclass Renderer extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      rendered: null,\r\n      job: null,\r\n      CSS3DObjects: [],\r\n      cameraType: 'orthographic',\r\n      mouseCoordinates: { pixel: { x: 0, y: 0 }, inch: { x: 0, y: 0 }, mm: { x: 0, y: 0 }, draw: { x: 0, y: 0 } },\r\n    }\r\n    this.drawBoardSize = 100000\r\n    this.drawBoardScale = 0.1\r\n    this.svgContainer = null\r\n    this.drawContainer = null\r\n  }\r\n\r\n  CSS3DObjects = []\r\n\r\n  // Three.js\r\n  addInitSVGFromDom = () => {\r\n    // FRONT\r\n    var element\r\n    element = document.getElementById('front')\r\n    this.frontPCBObject = new CSS3DObject(element)\r\n    this.frontPCBObject.name = 'front'\r\n    this.frontPCBObject.position.x = 0\r\n    this.frontPCBObject.position.y = 25\r\n    this.frontPCBObject.position.z = 1\r\n    this.frontPCBObject.context = element.getAttribute('data-context')\r\n    this.cssScene.add(this.frontPCBObject)\r\n\r\n    // BACK\r\n    element = document.getElementById('back')\r\n    this.backPCBObject = new CSS3DObject(element)\r\n    this.backPCBObject.name = 'back'\r\n    this.backPCBObject.position.x = 0\r\n    this.backPCBObject.position.y = 25\r\n    this.backPCBObject.position.z = 0.5\r\n    this.backPCBObject.context = element.getAttribute('data-context')\r\n    this.cssScene.add(this.backPCBObject)\r\n\r\n    this.setState({ CSS3DObjects: [this.frontPCBObject, this.backPCBObject] })\r\n  }\r\n\r\n  initDrawBoard = () => {\r\n    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {\r\n      return\r\n    }\r\n    this.drawContainer = document.createElement('div')\r\n    this.drawContainer.id = 'draw-board'\r\n    this.drawContainer.style.cssText = 'position: absolute; width: 0px; height: 0px;'\r\n    this.drawContainer.style.zIndex = '1000'\r\n    this.drawContainer.setAttribute('data-context', 'drawing')\r\n    // this.drawContainer.style.zIndex = 1000\r\n    this.drawContainer.style.transform =\r\n      'matrix3d(1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1) scale(var(--svg-scale))'\r\n    this.svgContainer.appendChild(this.drawContainer)\r\n    // console.log(document.getElementById('draw-board'))\r\n    this.drawing = SVG(this.drawContainer.id).size(this.drawBoardSize, this.drawBoardSize)\r\n    let svgChildElement = this.drawContainer.childNodes[0]\r\n    svgChildElement.style.top = `-${this.drawBoardSize / 2}px`\r\n    svgChildElement.style.left = `-${this.drawBoardSize / 2}px`\r\n    svgChildElement.style.position = `relative`\r\n    svgChildElement.style.transformOrigin = `center`\r\n    svgChildElement.style.transform = `scale(${this.drawBoardScale})`\r\n    svgChildElement.style.cursor = 'crosshair'\r\n  }\r\n\r\n  // Higher Level Abstraction Functions\r\n  setJob = (job, layerartwork, finishedartwork) => {\r\n    this.removeAllLayers()\r\n    layerartwork.forEach((layer) => {\r\n      this.addLayer(layer, false)\r\n    })\r\n    finishedartwork.forEach((layer) => {\r\n      this.addLayer(layer, false)\r\n    })\r\n    this.setState({ CSS3DObjects: this.cssScene.children, job: job })\r\n  }\r\n\r\n  // High Level Absraction Functions\r\n  addLayer = (layer, visible) => {\r\n    var divLayer = document.createElement('div')\r\n    divLayer.id = layer.name\r\n    //divLayer.style.visibility = visible\r\n    divLayer.setAttribute('data-type', layer.type)\r\n    divLayer.setAttribute('data-side', layer.side)\r\n    divLayer.setAttribute('data-context', 'board')\r\n    divLayer.style.width = '0px'\r\n    divLayer.style.height = '0px'\r\n    divLayer.style.position = 'relative'\r\n    divLayer.style.color = `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(\r\n      Math.random() * 256\r\n    )}, 0.7)`\r\n    if (layer.svg) {\r\n      divLayer = this.setSVGinDIV(layer, divLayer)\r\n    }\r\n    this.addElementToThree(divLayer, visible)\r\n  }\r\n\r\n  setSVGinDIV = (layer, divLayer) => {\r\n    divLayer.innerHTML = layer.svg\r\n    var svgChildElement = divLayer.childNodes[0]\r\n    var viewBoxString = svgChildElement.getAttribute('viewBox')\r\n    var widthattr = svgChildElement.getAttribute('width')\r\n    var unit = widthattr.slice(-2)\r\n    var viewBox = viewBoxString.split(' ')\r\n    var originx = Number(viewBox[0]) / 1000\r\n    var originy = Number(viewBox[1]) / 1000\r\n    var width = Number(viewBox[2]) / 1000\r\n    var height = Number(viewBox[3]) / 1000\r\n    //console.log(originx, originy, width, height)\r\n    divLayer.dataset.width = width\r\n    divLayer.dataset.height = height\r\n    svgChildElement.style.position = 'relative'\r\n    svgChildElement.style.transformOrigin = '0 0'\r\n    if (divLayer.id === 'back') {\r\n      svgChildElement.style.bottom = `calc(${height + originy}${unit} * var(--svg-scale))`\r\n      svgChildElement.style.left = `calc(${originx + width}${unit} * var(--svg-scale))`\r\n    } else if (divLayer.id === 'front') {\r\n      var widthtext = document.createElement('h4')\r\n      widthtext.className = 'width-measurement'\r\n      widthtext.innerHTML = `WIDTH: ${width}${unit}`\r\n      widthtext.style.bottom = `calc(${originy}${unit} * var(--svg-scale))`\r\n      widthtext.style.left = `calc(${originx + width}${unit} * var(--svg-scale))`\r\n      divLayer.appendChild(widthtext)\r\n      var heighttext = document.createElement('h4')\r\n      heighttext.className = 'height-measurement'\r\n      heighttext.innerHTML = `HEIGHT: ${height}${unit}`\r\n      heighttext.style.bottom = `calc(${height + originy}${unit} * var(--svg-scale))`\r\n      heighttext.style.left = `calc(${originx}${unit} * var(--svg-scale))`\r\n      divLayer.appendChild(heighttext)\r\n      svgChildElement.style.bottom = `calc(${height + originy}${unit} * var(--svg-scale))`\r\n      svgChildElement.style.left = `calc(${originx}${unit} * var(--svg-scale))`\r\n    } else {\r\n      svgChildElement.style.bottom = `calc(${height + originy}${unit} * var(--svg-scale))`\r\n      svgChildElement.style.left = `calc(${originx}${unit} * var(--svg-scale))`\r\n    }\r\n    return divLayer\r\n  }\r\n\r\n  removeSVGinDIV = (layer) => {\r\n    var divLayer = document.getElementById(layer.name)\r\n    divLayer.innerHTML = ''\r\n  }\r\n\r\n  removeLayer = (layer) => {\r\n    this.removeCSS3DObject(layer.name)\r\n  }\r\n\r\n  // Low Level Abstraction Functions\r\n  addElementToThree = (divLayer, visible) => {\r\n    var newCSS3DObject = new CSS3DObject(divLayer)\r\n    newCSS3DObject.name = divLayer.id\r\n    newCSS3DObject.visible = visible\r\n    newCSS3DObject.context = divLayer.getAttribute('data-context')\r\n    newCSS3DObject.position.x = 0\r\n    newCSS3DObject.position.y = 0\r\n    //newCSS3DObject.translate(0, 0, 0)\r\n    if (newCSS3DObject.name === 'back') {\r\n      newCSS3DObject.position.z = -0.5\r\n    } else if (newCSS3DObject.name === 'front') {\r\n      newCSS3DObject.position.z = 0.5\r\n    }\r\n    this.cssScene.add(newCSS3DObject)\r\n  }\r\n\r\n  removeCSS3DObject = (name) => {\r\n    this.cssScene.remove(this.state.CSS3DObjects.find((x) => x.name === name))\r\n    this.setState({ CSS3DObjects: this.cssScene.children })\r\n  }\r\n\r\n  removeAllCSS3DObjects = () => {\r\n    for (var i = this.state.CSS3DObjects.length - 1; i >= 0; i--) {\r\n      this.cssScene.remove(this.state.CSS3DObjects[i])\r\n    }\r\n    this.setState({ CSS3DObjects: this.cssScene.children })\r\n  }\r\n\r\n  removeAllLayers = () => {\r\n    let boardLayers = this.state.CSS3DObjects.filter((layer) => layer.context === 'board')\r\n    for (var i = boardLayers.length - 1; i >= 0; i--) {\r\n      this.cssScene.remove(boardLayers[i])\r\n    }\r\n    this.setState({ CSS3DObjects: this.cssScene.children })\r\n  }\r\n\r\n  updateCSSObjects = () => {\r\n    var children = this.cssScene.children\r\n    children.forEach((child) => {\r\n      this.cssScene.remove(child)\r\n    })\r\n    this.state.CSS3DObjects.forEach((object) => {\r\n      this.cssScene.add(object)\r\n    })\r\n  }\r\n\r\n  // Camera type switcher\r\n  cameraSelector = (type) => {\r\n    if (type === 'perspective') {\r\n      this.camera = new THREE.PerspectiveCamera(75, this.rendercontainer.innerWidth / this.rendercontainer.innerHeight, 0.01, 1000)\r\n      this.camera.position.z = 700\r\n      this.controls = new OrbitControls(this.camera, this.cssRenderer.domElement)\r\n      this.controls.enableRotate = true\r\n      this.controls.zoomSpeed = 1\r\n      //this.controls.enableZoom = true\r\n      this.setState({ cameraType: type })\r\n    } else if (type === 'orthographic') {\r\n      this.camera = new THREE.OrthographicCamera(\r\n        this.rendercontainer.offsetWidth / -2,\r\n        this.rendercontainer.offsetWidth / 2,\r\n        this.rendercontainer.offsetHeight / 2,\r\n        this.rendercontainer.offsetHeight / -2,\r\n        1,\r\n        1000\r\n      )\r\n      this.camera.position.z = 900\r\n      this.controls = new OrbitControls(this.camera, this.cssRenderer.domElement)\r\n      this.controls.enableRotate = false\r\n      this.controls.zoomSpeed = 1\r\n      //this.controls.enableZoom = false\r\n      this.setState({ cameraType: type })\r\n    } else {\r\n      console.log('unkown camera type:', type)\r\n    }\r\n  }\r\n\r\n  setupScene = () => {\r\n\r\n    // Experimental\r\n    let width = this.rendercontainer.clientWidth\r\n    let height = this.rendercontainer.clientHeight\r\n\r\n    // Create Scene\r\n    this.cssScene = new THREE.Scene()\r\n    this.rendercontainer.style.setProperty('--svg-scale', '1')\r\n\r\n    // Create Renderer\r\n    this.cssRenderer = new CSS3DRenderer()\r\n    this.cssRenderer.setSize(width, height)\r\n    this.cameraSelector('orthographic')\r\n    this.rendercontainer.appendChild(this.cssRenderer.domElement)\r\n    this.cssRenderer.domElement.id = 'css-renderer'\r\n    this.svgContainer = this.cssRenderer.domElement.childNodes[0]\r\n    this.svgContainer.id = 'svg-container'\r\n\r\n    // Outer Method to add objects to dom\r\n    // this.addInitSVGFromDom()\r\n    // rendercontainer.onwheel = (event) => this.customZoom(event.wheelDelta) // Depreciated => zooming is vert slow | planning to replace with quality slider\r\n\r\n    // Other Three objects\r\n    this.clock = new THREE.Clock()\r\n    this.stats = new Stats()\r\n    this.stats.domElement.style.right = '10px'\r\n    this.stats.domElement.style.left = 'auto'\r\n    this.stats.domElement.style.position = 'absolute'\r\n    this.stats.domElement.style.zIndex = '1002'\r\n    this.stats.domElement.style.top = '10px'\r\n    // this.stats.domElement.classList.add('stats')\r\n    this.rendercontainer.appendChild(this.stats.domElement)\r\n    this.setState({ rendered: true })\r\n  }\r\n\r\n  onWindowResize = () => {\r\n    if (this.rendercontainer) {\r\n      this.camera.aspect = this.rendercontainer.offsetWidth / this.rendercontainer.offsetHeight\r\n      this.camera.updateProjectionMatrix()\r\n      this.cssRenderer.setSize(this.rendercontainer.offsetWidth, this.rendercontainer.offsetHeight)\r\n    }\r\n\r\n  }\r\n\r\n  animationHandler = () => {\r\n    this.cssRenderer.render(this.cssScene, this.camera)\r\n    this.stats.update()\r\n    this.controls.update()\r\n    requestAnimationFrame(this.animationHandler)\r\n  }\r\n\r\n  render() {\r\n    console.log('Rendering Renderer', this.units)\r\n    let layers = this.state.CSS3DObjects.filter((layer) => layer.context === 'board')\r\n    //console.log(layers)\r\n    return (\r\n      <div id='main' style={{ position: 'relative', height: '100%', zIndex: 1000 }}>\r\n        <DrawBoardContext.Provider\r\n          value={{\r\n            infobar: this.infobar,\r\n            rendercontainer: this.rendercontainer,\r\n            svgContainer: this.svgContainer,\r\n            drawContainer: this.drawContainer,\r\n            drawBoardSize: this.drawBoardSize,\r\n            drawBoardScale: this.drawBoardScale,\r\n          }}\r\n        >\r\n\r\n          <SideBar\r\n            style={{ zIndex: '10' }}\r\n            job={this.state.job}\r\n            layers={layers}\r\n            svgContainer={this.svgContainer}\r\n            drawContainer={this.drawContainer}\r\n            drawBoardSize={this.drawBoardSize}\r\n            drawBoardScale={this.drawBoardScale}\r\n            cameraSelector={(...props) => this.cameraSelector(...props)}\r\n            setJob={(...props) => this.setJob(...props)}\r\n            setSVGinDIV={(layer, divLayer) => this.setSVGinDIV(layer, divLayer)}\r\n            removeSVGinDIV={(layer) => this.removeSVGinDIV(layer)}\r\n            clear={() => this.removeAllCSS3DObjects()}\r\n            update={() => this.updateCSSObjects()}\r\n          />\r\n          <div\r\n            id='three'\r\n            style={{ width: '-webkit-fill-available', height: '-webkit-fill-available', position: 'absolute', left: 0, top: 0, zIndex: '-1' }}\r\n            ref={(rendercontainer) => { this.rendercontainer = rendercontainer }}\r\n          />\r\n          <InfoCoords />\r\n        </DrawBoardContext.Provider>\r\n        <div\r\n          id='bottom-info-bar'\r\n          ref={(infobar) => { this.infobar = infobar }}\r\n          style={{\r\n            position: 'absolute',\r\n            width: '-webkit-fill-available',\r\n            textAlign: 'center',\r\n            bottom: '0px',\r\n            zIndex: '1000',\r\n            // filter: 'drop-shadow(2px 4px 6px black)',\r\n            textShadow: '-1px 0px 2px black, 0 1px 2px black, 1px 0 2px black, 0 -1px 2px black',\r\n          }}\r\n        >\r\n          <h4>0in, 0in</h4>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setupScene()\r\n    this.animationHandler()\r\n    this.initDrawBoard()\r\n    new window.ResizeObserver(this.onWindowResize).observe(this.rendercontainer)\r\n    this.controls.update()\r\n  }\r\n}\r\n\r\nexport { Renderer as default, DrawBoardContext }\r\n","import React, { Component } from 'react'\r\nimport './Appcustom.css'\r\nimport Renderer from './components/Renderer'\r\nimport { version } from '../package.json'\r\n\r\nconst dotenv = require('dotenv')\r\ndotenv.config()\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { windowheight: window.innerHeight }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(process.env)\r\n  }\r\n\r\n  render() {\r\n    console.log('Rendering App', version)\r\n    return (\r\n      <div style={{ top: 0, left: 0, height: '100vh', width: '100vw', position: 'absolute' }}>\r\n        <div style={{ margin: 0, height: '-webkit-fill-available' }}>\r\n          <Renderer />\r\n        </div>\r\n\r\n        {/* <Card title='test' className='sidebar'>\r\n          <Button onClick={() => this.testFetch()}>Hello</Button>\r\n        </Card> */}\r\n        <div className='icon-attribute'>\r\n          <h6>!! DEVELOPMENT v{`${version}`} !!</h6>\r\n          <h6>\r\n            Software by{' '}\r\n            <a target='_blank' rel='noreferrer' href='https://github.com/hpcreery'>\r\n              Hunter Creery\r\n            </a>{' '}\r\n          </h6>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}