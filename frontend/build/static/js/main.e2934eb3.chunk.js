(this.webpackJsonpgrx=this.webpackJsonpgrx||[]).push([[0],{198:function(e,t,n){n(250).config(),e.exports={backendurl:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GRX_API||"https://grx.creery.org",port:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GRX_APIPORT||"/api"}},203:function(e){e.exports=JSON.parse('{"a":"1.0.1"}')},290:function(e,t,n){},514:function(e,t,n){},515:function(e,t,n){},516:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),c=n.n(o),i=n(1),s=n(6),l=n(4),d=n(5),u=(n(290),n(34)),b=n.n(u),h=n(44),p=n(120),m=n(204),f=n(530),j=n(261),x=n(52),v=n(531),g=n(274),y=n(527),O=n(107),w=n(61),S=n(522),E=n(523),k=n(533),C=n(538),L=n(539),T=n(540),P=n(285),D=n(37),A=n(525),N=n(534),R=n(7),M=function(){var e,t=Object(a.useContext)(Pe).rendercontainer;t&&(e=getComputedStyle(t).getPropertyValue("--svg-scale"));var n=Object(a.useState)(e),r=Object(D.a)(n,2),o=r[0],c=r[1];return Object(R.jsxs)(O.a,{style:{margin:"5px "},children:[Object(R.jsx)(w.a,{flex:"30px",style:{padding:"5px"},children:Object(R.jsx)(N.a,{})}),Object(R.jsx)(w.a,{flex:"auto",children:Object(R.jsx)(A.a,{min:1,max:10,onChange:function(e){return function(e){t.style.setProperty("--svg-scale",e),c(e)}(e)},value:o})})]})},I=n(521),z=n(532),B=n(529),H=n(57),F=n(535),_=n(164),Y=function(e){var t=Object(a.useState)(e.layer.visible),n=Object(D.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)("#FFFFFF"),i=Object(D.a)(c,2),s=i[0],l=i[1];return Object(a.useEffect)((function(){var t=document.getElementById(e.layer.name);!function n(){null!==t?l(getComputedStyle(t).getPropertyValue("color")):(t=document.getElementById(e.layer.name),setTimeout(n,250))}()}),[e.layer.name]),Object(R.jsx)("div",{style:{width:"100%"},children:Object(R.jsxs)(O.a,{wrap:!1,children:[Object(R.jsx)(w.a,{flex:"10px",children:Object(R.jsx)(I.a,{content:Object(R.jsx)(_.a,{color:s,onChange:function(t,n){return function(t,n){document.getElementById(e.layer.name).style.color="rgba(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,", 0.7)"),l(t.hex)}(t)}}),title:Object(R.jsxs)("div",{children:[Object(R.jsx)(F.a,{}),"\xa0 ColorPicker"]}),placement:"right",trigger:"click",children:Object(R.jsx)(z.a,{color:s})})}),Object(R.jsx)(w.a,{flex:"auto",children:Object(R.jsx)(B.a,{style:{whiteSpace:"pre"},checked:r,onChange:function(t){return function(t){console.log(t),e.layer.visible=t,o(t)}(t.target.checked)},children:Object(R.jsx)(H.a,{placement:"right",title:e.layer.name,children:e.layer.name})})})]})})},V=n(104),X=function(e){var t=e.layer,n=e.add,r=e.remove,o=e.fetchLayer,c=Object(a.useState)(e.layer.visible),i=Object(D.a)(c,2),s=i[0],l=i[1],d=Object(a.useState)("#FFFFFF"),u=Object(D.a)(d,2),p=u[0],m=u[1],f=function(){var a=Object(h.a)(b.a.mark((function a(c){var i,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=document.getElementById(t.name),console.log(i),console.log(t),!0!==c){a.next=10;break}return a.next=6,o(t);case 6:s=a.sent,n.apply(void 0,Object(V.a)(s).concat([i])),a.next=11;break;case 10:!1===c&&r(t);case 11:e.layer.visible=c,l(c);case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(a.useEffect)((function(){console.log("Effect"),console.log(t.name);var e=document.getElementById(t.name);!function n(){null!==e?m(getComputedStyle(e).getPropertyValue("color")):(e=document.getElementById(t.name),setTimeout(n,250))}()}),[e.layer.name]),Object(R.jsx)("div",{style:{width:"100%"},children:Object(R.jsxs)(O.a,{wrap:!1,children:[Object(R.jsx)(w.a,{flex:"10px",children:Object(R.jsx)(I.a,{content:Object(R.jsx)(_.a,{color:p,onChange:function(e,n){return function(e,n){document.getElementById(t.name).style.color="rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", 0.7)"),m(e.hex)}(e)}}),title:Object(R.jsxs)("div",{children:[Object(R.jsx)(F.a,{}),"\xa0 ColorPicker"]}),placement:"right",trigger:"click",children:Object(R.jsx)(z.a,{color:p})})}),Object(R.jsx)(w.a,{flex:"auto",children:Object(R.jsx)(B.a,{style:{whiteSpace:"pre"},checked:s,onChange:function(e){return f(e.target.checked)},children:Object(R.jsx)(H.a,{placement:"right",title:t.name,children:t.name})})})]})})},W=function(){var e=Object(a.useContext)(Pe).rendercontainer,t=Object(a.useState)(!1),n=Object(D.a)(t,2),r=n[0],o=n[1];return Object(R.jsxs)(O.a,{style:{margin:"5px "},children:[Object(R.jsx)(w.a,{flex:"auto",style:{padding:"5px"},children:"Color Blend"}),Object(R.jsx)(w.a,{flex:"30px",style:{padding:"5px"},children:Object(R.jsx)(k.a,{size:"small",checked:r,onChange:function(t){return function(t){t?e.style.setProperty("--blend-mode","color"):e.style.setProperty("--blend-mode","normal"),o(t)}(t)}})})]})},G=n(528),U=n(117),K=n(524),J=n(536),Z=n(537),q=K.a.Dragger,Q=n(198),$=Q.backendurl,ee=Q.port,te=function(e){console.log(e.job);var t=e.job,n=Object(a.useState)([]),r=Object(D.a)(n,2),o=r[0],c=r[1],i=Object(a.useState)(!1),s=Object(D.a)(i,2),l=s[0],d=s[1];Object(a.useEffect)((function(){return u(),function(){}}),[]);var u=function(){var e=Object(h.a)(b.a.mark((function e(){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,fetch("".concat($).concat(ee,"/uploaded?job=").concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=a.map((function(e){return{uid:e,name:e,status:"done"}})),c(r),d(!1),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(h.a)(b.a.mark((function e(n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.prev=1,e.next=4,fetch("".concat($).concat(ee,"/file?job=").concat(t,"&filename=").concat(n.name),{method:"DELETE"});case 4:a=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:return e.abrupt("return",new Promise((function(e,t){try{var n;if(200!==a.status)throw console.error(a),a.text();e(a)}catch(n){t(n)}})));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),m={action:"".concat($).concat(ee,"/upload?job=").concat(t),onChange:function(e){console.log(e);var t=Object(V.a)(e.fileList);t=t.map((function(e){return e.response&&(console.log(e.url),e.url=e.response.url),e})),c(t)},onRemove:p,multiple:!0};return Object(R.jsxs)("div",{children:[Object(R.jsxs)(q,Object(U.a)(Object(U.a)({},m),{},{fileList:o,children:[Object(R.jsx)("p",{children:Object(R.jsx)(J.a,{style:{fontSize:"32px"}})}),Object(R.jsx)("p",{children:"Drag Gerber Files Here"}),Object(R.jsx)("p",{children:"(or click to open directory)"})]})),Object(R.jsx)("div",{style:{textAlign:"right"},children:Object(R.jsx)(x.a,{loading:l,type:"text",icon:Object(R.jsx)(Z.a,{style:{fontSize:"15px"}}),onClick:function(){return u()},children:"Reload"})})]})},ne=function(e){var t=e.replaceArtwork,n=e.job,r=Object(a.useState)(!1),o=Object(D.a)(r,2),c=o[0],i=o[1];Object(a.useEffect)((function(){return function(){}}),[n]);return Object(R.jsxs)("div",{children:[Object(R.jsx)(x.a,{type:"text",size:"small",onClick:function(){i(!0)},children:"Upload"}),Object(R.jsx)(G.a,{title:"Import Gerbers into Job: ".concat(n),visible:c,onOk:function(e){console.log(e),i(!1),t(n)},onCancel:function(e){console.log(e),i(!1)},destroyOnClose:!0,keyboard:!0,children:Object(R.jsx)(te,{job:n})})]})},ae=n(198),re=ae.backendurl,oe=ae.port,ce=function(e){var t=e.replaceArtwork,n=e.update,r=Object(a.useState)(!1),o=Object(D.a)(r,2),c=o[0],i=o[1],s=Object(a.useState)(null),l=Object(D.a)(s,2),d=l[0],u=l[1],p=Object(a.useState)(!0),m=Object(D.a)(p,2),v=m[0],g=m[1],y=function(){var e=Object(h.a)(b.a.mark((function e(a){var r,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=d&&""!==d){e.next=3;break}return j.a.warning("Must Assign your job a name"),e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch("".concat(re).concat(oe,"/job?job=").concat(d),{method:"POST"});case 6:if(200===(r=e.sent).status){e.next=14;break}return e.next=10,r.text();case 10:o=e.sent,console.log(o);try{c=JSON.parse(o),o=c.Message}catch(a){}throw o;case 14:e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(3),console.error(e.t0),j.a.error(e.t0),e.abrupt("return");case 21:i(!1),n(),t(d);case 24:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)("div",{children:[Object(R.jsx)(x.a,{type:"text",size:"small",onClick:function(){i(!0)},children:"Create"}),Object(R.jsx)(G.a,{title:"Create New Job",visible:c,onOk:y,onCancel:function(e){i(!1)},okButtonProps:{disabled:v},keyboard:!0,children:Object(R.jsx)(f.a,{placeholder:"enter job name",onChange:function(e){u(e.target.value),g(!1)},onPressEnter:function(){return y()}})})]})},ie=n(526),se=n(162),le=n.n(se),de=ie.a.Text,ue=function(e){var t,n=Object(a.useContext)(Pe),r=n.drawContainer,o=n.drawBoardSize,c=n.drawBoardScale,i=function(e,t){var n={pixel:{x:0,y:0},inch:{x:0,y:0},mm:{x:0,y:0},draw:{x:0,y:0}};n.pixel.x=(e.offsetX-o/2)*c,n.pixel.y=-(e.offsetY-o/2)*c,n.inch.x=n.pixel.x/96,n.inch.y=n.pixel.y/96,n.mm.x=24*n.inch.x,n.mm.y=24*n.inch.y,n.draw.x=e.offsetX,n.draw.y=e.offsetY,t(n)},s=function(){r.innerHTML="";var e=le()(r.id).size(o,o),t=r.childNodes[0];return t.style.top="-".concat(o/2,"px"),t.style.left="-".concat(o/2,"px"),t.style.position="relative",t.style.transformOrigin="center",t.style.transform="scale(".concat(c,")"),t.style.cursor="crosshair",t.style.filter="drop-shadow(2px 4px 6px black)",e},l=function(){t=s();var e=function(e){return i(e,d)};r.addEventListener("click",e,{once:!0});document.addEventListener("keydown",(function(t){"Escape"===t.key&&(console.log(t),r.removeEventListener("click",e),s())}),{once:!0})},d=function(e){var n=e,a=t.line(e.draw.x,e.draw.y,e.draw.x,e.draw.y).stroke({color:"white",width:3,linecap:"round"}),o=t.text("DX:0 DY:0 D:0").click((function(e){return console.log(e)}));o.font({fill:"white",family:"Inconsolata",size:50});var c=function(e){i(e,(function(e){a.attr({x2:e.draw.x,y2:e.draw.y}),o.move(e.draw.x,e.draw.y).text("DX:".concat((e.inch.x-n.inch.x).toFixed(5),'" DY:').concat((e.inch.y-n.inch.y).toFixed(5),'" D:').concat(Math.sqrt(Math.pow(e.inch.x-n.inch.x,2)+Math.pow(e.inch.y-n.inch.y,2)).toFixed(5),'"'))}))};r.addEventListener("mousemove",c),r.addEventListener("click",(function(e){r.removeEventListener("mousemove",c)}))},u=function(e){console.log(e),e.altKey&&"KeyR"===e.code&&l()};return Object(a.useEffect)((function(){return document.addEventListener("keydown",u,!1),function(){document.removeEventListener("keydown",u,!1)}})),Object(R.jsx)("div",{children:Object(R.jsxs)(x.a,{type:"text",style:{width:"100%"},onClick:function(){return l()},children:["Ruler\xa0",Object(R.jsx)(de,{type:"secondary",children:"(alt+r)"})]})})},be=ie.a.Text,he=function(e){var t=Object(a.useContext)(Pe),n=t.drawContainer,r=t.svgContainer,o=function(){var e=n.childNodes[0];n.removeChild(e);var t,a=r.querySelector("div > svg"),o=a.querySelectorAll("defs > *"),c=a.querySelectorAll("g > *"),i=a.getAttribute("width").slice(-2),s=a.cloneNode(!0),l=[];o.forEach((function(e){l.push({id:e.id,type:e.nodeName,attributes:e.attributes})})),console.log(l),c.forEach((function(e){var n;t=e.style.color,e.onmouseover=function(e){if(e.target.style.color="#08979c","path"===e.target.nodeName)n={type:e.target.nodeName,g:"path",lineWidth:e.target.attributes["stroke-width"]?e.target.attributes["stroke-width"].value:0,code:e.target.attributes.d.value,attr:e.target.attributes};else if("use"===e.target.nodeName){var t=l.find((function(t){return t.id===e.target.attributes["xlink:href"].value.substring(1)}));n={type:e.target.nodeName,g:"pad",x:e.target.attributes.x.value,y:e.target.attributes.y.value,shapeid:e.target.attributes["xlink:href"].value,shape:t,attr:e.target.attributes}}var a=document.getElementById("bottom-info-bar"),r=a.childNodes[0],o=document.createElement("h4");o.innerHTML=n?"path"===n.g?"0"===n.lineWidth?"SURFACE":"LINE | Width: ".concat(n.lineWidth/1e3).concat(i):"PAD | Shape: ".concat("g"===n.shape.type?"SPECIAL | X: ".concat((n.x/1e3).toFixed(5)).concat(i," Y: ").concat((n.y/1e3).toFixed(5)).concat(i):"".concat(n.shape.type.toUpperCase(),"  | X: ").concat((n.x/1e3).toFixed(5)).concat(i," Y: ").concat((n.y/1e3).toFixed(5)).concat(i," | ").concat(function(e,t){for(var n=Object(V.a)(e),a="",r=0;r<n.length;r++)"id"!==n[r].nodeName&&(a+=" ".concat(n[r].nodeName.toUpperCase(),": ").concat((n[r].value/1e3).toFixed(5)).concat(t));return a}(n.shape.attributes,i))):"NA",n&&a.replaceChild(o,r)},e.onmouseleave=function(e){e.target.style.color=t}}));document.addEventListener("keydown",(function(t){"Escape"===t.key&&(n.appendChild(e),a.parentNode.replaceChild(s,a))}),{once:!0})},c=function(e){e.altKey&&"KeyS"===e.code&&o()};return Object(a.useEffect)((function(){return document.addEventListener("keydown",c,!1),function(){document.removeEventListener("keydown",c,!1)}})),Object(R.jsx)("div",{children:Object(R.jsxs)(x.a,{type:"text",style:{width:"100%"},onClick:function(){return o()},children:["Select\xa0",Object(R.jsx)(be,{type:"secondary",children:"(alt+s)"})]})})},pe=p.a.Option,me=m.a.TabPane,fe=f.a.Search,je=n(198),xe=je.backendurl,ve=je.port,ge=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).fetchData=function(){var e=Object(h.a)(b.a.mark((function e(t,n){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0,percent:0}),e.prev=1,e.next=4,fetch(xe+ve+t,{method:n||"GET"});case 4:if(200===(r=e.sent).status){e.next=11;break}return console.error(r),e.next=9,r.text();case 9:throw e.sent;case 11:return e.next=13,r.json();case 13:return o=e.sent,a.setState({loading:!1,percent:100}),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(1),a.setState({loading:!1}),j.a.error("Error => "+e.t0),e.t0;case 23:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,n){return e.apply(this,arguments)}}(),a.fetchLayer=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("front"===t.name||"back"===t.name){e.next=6;break}return e.next=3,a.fetchData("/gbr2svg/getLayerArtwork?job=".concat(a.state.job,"&layer=").concat(t.name));case 3:n=e.sent,e.next=10;break;case 6:return e.next=8,a.fetchData("/gbr2svg/getFinishedArtwork?job=".concat(a.state.job,"&outline=").concat(a.state.useoutline));case 8:n=e.sent,n=Array(n.find((function(e){return e.name===t.name})));case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.replaceArtwork=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Getting Finished Artowrk for",t),!0!==a.state.frontload){e.next=11;break}return e.next=4,a.fetchData("/gbr2svg/getLayerArtwork?job=".concat(t));case 4:return n=e.sent,e.next=7,a.fetchData("/gbr2svg/getFinishedArtwork?job=".concat(t,"&outline=").concat(a.state.useoutline));case 7:r=e.sent,a.props.setJob(t,n,r),e.next=17;break;case 11:if(!1!==a.state.frontload){e.next=17;break}return e.next=14,a.getLayerList(t);case 14:n=e.sent,r=[{name:"front",type:"finished",side:"top",svg:""},{name:"back",type:"finished",side:"bottom",svg:""}],a.props.setJob(t,n,r);case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.changeDOMSVG=function(e,t){a.removeDOMSVG(e),document.getElementById(e).innerHTML=t},a.addDOMSVG=function(e,t){document.getElementById(e).innerHTML=t},a.removeDOMSVG=function(e){document.getElementById(e).innerHTML=""},a.getJobList=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchData("/joblist?search=".concat(t));case 2:return n=e.sent,r=n.Jobs.map((function(e){return e.Name})),a.setState({jobList:r}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getLayerList=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchData("/gbr2svg/getLayerList?job=".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleJobDelete=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,a.fetchData("/job?job=".concat(t),"DELETE");case 3:return n=e.sent,a.getJobList(""),console.log(n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleFrontLoad=function(e){!0===e&&a.replaceArtwork(a.state.job),a.setState({frontload:e})},a.handleUseOutline=function(e){a.setState({useoutline:e})},a.hideSidebar=function(){a.setState({sidebarhidden:!0,sidebar:"sidebar-hidden"})},a.showSidebar=function(){a.setState({sidebarhidden:!1,sidebar:"sidebar"})},a.state={job:null,layers:[],rendered:null,loading:!1,percent:0,jobList:[],sidebarhidden:!1,sidebar:"sidebar",frontload:!1,useoutline:!0,objectSelection:null,coordinatesActive:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(R.jsxs)("div",{style:{padding:"10px",width:"200px",height:"100%"},children:[Object(R.jsx)(x.a,{type:"text",className:"togglesidebar",hidden:this.state.sidebarhidden,onClick:function(){return e.hideSidebar()},children:"HIDE"}),Object(R.jsx)(x.a,{type:"text",className:"togglesidebar",hidden:!this.state.sidebarhidden,onClick:function(){return e.showSidebar()},children:"SHOW"}),Object(R.jsx)(P.a,{style:{padding:0},defaultSize:{height:"100%",width:"200px"},enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},maxWidth:"400px",minWidth:"200px",children:Object(R.jsx)(v.a,{style:{backgroundColor:"rgba(30, 30, 30, 0.85)",backdropFilter:"blur(25px)",height:"100%",width:"-webkit-fill-available",transition:"0.5s ease",pointerEvents:"all"},bodyStyle:{height:"calc(100% - 100px)",padding:"0px"},title:this.state.loading?Object(R.jsx)(g.a,{indicator:Object(R.jsx)(C.a,{spin:!0})}):this.state.job||"GRX Gerber Renderer",className:this.state.sidebar,children:Object(R.jsxs)(m.a,{animated:{inkBar:!0,tabPane:!0},size:"small",defaultActiveKey:"1",onChange:function(e){return console.log(e)},centered:!0,children:[Object(R.jsxs)(me,{tab:"Jobs",children:[Object(R.jsx)(fe,{placeholder:"input search",onSearch:function(t){return e.getJobList(t)},style:{width:"-webkit-fill-available"}}),Object(R.jsx)("div",{style:{height:"100%",position:"relative",overflowX:"hidden",overflowY:"scroll"},children:Object(R.jsx)(y.b,{size:"small",header:Object(R.jsxs)(O.a,{style:{margin:"0px"},children:[Object(R.jsx)(w.a,{span:15,style:{padding:"0px 10px"},children:Object(R.jsx)("div",{children:"Job List"})}),Object(R.jsx)(w.a,{span:9,style:{padding:"0px",textAlign:"right"},children:Object(R.jsx)(ce,{replaceArtwork:function(t){return e.replaceArtwork(t)},update:function(){return e.getJobList("")}})})]}),dataSource:this.state.jobList,renderItem:function(t){return Object(R.jsxs)(y.b.Item,{style:{padding:"5px 5px"},children:[Object(R.jsx)(x.a,{type:"link",style:{width:"90%",height:"27px"},onClick:function(){return e.replaceArtwork(t)},children:t}),Object(R.jsx)(S.a,{title:"Are you sure delete this job?",onConfirm:function(){return e.handleJobDelete(t)},okText:"Yes",cancelText:"No",children:Object(R.jsx)(L.a,{})})]})}})})]},"1"),Object(R.jsx)(me,{tab:"Layers",style:{overflowX:"hidden",overflowY:"scroll",height:"100%"},children:Object(R.jsx)(y.b,{size:"small",header:Object(R.jsxs)(O.a,{style:{margin:"0px"},children:[Object(R.jsx)(w.a,{span:15,style:{padding:"0px 10px"},children:Object(R.jsx)("div",{children:"Layers"})}),Object(R.jsx)(w.a,{span:9,style:{padding:"0px",textAlign:"right"},children:Object(R.jsx)(ne,{replaceArtwork:function(t){return e.replaceArtwork(t)},job:this.state.job})})]}),dataSource:this.state.layers,renderItem:function(t){return Object(R.jsx)(y.b.Item,{style:{padding:"8px 8px"},children:e.state.frontload?Object(R.jsx)(Y,{layer:t},t):Object(R.jsx)(X,{layer:t,add:function(){var t;return(t=e.props).setSVGinDIV.apply(t,arguments)},remove:function(){var t;return(t=e.props).removeSVGinDIV.apply(t,arguments)},fetchLayer:function(){return e.fetchLayer.apply(e,arguments)}},t)})}})},"2"),Object(R.jsxs)(me,{tab:"Tools",forceRender:!0,style:{overflowX:"hidden",overflowY:"scroll",height:"100%"},children:[Object(R.jsx)(E.a,{plain:!0,children:"Kit"}),Object(R.jsx)(he,{}),Object(R.jsx)(ue,{}),Object(R.jsx)(E.a,{plain:!0,children:"Settings"}),Object(R.jsxs)(O.a,{style:{margin:"5px "},children:[Object(R.jsx)(w.a,{flex:"30px",style:{padding:"5px"},children:Object(R.jsx)(T.a,{})}),Object(R.jsx)(w.a,{flex:"auto",children:Object(R.jsxs)(p.a,{defaultValue:"orthographic",onChange:function(t){return e.props.cameraSelector(t)},style:{width:"100%"},children:[Object(R.jsx)(pe,{value:"perspective",children:"Perspective"}),Object(R.jsx)(pe,{value:"orthographic",children:"Orthographic"})]})})]}),Object(R.jsx)(M,{}),Object(R.jsx)(W,{}),Object(R.jsxs)(O.a,{style:{margin:"5px "},children:[Object(R.jsx)(w.a,{flex:"auto",style:{padding:"5px"},children:"Front Load"}),Object(R.jsx)(w.a,{flex:"30px",style:{padding:"5px"},children:Object(R.jsx)(k.a,{size:"small",checked:this.state.frontload,onChange:function(t){return e.handleFrontLoad(t)}})})]}),Object(R.jsxs)(O.a,{style:{margin:"5px "},children:[Object(R.jsx)(w.a,{flex:"auto",style:{padding:"5px"},children:"Use Outline"}),Object(R.jsx)(w.a,{flex:"30px",style:{padding:"5px"},children:Object(R.jsx)(k.a,{size:"small",checked:this.state.useoutline,onChange:function(t){return e.handleUseOutline(t)}})})]})]},"3")]})})})]})}},{key:"componentDidMount",value:function(){this.getJobList("")}},{key:"componentDidUpdate",value:function(){console.log("updated")}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return console.log(t,e),e.job!==t.job||e.layers!==t.layers?(n.job=e.job,n.layers=e.layers,n):null}}]),n}(a.Component),ye=n(20),Oe=n(41),we={type:"change"},Se={type:"start"},Ee={type:"end"},ke=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;Object(i.a)(this,n),r=t.call(this),void 0===a&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),a===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.object=e,r.domElement=a,r.enabled=!0,r.target=new ye.m,r.minDistance=0,r.maxDistance=1/0,r.minZoom=0,r.maxZoom=1/0,r.minPolarAngle=0,r.maxPolarAngle=Math.PI,r.minAzimuthAngle=-1/0,r.maxAzimuthAngle=1/0,r.enableDamping=!1,r.dampingFactor=.05,r.enableZoom=!0,r.zoomSpeed=1,r.enableRotate=!0,r.rotateSpeed=1,r.enablePan=!0,r.panSpeed=1,r.screenSpacePanning=!0,r.keyPanSpeed=7,r.autoRotate=!1,r.autoRotateSpeed=2,r.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},r.mouseButtons={LEFT:ye.c.ROTATE,MIDDLE:ye.c.DOLLY,RIGHT:ye.c.PAN},r.touches={ONE:ye.k.ROTATE,TWO:ye.k.DOLLY_PAN},r.target0=r.target.clone(),r.position0=r.object.position.clone(),r.zoom0=r.object.zoom,r._domElementKeyEvents=null,r.getPolarAngle=function(){return d.phi},r.getAzimuthalAngle=function(){return d.theta},r.listenToKeyEvents=function(e){e.addEventListener("keydown",X),this._domElementKeyEvents=e},r.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},r.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(we),o.update(),s=c.NONE},r.update=function(){var t=new ye.m,n=(new ye.h).setFromUnitVectors(e.up,new ye.m(0,1,0)),a=n.clone().invert(),r=new ye.m,i=new ye.h,m=2*Math.PI;return function(){var e=o.object.position;t.copy(e).sub(o.target),t.applyQuaternion(n),d.setFromVector3(t),o.autoRotate&&s===c.NONE&&E(2*Math.PI/60/60*o.autoRotateSpeed),o.enableDamping?(d.theta+=u.theta*o.dampingFactor,d.phi+=u.phi*o.dampingFactor):(d.theta+=u.theta,d.phi+=u.phi);var f=o.minAzimuthAngle,j=o.maxAzimuthAngle;return isFinite(f)&&isFinite(j)&&(f<-Math.PI?f+=m:f>Math.PI&&(f-=m),j<-Math.PI?j+=m:j>Math.PI&&(j-=m),d.theta=f<=j?Math.max(f,Math.min(j,d.theta)):d.theta>(f+j)/2?Math.max(f,d.theta):Math.min(j,d.theta)),d.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=b,d.radius=Math.max(o.minDistance,Math.min(o.maxDistance,d.radius)),!0===o.enableDamping?o.target.addScaledVector(h,o.dampingFactor):o.target.add(h),t.setFromSpherical(d),t.applyQuaternion(a),e.copy(o.target).add(t),o.object.lookAt(o.target),!0===o.enableDamping?(u.theta*=1-o.dampingFactor,u.phi*=1-o.dampingFactor,h.multiplyScalar(1-o.dampingFactor)):(u.set(0,0,0),h.set(0,0,0)),b=1,!!(p||r.distanceToSquared(o.object.position)>l||8*(1-i.dot(o.object.quaternion))>l)&&(o.dispatchEvent(we),r.copy(o.object.position),i.copy(o.object.quaternion),p=!1,!0)}}(),r.dispose=function(){o.domElement.removeEventListener("contextmenu",K),o.domElement.removeEventListener("pointerdown",F),o.domElement.removeEventListener("wheel",V),o.domElement.removeEventListener("touchstart",W),o.domElement.removeEventListener("touchend",U),o.domElement.removeEventListener("touchmove",G),o.domElement.ownerDocument.removeEventListener("pointermove",_),o.domElement.ownerDocument.removeEventListener("pointerup",Y),null!==o._domElementKeyEvents&&o._domElementKeyEvents.removeEventListener("keydown",X)};var o=Object(Oe.a)(r),c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=c.NONE,l=1e-6,d=new ye.j,u=new ye.j,b=1,h=new ye.m,p=!1,m=new ye.l,f=new ye.l,j=new ye.l,x=new ye.l,v=new ye.l,g=new ye.l,y=new ye.l,O=new ye.l,w=new ye.l;function S(){return Math.pow(.95,o.zoomSpeed)}function E(e){u.theta-=e}function k(e){u.phi-=e}var C=function(){var e=new ye.m;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),L=function(){var e=new ye.m;return function(t,n){!0===o.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),T=function(){var e=new ye.m;return function(t,n){var a=o.domElement;if(o.object.isPerspectiveCamera){var r=o.object.position;e.copy(r).sub(o.target);var c=e.length();c*=Math.tan(o.object.fov/2*Math.PI/180),C(2*t*c/a.clientHeight,o.object.matrix),L(2*n*c/a.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(C(t*(o.object.right-o.object.left)/o.object.zoom/a.clientWidth,o.object.matrix),L(n*(o.object.top-o.object.bottom)/o.object.zoom/a.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();function P(e){o.object.isPerspectiveCamera?b/=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function D(e){o.object.isPerspectiveCamera?b*=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function A(e){m.set(e.clientX,e.clientY)}function N(e){x.set(e.clientX,e.clientY)}function R(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,n)}}function M(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,n)}}function I(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);y.set(0,a)}function z(e){if(1==e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,n)}j.subVectors(f,m).multiplyScalar(o.rotateSpeed);var a=o.domElement;E(2*Math.PI*j.x/a.clientHeight),k(2*Math.PI*j.y/a.clientHeight),m.copy(f)}function B(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,n)}g.subVectors(v,x).multiplyScalar(o.panSpeed),T(g.x,g.y),x.copy(v)}function H(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);O.set(0,a),w.set(0,Math.pow(O.y/y.y,o.zoomSpeed)),P(w.y),y.copy(O)}function F(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),o.domElement.focus?o.domElement.focus():window.focus(),e.button){case 0:t=o.mouseButtons.LEFT;break;case 1:t=o.mouseButtons.MIDDLE;break;case 2:t=o.mouseButtons.RIGHT;break;default:t=-1}switch(t){case ye.c.DOLLY:if(!1===o.enableZoom)return;!function(e){y.set(e.clientX,e.clientY)}(e),s=c.DOLLY;break;case ye.c.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enablePan)return;N(e),s=c.PAN}else{if(!1===o.enableRotate)return;A(e),s=c.ROTATE}break;case ye.c.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enableRotate)return;A(e),s=c.ROTATE}else{if(!1===o.enablePan)return;N(e),s=c.PAN}break;default:s=c.NONE}s!==c.NONE&&(o.domElement.ownerDocument.addEventListener("pointermove",_),o.domElement.ownerDocument.addEventListener("pointerup",Y),o.dispatchEvent(Se))}(e)}}function _(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===o.enabled)return;switch(e.preventDefault(),s){case c.ROTATE:if(!1===o.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),j.subVectors(f,m).multiplyScalar(o.rotateSpeed);var t=o.domElement;E(2*Math.PI*j.x/t.clientHeight),k(2*Math.PI*j.y/t.clientHeight),m.copy(f),o.update()}(e);break;case c.DOLLY:if(!1===o.enableZoom)return;!function(e){O.set(e.clientX,e.clientY),w.subVectors(O,y),w.y>0?P(S()):w.y<0&&D(S()),y.copy(O),o.update()}(e);break;case c.PAN:if(!1===o.enablePan)return;!function(e){console.log("pannin",e.clientX,e.clientY),v.set(e.clientX,e.clientY),g.subVectors(v,x).multiplyScalar(o.panSpeed),T(g.x,g.y),x.copy(v),o.update()}(e)}}(e)}}function Y(e){switch(e.pointerType){case"mouse":case"pen":!function(e){if(o.domElement.ownerDocument.removeEventListener("pointermove",_),o.domElement.ownerDocument.removeEventListener("pointerup",Y),!1===o.enabled)return;o.dispatchEvent(Ee),s=c.NONE}()}}function V(e){!1===o.enabled||!1===o.enableZoom||s!==c.NONE&&s!==c.ROTATE||(e.preventDefault(),o.dispatchEvent(Se),function(e){console.log("zoomin",e);var t=o.domElement;x.set(e.clientX,e.clientY),v.set(t.clientWidth/2,t.clientHeight/2),e.deltaY<0?(g.subVectors(v,x).multiplyScalar(.05),T(g.x,g.y),D(S())):e.deltaY>0&&(g.subVectors(x,v).multiplyScalar(.05),T(g.x,g.y),P(S())),o.update()}(e),o.dispatchEvent(Ee))}function X(e){!1!==o.enabled&&!1!==o.enablePan&&function(e){var t=!1;switch(e.code){case o.keys.UP:T(0,o.keyPanSpeed),t=!0;break;case o.keys.BOTTOM:T(0,-o.keyPanSpeed),t=!0;break;case o.keys.LEFT:T(o.keyPanSpeed,0),t=!0;break;case o.keys.RIGHT:T(-o.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),o.update())}(e)}function W(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(o.touches.ONE){case ye.k.ROTATE:if(!1===o.enableRotate)return;R(e),s=c.TOUCH_ROTATE;break;case ye.k.PAN:if(!1===o.enablePan)return;M(e),s=c.TOUCH_PAN;break;default:s=c.NONE}break;case 2:switch(o.touches.TWO){case ye.k.DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&I(e),o.enablePan&&M(e)}(e),s=c.TOUCH_DOLLY_PAN;break;case ye.k.DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&I(e),o.enableRotate&&R(e)}(e),s=c.TOUCH_DOLLY_ROTATE;break;default:s=c.NONE}break;default:s=c.NONE}s!==c.NONE&&o.dispatchEvent(Se)}}function G(e){if(!1!==o.enabled)switch(e.preventDefault(),s){case c.TOUCH_ROTATE:if(!1===o.enableRotate)return;z(e),o.update();break;case c.TOUCH_PAN:if(!1===o.enablePan)return;B(e),o.update();break;case c.TOUCH_DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&H(e),o.enablePan&&B(e)}(e),o.update();break;case c.TOUCH_DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&H(e),o.enableRotate&&z(e)}(e),o.update();break;default:s=c.NONE}}function U(e){!1!==o.enabled&&(o.dispatchEvent(Ee),s=c.NONE)}function K(e){!1!==o.enabled&&e.preventDefault()}return o.domElement.addEventListener("contextmenu",K),o.domElement.addEventListener("pointerdown",F),o.domElement.addEventListener("wheel",V,{passive:!1}),o.domElement.addEventListener("touchstart",W,{passive:!1}),o.domElement.addEventListener("touchend",U),o.domElement.addEventListener("touchmove",G,{passive:!1}),r.update(),r}return n}(ye.b),Ce=n(122),Le=n(280),Te=function(e){var t=Object(a.useState)({pixel:{x:0,y:0},inch:{x:0,y:0},mm:{x:0,y:0},draw:{x:0,y:0}}),n=Object(D.a)(t,2),r=n[0],o=n[1],c=Object(a.useContext)(Pe),i=c.drawContainer,s=c.drawBoardSize,l=c.drawBoardScale,d=c.infobar,u=function(e){var t=d.childNodes[0],n={pixel:{x:0,y:0},inch:{x:0,y:0},mm:{x:0,y:0},draw:{x:0,y:0}};n.pixel.x=(e.offsetX-s/2)*l,n.pixel.y=-(e.offsetY-s/2)*l,n.inch.x=n.pixel.x/96,n.inch.y=n.pixel.y/96,n.mm.x=24*n.inch.x,n.mm.y=24*n.inch.y,n.draw.x=e.offsetX,n.draw.y=-e.offsetY;var a=document.createElement("h4");a.innerHTML="( ".concat(r.inch.x.toFixed(5),"in, ").concat(r.inch.y.toFixed(5),"in )"),d.replaceChild(a,t),o(n)};return Object(a.useEffect)((function(){return function(){null===i||void 0===i||i.removeEventListener("mousemove",u)}})),Object(R.jsx)("div",{})},Pe=(n(514),r.a.createContext()),De=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).CSS3DObjects=[],a.addInitSVGFromDom=function(){var e;e=document.getElementById("front"),a.frontPCBObject=new Ce.a(e),a.frontPCBObject.name="front",a.frontPCBObject.position.x=0,a.frontPCBObject.position.y=25,a.frontPCBObject.position.z=1,a.frontPCBObject.context=e.getAttribute("data-context"),a.cssScene.add(a.frontPCBObject),e=document.getElementById("back"),a.backPCBObject=new Ce.a(e),a.backPCBObject.name="back",a.backPCBObject.position.x=0,a.backPCBObject.position.y=25,a.backPCBObject.position.z=.5,a.backPCBObject.context=e.getAttribute("data-context"),a.cssScene.add(a.backPCBObject),a.setState({CSS3DObjects:[a.frontPCBObject,a.backPCBObject]})},a.initDrawBoard=function(){if(!/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){a.drawContainer=document.createElement("div"),a.drawContainer.id="draw-board",a.drawContainer.style.cssText="position: absolute; width: 0px; height: 0px;",a.drawContainer.style.zIndex="1000",a.drawContainer.setAttribute("data-context","drawing"),a.drawContainer.style.transform="matrix3d(1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1) scale(var(--svg-scale))",a.svgContainer.appendChild(a.drawContainer),a.drawing=le()(a.drawContainer.id).size(a.drawBoardSize,a.drawBoardSize);var e=a.drawContainer.childNodes[0];e.style.top="-".concat(a.drawBoardSize/2,"px"),e.style.left="-".concat(a.drawBoardSize/2,"px"),e.style.position="relative",e.style.transformOrigin="center",e.style.transform="scale(".concat(a.drawBoardScale,")"),e.style.cursor="crosshair"}},a.setJob=function(e,t,n){a.removeAllLayers(),t.forEach((function(e){a.addLayer(e,!1)})),n.forEach((function(e){a.addLayer(e,!1)})),a.setState({CSS3DObjects:a.cssScene.children,job:e})},a.addLayer=function(e,t){var n=document.createElement("div");n.id=e.name,n.setAttribute("data-type",e.type),n.setAttribute("data-side",e.side),n.setAttribute("data-context","board"),n.style.width="0px",n.style.height="0px",n.style.position="relative",n.style.color="rgb(".concat(Math.floor(256*Math.random()),", ").concat(Math.floor(256*Math.random()),", ").concat(Math.floor(256*Math.random()),", 0.7)"),e.svg&&(n=a.setSVGinDIV(e,n)),a.addElementToThree(n,t)},a.setSVGinDIV=function(e,t){t.innerHTML=e.svg;var n=t.childNodes[0],a=n.getAttribute("viewBox"),r=n.getAttribute("width").slice(-2),o=a.split(" "),c=Number(o[0])/1e3,i=Number(o[1])/1e3,s=Number(o[2])/1e3,l=Number(o[3])/1e3;if(t.dataset.width=s,t.dataset.height=l,n.style.position="relative",n.style.transformOrigin="0 0","back"===t.id)n.style.bottom="calc(".concat(l+i).concat(r," * var(--svg-scale))"),n.style.left="calc(".concat(c+s).concat(r," * var(--svg-scale))");else if("front"===t.id){var d=document.createElement("h4");d.className="width-measurement",d.innerHTML="WIDTH: ".concat(s).concat(r),d.style.bottom="calc(".concat(i).concat(r," * var(--svg-scale))"),d.style.left="calc(".concat(c+s).concat(r," * var(--svg-scale))"),t.appendChild(d);var u=document.createElement("h4");u.className="height-measurement",u.innerHTML="HEIGHT: ".concat(l).concat(r),u.style.bottom="calc(".concat(l+i).concat(r," * var(--svg-scale))"),u.style.left="calc(".concat(c).concat(r," * var(--svg-scale))"),t.appendChild(u),n.style.bottom="calc(".concat(l+i).concat(r," * var(--svg-scale))"),n.style.left="calc(".concat(c).concat(r," * var(--svg-scale))")}else n.style.bottom="calc(".concat(l+i).concat(r," * var(--svg-scale))"),n.style.left="calc(".concat(c).concat(r," * var(--svg-scale))");return t},a.removeSVGinDIV=function(e){document.getElementById(e.name).innerHTML=""},a.removeLayer=function(e){a.removeCSS3DObject(e.name)},a.addElementToThree=function(e,t){var n=new Ce.a(e);n.name=e.id,n.visible=t,n.context=e.getAttribute("data-context"),n.position.x=0,n.position.y=0,"back"===n.name?n.position.z=-.5:"front"===n.name&&(n.position.z=.5),a.cssScene.add(n)},a.removeCSS3DObject=function(e){a.cssScene.remove(a.state.CSS3DObjects.find((function(t){return t.name===e}))),a.setState({CSS3DObjects:a.cssScene.children})},a.removeAllCSS3DObjects=function(){for(var e=a.state.CSS3DObjects.length-1;e>=0;e--)a.cssScene.remove(a.state.CSS3DObjects[e]);a.setState({CSS3DObjects:a.cssScene.children})},a.removeAllLayers=function(){for(var e=a.state.CSS3DObjects.filter((function(e){return"board"===e.context})),t=e.length-1;t>=0;t--)a.cssScene.remove(e[t]);a.setState({CSS3DObjects:a.cssScene.children})},a.updateCSSObjects=function(){a.cssScene.children.forEach((function(e){a.cssScene.remove(e)})),a.state.CSS3DObjects.forEach((function(e){a.cssScene.add(e)}))},a.cameraSelector=function(e){"perspective"===e?(a.camera=new ye.g(75,a.rendercontainer.innerWidth/a.rendercontainer.innerHeight,.01,1e3),a.camera.position.z=700,a.controls=new ke(a.camera,a.cssRenderer.domElement),a.controls.enableRotate=!0,a.controls.zoomSpeed=1,a.setState({cameraType:e})):"orthographic"===e?(a.camera=new ye.f(a.rendercontainer.offsetWidth/-2,a.rendercontainer.offsetWidth/2,a.rendercontainer.offsetHeight/2,a.rendercontainer.offsetHeight/-2,1,1e3),a.camera.position.z=900,a.controls=new ke(a.camera,a.cssRenderer.domElement),a.controls.enableRotate=!1,a.controls.zoomSpeed=1,a.setState({cameraType:e})):console.log("unkown camera type:",e)},a.setupScene=function(){var e=a.rendercontainer.clientWidth,t=a.rendercontainer.clientHeight;a.cssScene=new ye.i,a.rendercontainer.style.setProperty("--svg-scale","1"),a.cssRenderer=new Ce.b,a.cssRenderer.setSize(e,t),a.cameraSelector("orthographic"),a.rendercontainer.appendChild(a.cssRenderer.domElement),a.cssRenderer.domElement.id="css-renderer",a.svgContainer=a.cssRenderer.domElement.childNodes[0],a.svgContainer.id="svg-container",a.clock=new ye.a,a.stats=new Le.a,a.stats.domElement.style.right="10px",a.stats.domElement.style.left="auto",a.stats.domElement.style.position="absolute",a.stats.domElement.style.zIndex="1002",a.stats.domElement.style.top="10px",a.rendercontainer.appendChild(a.stats.domElement),a.setState({rendered:!0})},a.onWindowResize=function(){a.rendercontainer&&(a.camera.aspect=a.rendercontainer.offsetWidth/a.rendercontainer.offsetHeight,a.camera.updateProjectionMatrix(),a.cssRenderer.setSize(a.rendercontainer.offsetWidth,a.rendercontainer.offsetHeight))},a.animationHandler=function(){a.cssRenderer.render(a.cssScene,a.camera),a.stats.update(),a.controls.update(),requestAnimationFrame(a.animationHandler)},a.state={rendered:null,job:null,CSS3DObjects:[],cameraType:"orthographic",mouseCoordinates:{pixel:{x:0,y:0},inch:{x:0,y:0},mm:{x:0,y:0},draw:{x:0,y:0}}},a.drawBoardSize=1e5,a.drawBoardScale=.1,a.svgContainer=null,a.drawContainer=null,a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;console.log("Rendering Renderer",this.units);var t=this.state.CSS3DObjects.filter((function(e){return"board"===e.context}));return Object(R.jsxs)("div",{id:"main",style:{position:"relative",height:"100%",zIndex:1e3},children:[Object(R.jsxs)(Pe.Provider,{value:{infobar:this.infobar,rendercontainer:this.rendercontainer,svgContainer:this.svgContainer,drawContainer:this.drawContainer,drawBoardSize:this.drawBoardSize,drawBoardScale:this.drawBoardScale},children:[Object(R.jsx)(ge,{style:{zIndex:"10"},job:this.state.job,layers:t,svgContainer:this.svgContainer,drawContainer:this.drawContainer,drawBoardSize:this.drawBoardSize,drawBoardScale:this.drawBoardScale,cameraSelector:function(){return e.cameraSelector.apply(e,arguments)},setJob:function(){return e.setJob.apply(e,arguments)},setSVGinDIV:function(t,n){return e.setSVGinDIV(t,n)},removeSVGinDIV:function(t){return e.removeSVGinDIV(t)},clear:function(){return e.removeAllCSS3DObjects()},update:function(){return e.updateCSSObjects()}}),Object(R.jsx)("div",{id:"three",style:{width:"-webkit-fill-available",height:"-webkit-fill-available",position:"absolute",left:0,top:0,zIndex:"-1"},ref:function(t){e.rendercontainer=t}}),Object(R.jsx)(Te,{})]}),Object(R.jsx)("div",{id:"bottom-info-bar",ref:function(t){e.infobar=t},style:{position:"absolute",width:"-webkit-fill-available",textAlign:"center",bottom:"0px",zIndex:"1000",textShadow:"-1px 0px 2px black, 0 1px 2px black, 1px 0 2px black, 0 -1px 2px black"},children:Object(R.jsx)("h4",{children:"0in, 0in"})})]})}},{key:"componentDidMount",value:function(){this.setupScene(),this.animationHandler(),this.initDrawBoard(),new window.ResizeObserver(this.onWindowResize).observe(this.rendercontainer),this.controls.update()}}]),n}(a.Component),Ae=n(203);n(250).config();var Ne=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={windowheight:window.innerHeight},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))}},{key:"render",value:function(){return console.log("Rendering App",Ae.a),Object(R.jsxs)("div",{style:{top:0,left:0,height:"100vh",width:"100vw",position:"absolute"},children:[Object(R.jsx)("div",{style:{margin:0,height:"-webkit-fill-available"},children:Object(R.jsx)(De,{})}),Object(R.jsxs)("div",{className:"icon-attribute",children:[Object(R.jsxs)("h6",{children:["!! DEVELOPMENT v","".concat(Ae.a)," !!"]}),Object(R.jsxs)("h6",{children:["Software by"," ",Object(R.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/hpcreery",children:"Hunter Creery"})," "]})]})]})}}]),n}(a.Component);n(515);c.a.render(Object(R.jsx)(Ne,{}),document.getElementById("root"))}},[[516,1,2]]]);
//# sourceMappingURL=main.e2934eb3.chunk.js.map